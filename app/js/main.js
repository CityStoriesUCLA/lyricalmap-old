define("controllers/issue",["jquery","underscore","backbone","controllers/prototype","mixins/asyncInit","views/issue","models/issue"],function(e,n,i,o,r,t,l){"use strict";var c=o.extend({model:null,view:null,router:null,initialize:function(i){var o=this;o.$def=e.Deferred(),o.router=i.router,o.model=new l({config:i.config}),o.view=new t({model:o.model,config:i.config}),o.view.render(),o.model.init().done(function(){n.forEach(o.model.get("collection").models,function(e){o.listenTo(e,"active",function(e){var n="article/"+e.get("articleid");o.router.navigate(n,{trigger:!0}),o.view.renderArticle(e)})}),o.$def.resolve(o)}).always(function(){o.$def.reject()})}});return n.extend(c.prototype,r),c});
define("controllers/map",["jquery","underscore","backbone","controllers/prototype","models/map","views/map","mixins/asyncInit","controllers/map/pan","controllers/map/layer"],function(e,o,r,n,a,p,i,t,l,u){"use strict";var s=n.extend({model:null,view:null,issue:null,config:null,mapPanController:null,MapLayerController:null,mapTimelineController:null,initialize:function(o){var r=this;r.$def=e.Deferred(),r.config=o.config,r.router=o.router,r.issue=o.issue,r.model=new a(o),r.view=new p({model:r.model,router:r.router,issue:r.issue}),r.view.init().done(function(){r.mapPanController=new t({map:r.view.map,mapconfig:r.model.attributes.mapconfig}),r.mapLayerController=new l({view:r.view,map:r.view.map,model:r.model,mapconfig:r.model.attributes.mapconfig,controlsconfig:r.config.controls}),r.listenTo(r.view,"markers",function(e){r._registerMarkers(e),r.mapPanController.fitMarkerBounds(r.view.markerViews)}),r.view.render()}),e.when.apply(null,[r.model.init(),r.view.init()]).done(function(){r.$def.resolve(r)})},_registerMarkers:function(e){var r=this;o.forEach(e,function(e){r.listenTo(e.model,"active",function(o){r.mapPopupOpen(e.markerLayer);var n=r._getMarkerLayer(e.markerLayer,"getPopup");null!==n&&r.mapPanController.handlePopupPosition(n.getPopup())}),r.listenTo(e.model,"toggle",function(o){r.mapPopupToggle(e.markerLayer);var n=r._getMarkerLayer(e.markerLayer,"getPopup");null!==n&&r.mapPanController.handlePopupPosition(n.getPopup())}),r.listenTo(e,"click",function(o){r.mapPopupOpen(o),e.model.trigger("active",e.model)}),r.listenTo(e,"mouseover",function(e){r.view.map.hoverPopup&&(openpopup[popupid(mapMarker.getLatLng())]||mapMarker.openPopup())})})},_getMarkerLayer:function(e,r){var n,a;if(e instanceof L.LayerGroup){if(r in e)n=e;else for(a=e.getLayers();e=a.pop();)if(r in e){n=e;break}}else o.has(e,"originalEvent")&&(n=e.target);return n},mapPopupOpen:function(e){var o=this._getMarkerLayer(e,"openPopup");o&&o.openPopup()},mapPopupToggle:function(e){var o=this._getMarkerLayer(e,"togglePopup");o&&o.togglePopup()},mapPopupClose:function(e){var o=this._getMarkerLayer(e,"closePopup");o&&o.closePopup()}});return o.extend(s.prototype,i),s});
define("controllers/prototype",["underscore","backbone"],function(e,t){"use strict";var n=function(){this.cid=e.uniqueId("controller"),this.initialize.apply(this,arguments)};return n.extend=t.Router.extend,e.extend(n.prototype,t.Events),e.extend(n.prototype,{initialize:function(){throw new Error("unimplemented initialize()")}}),n});
define("collections/articles",["jquery","underscore","backbone","models/article"],function(e,c,n,o){"use strict";var r=n.Collection.extend({model:o});return r});
define("collections/timeline",["jquery","underscore","backbone","models/map/layer/timeline/item"],function(e,n,i,t){"use strict";var l=i.Collection.extend({model:t});return l});
define("controls/L.Control.Timeline",["leaflet","d3"],function(t,i){return t.Control.Timeline?t:(t.Control.Timeline=t.Control.extend({options:{orientation:"left",height:500,width:100,margin:{left:3,right:3,top:10,bottom:5},collapsed:!0,item:{minHeight:1},on:null,title:"Timeline",position:"topleft"},initialize:function(i,e,n){var o=this;t.Util.setOptions(this,n),this._map=i,this._source=e;var l=this._container=t.DomUtil.create("div","leaflet-control-timeline leaflet-control");if(this.options.collapsed){t.DomUtil.addClass(l,"leaflet-control-timeline-collapsed");var s=this._toggle=t.DomUtil.create("a","leaflet-control-timeline-toggle",l);s.title=this.options.title,s.link="#";var a=function(){o._expand()};t.Browser.touch?t.DomEvent.on(s,"click",t.DomEvent.stop).on(s,"click",a,this):t.DomEvent.on(s,"click",a)}else t.DomUtil.addClass(l,"leaflet-control-timeline-expanded");return t.Browser.touch?t.DomEvent.on(this._container,"click",t.DomEvent.stopPropagation):t.DomEvent.disableClickPropagation(this._container),l},onRemove:function(){},onAdd:function(t){return this._container},_expand:function(){var e=this;if(!e._expanded&&(e._expanded=!0,this._map.on("click",this._collapse,this),t.DomUtil.removeClass(this._container,"leaflet-control-timeline-collapsed"),t.DomUtil.addClass(this._container,"leaflet-control-timeline-expanded"),!this._timeline)){var n=this.options.height-this.options.margin.top-this.options.margin.bottom,o=this.options.width-this.options.margin.right-this.options.margin.left,l=(this._xScale=i.scale.linear().range([0,o]),this._yScale=i.scale.linear().domain([this._source.start,this._source.end]).range([0,n])),s=this._timeline=i.select(".leaflet-control-timeline").append("svg").attr("id","timeline").attr("height",this.options.height).attr("width",this.options.width),a=s.append("g").attr("id","band").attr("width",o/2-this.options.margin.right).attr("height",n).attr("transform","translate("+.25*o+","+this.options.margin.top+") scale(.75 1.0)"),r=(a.selectAll("g").data(this._source.getItems()).enter().append("rect").attr("class","timeline-item").attr("height",function(t){return i.max([e.options.item.minHeight,l(t.duration())])}).attr("width",o).attr("transform",function(t){return"translate(0, "+l(t.start)+")"}),this._brush=i.svg.brush().y(l).on("brushend",function(){var t=l(r.extent()[0]),n=l(r.extent()[1]),o={clear:!1,selected:[]};t!==n?i.select("#band").selectAll("rect.timeline-item").each(function(i){l(i.start)<=n&&l(i.end)>=t&&o.selected.push(i)}):o.clear=!0,e.options.on.brushend(o)})),c=a.append("svg").attr("id","brush").call(r);c.selectAll("rect").attr("width",o);var h=s.append("g").attr("id","axis").attr("transform","translate("+(.25*o-this.options.margin.left)+","+this.options.margin.top+")"),p=i.svg.axis().scale(l).orient(this.options.orientation).tickSize(6,0).tickValues(this._source.tickValues()).tickFormat(function(t){return e._source.tickFormat(t)});h.call(p)}},_collapse:function(){this._expanded&&((this.options.on.collapse||"function"==typeof this.options.on.collapse)&&this.options.on.collapse(),this._expanded=!1,t.DomUtil.addClass(this._container,"leaflet-control-timeline-collapsed"),t.DomUtil.removeClass(this._container,"leaflet-control-timeline-expanded"),this._map.off("click",this._collapse,this))}}),void(t.control.timeline=function(i,e,n){return new t.Control.Timeline(i,e,n)}))});
define("models/article",["jquery","underscore","backbone","mixins/fetchxml","mixins/asyncInit","mixins/xml2html","text!xsl/geojson.xsl","text!xsl/cited-range.xsl"],function(e,t,n,o,s,i,r,l){"use strict";var a=n.Model.extend({initialize:function(){var t=this;t.$def=e.Deferred();var n=t.fetchXML(t.get("path"));e.when(n).done(function(e){t.set("xml",e),t._mkGeojson(),t._mkCitedRange(),null!==t.geojson&&t.set("placeType",t.geojson.properties.layer),t.$def.resolve(t)}).fail(function(){t.$def.reject()})},defaults:{xml:null,placeType:null,iconUrl:"",citedRange:{}},geojson:null,getGeojson:function(){return null===this.geojson&&this._mkGeojson(),this.geojson},_mkGeojson:function(){try{var e=this.xml2html(this.get("xml"),r,{},"text");this.geojson=JSON.parse(e)}catch(t){throw new Error("Failed to parse geojson: "+t.toString())}},_mkCitedRange:function(){try{var e=this.xml2html(this.get("xml"),l,{},"text");this.set("citedRange",JSON.parse(e))}catch(t){throw new Error("Failed to parse cited range json: "+t.toString())}}});return t.extend(a.prototype,o),t.extend(a.prototype,s),t.extend(a.prototype,i),a});
define("models/issue",["jquery","underscore","backbone","models/article","collections/articles","mixins/asyncInit"],function(e,t,n,i,r,o){"use strict";var c=n.Model.extend({initialize:function(n){var o=this;o.$def=e.Deferred();var c=n.config.articles.pathBase;c.match(/\/$/)||(c+="/");var a=n.config.articles.files,s=new r;o.config=n.config,o.set("collection",s);var f=t.map(t.range(a.length),function(){return void 0});t.each(a,function(e,t){f[t]=new i({articleid:t,articledir:c,path:c+e})});var l=t.map(f,function(e){return e.init()});e.when.apply(null,l).done(function(){s.add(f),o.setIcons(),o.$def.resolve(o)}).always(function(){t.forEach(l,function(e){"rejected"===e.state()&&o.$def.reject()}),o.$def.reject()})},setIcons:function(){var e=this,n=e.config.markers.icons,i=t.shuffle(t.flatten(t.map(n,function(e){return t.map(e.files,function(t){return e.dir.concat(t)})}))),r=i.pop(),o=[];e.get("collection").forEach(function(e,t){var n=e.getGeojson()||{properties:{}},c=n.properties.layer;o[c]=o[c]||i.pop()||r,e.set("iconUrl",o[c])})},getArticle:function(e){var t,n=this.get("collection");return"object"==typeof e?t=e:("number"==typeof e||"string"==typeof e)&&(t=n.at(e)),t}});return t.extend(c.prototype,o),c});
define("models/map",["jquery","underscore","backbone","mixins/asyncInit"],function(e,n,i,o){"use strict";var t=i.Model.extend({initialize:function(n){var i=this;i.$def=e.Deferred(),e.getJSON(n.config.map.config,function(e){i.set("mapconfig",e),i.$def.resolve(i)}).fail(function(e,n,o){console.log("Failed to load map config file: "+o),i.$def.reject()})},defaults:{mapconfig:{}}});return n.extend(t.prototype,o),t});
define("mixins/asyncInit",["jquery","underscore"],function(n,e){"use strict";var i={$def:null,init:function(){return this.$def.promise()}};return i});
define("mixins/domwatcher",["jquery"],function(e){"use strict";var t={watchDOM:function(t,o,n){if(!o)throw"Empty selector in watchDOM()";if(0===e(o).length){var d=function(){e(o).length>0&&(e(document.body).off("DOMNodeInserted",d),n.resolve())};e(document.body).on("DOMNodeInserted",d),window.setTimeout(function(){e(document.body).off("DOMNodeInserted",d),n.reject()},t)}else n.resolve()}};return t});
define("mixins/fetchxml",["jquery"],function(e){"use strict";var r={fetchXML:function(r){var t=e.Deferred();return e.ajax({type:"GET",url:r,dataType:"xml",success:function(e){t.resolve(e)},error:function(e,r,n){t.reject()}}),t.promise()}};return r});
define("mixins/xml2html",["jquery","underscore"],function(e,t){"use strict";var r={_doc:function(e){var t;if("string"==typeof e)t=(new DOMParser).parseFromString(e,"text/xml");else{if(!(e instanceof Document))throw new Error("Unrecognized document input in XML2HTML");t=e}if(null==t||!t.hasOwnProperty("getElementsByTagName")&&t.getElementsByTagName("parsererror").length>0)throw new Error("Failed to parse document in xml2html");return t},xml2html:function(e,r,n,o){var i=this._doc(e),m=this._doc(r),a=new XSLTProcessor;a.importStylesheet(m),"object"==typeof n&&t.each(t.keys(n),function(e){a.setParameter(null,e,n[e])});var s;try{var c=a.transformToDocument(i);s=-1!=navigator.userAgent.indexOf("Firefox")?"text"===o?c.documentElement.textContent:c.documentElement:"text"===o?c.documentElement.textContent:s=c.body.innerHTML}catch(u){throw new Error("Error in XSLT transform: "+u.toString())}return s}};return r});
define("views/app",["jquery","underscore","backbone"],function(e,n,i){"use strict";var o=i.View.extend({el:"body",initialize:function(){e(window).resize(function(){document.location.reload()})}});return o});
define("views/article",["jquery","underscore","backbone","views/article/gallery","mixins/xml2html","text!xsl/article.xsl"],function(e,i,t,r,l,o){"use strict";var n=t.View.extend({id:"article",initialize:function(e){var i=this;i.config=e.config},render:function(){var i=this;if(i.$el=e("#"+i.id),0===i.$el.find("#"+i.model.cid).length){var t=this.xml2html(this.model.get("xml"),o,{"article-dir":i.config.articles.pathBase,iconUrl:i.model.get("iconUrl"),cid:i.model.cid});try{e(".article-content").remove(),e("#"+this.id).append(t)}catch(l){console.log("article load error: "+l.toString())}return e("img.slidesjs-slide").length>0?(new r).render():(e("#footer").remove(),e("article").removeClass("before-footer").addClass("no-footer")),i.$el.find(".article-marker").click(function(e,t){i.model.trigger("toggle",i.model)}),i}},remove:function(){}});return i.extend(n.prototype,l),n});
define("views/clear",["jquery","underscore","backbone"],function(e,n,r,t){"use strict";var c=r.View.extend({el:"body",render:function(){e("body").empty()}});return c});
define("views/issue",["jquery","underscore","backbone","text!partials/issue.html","views/article"],function(e,i,t,n,r){"use strict";var s=t.View.extend({el:"#issue",template:i.template(n),initialize:function(e){var i=this;i.config=e.config},render:function(){this.$el.remove(),e("body").append(n)},renderArticle:function(e){new r({model:e,config:this.model.config,issue:this,router:this.model.router}).render()}});return s});
define("views/map",["jquery","underscore","backbone","leaflet","text!partials/map.html","views/marker","mixins/asyncInit","models/error/user","views/error/user"],function(e,i,a,n,r,t,o,m,s){"use strict";var p=a.View.extend({id:"map",tagName:"div",markerViews:[],mapconfig:{},initialize:function(i){var a=this;a.$def=e.Deferred(),a.model=i.model,a.issue=i.issue,e.when.apply({},[a.issue.init(),a.model.init()]).done(function(){a.mapconfig=a.model.get("mapconfig"),e("#"+this.id).length>0||e("#"+this.id).children().length>0||(a._initMap(),a.$def.resolve(a))})},_initMap:function(){var a=this;if(0===e("#"+this.id).length){if(e("body").append(r),a.map=new n.Map(a.mapconfig.id,a.mapconfig.map),a.mapconfig.view)try{a.map.setView(new n.LatLng(a.mapconfig.view.lat,a.mapconfig.view.lng),a.mapconfig.view.zoom)}catch(o){new s({model:new m({message:"Leaflet reports bad data in map.json file. "+o.toString()})})}new n.TileLayer(a.mapconfig.tileLayer.url,a.mapconfig.tileLayer.opts).addTo(a.map),new n.control.scale(a.mapconfig.scale).addTo(a.map),a.markerViews=i.map(a.issue.get("collection").models,function(e){return new t({model:e,map:a.map,mapconfig:a.mapconfig})})}},renewViews:function(){var e=this;e.markerViews=i.map(e.issue.get("collection").models,function(i){return i.markerView||(i.markerView=new t({model:i,map:e.map,mapconfig:e.mapconfig})),i.markerView}),i.forEach(e.markerViews,function(e){e.render()}),e.trigger("markers",e.markerViews)},render:function(){var e=this;e._initMap(),i.forEach(e.markerViews,function(e){e.render()}),e.trigger("markers",e.markerViews)}});return i.extend(p.prototype,o),p});
define("views/marker",["jquery","underscore","backbone","text!partials/marker.html","text!partials/marker-legend.html"],function(e,r,t,i,n){"use strict";var o=t.View.extend({template:r.template(i),el:"",markerLayer:null,map:null,mapconfig:null,initialize:function(e){var r=this;r.map=e.map,r.mapconfig=e.mapconfig,r.initMarkerLayer()},initMarkerLayer:function(){var e=this,r=this.model.getGeojson(),t=e.mapconfig.features.icon;t.iconUrl=this.model.get("iconUrl")||"";var i=L.icon(t);e.markerLayer=L.geoJson(r,{onEachFeature:function(r,t){var i=L.popup(e.mapconfig.features.popup);i.setContent(e.template({articleid:e.model.get("articleid"),geojson:e.model.getGeojson()})),t.bindPopup(i),t.removeEventListener("click"),t.on("click",function(r){e.trigger("click",r)}),t.on("mouseover",function(r){e.trigger("mouseover",r)})},pointToLayer:function(r,t){return L.marker(t,{icon:i,clickable:!!r.properties.text,title:r.properties.markername||"",opacity:e.mapconfig.features.opacity,riseOnHover:e.mapconfig.features.riseOnHover})}})},render:function(){this.markerLayer.addTo(this.map)}});return o});
define("views/menu",["jquery","underscore","backbone","text!partials/menu.html","mixins/domwatcher","views/article/menu"],function(e,t,n,i,r,o){"use strict";var a=n.View.extend({template:t.template(i),id:"menu",tagName:"div",issue:null,config:{},initialize:function(e){this.config=e.config,this.issue=e.issue},render:function(){var n=this;if(0===e("#"+n.id).children().length){var i=this.config.menu,r=[],a={},c={};t.each(i,function(e){if(a[e.partial]="","menu"===e.type){if("collections/articles"!==e.collection)throw new Error("Unhandled collection type requested: "+e.collection);c[e.collection]=n.issue.get("collection")}}),t.each(t.keys(a),function(n){var i=e.Deferred();require(["text!"+n],function(e){a[n]=t.template(e),i.resolve()}),r.push(i.promise())});var l="";e.when.apply(e,r).done(function(){t.forEach(i,function(n,i){var r=n.partial,u={},s="",f=[];"page"===n.type||"sep"===n.type?l+=a[r](n):"menu"===n.type&&(c[n.collection].models.forEach(function(t,i){var r,a=n.item.href.replace(":i",i),c=new o({model:t}),l=c.render({href:"#"+a});if("string"==typeof l)r=e(l);else{if(!(l instanceof Element))throw new Error("Unsupported result type for submenu: "+l.toString());if("BODY"===l.nodeName)r=e(l.innerHTML);else{if("LI"!==l.nodeName)throw new Error("Unsupported document element for submenu: "+l.toString());r=e(l.outerHTML)}}r.attr("data-sort-key")?u[r.attr("data-sort-key")]=r.clone():u[r.find("a").text()]=r.clone()}),f=t.keys(u),f.sort(function(e,t){return e.localeCompare(t)}),t.each(f,function(e){s+=u[e][0].outerHTML}),l+=a[r]({label:n.label,items:s}))})}).then(function(){e("#"+n.id).empty().append(n.template({content:l}));var t=e.Deferred();t.fail(function(){n.render()}),n.watchDOM(500,"#"+n.id,t)}).fail(function(){throw new Error("Failed to build menu.")})}}});return t.extend(a.prototype,r),a});
define("views/page",["jquery","underscore","backbone","mixins/domwatcher","text!partials/page.html"],function(e,t,n,r,i){"use strict";var a=n.View.extend({el:"body",render:function(){var t=this,n=e.Deferred();n.then(function(){e(t.el).append(i)}),this.watchDOM(1e3,t.el,n)}});return t.extend(a.prototype,r),a});
define("views/partial",["jquery","underscore","backbone","mixins/domwatcher","mixins/asyncInit"],function(e,t,n,i,r){"use strict";var a=n.View.extend({el:"",page:"",initialize:function(t){var n=this;n.el=t.el,n.$def=e.Deferred(),require(["text!"+t.page],function(e){n.page=e,n.$def.resolve(n)})},render:function(){var t=this,n=e.Deferred();t.init().then(function(){e(t.el).append(t.page)}),this.watchDOM(1e3,t.el,n)}});return t.extend(a.prototype,i),t.extend(a.prototype,r),a});
define("routes/router",["jquery","underscore","backbone","models/error/user","views/error/user","views/clear","controllers/issue","controllers/map","views/menu"],function(e,r,i,t,n,o,s,a,l){"use strict";var u=i.Router.extend({pages:{},config:{},issueController:null,mapController:null,initialize:function(e){var t=this;this.config=e.config,this.pages=e.config.pages,this.issueController=new s({router:this,config:this.config}),this.issueController.init().done(function(){r.has(t.pages.router,"history")&&t.pages.router.history&&i.history.start()})},navigate:function(e,r){i.history.fragment!==e&&i.history.navigate(e,r)},page:function(e){var i,t=this,n=!1;try{if(e||(e=this.pages.home),i=this.pages.pages[e],void 0===i)throw new Error("Missing config in router/page")}catch(s){return this.page("404")}(new o).render(),r.each(i,function(i){var o,s={config:t.config,issue:t.issueController.model,router:t},l=JSON.parse(JSON.stringify(i));if(r.has(l,"view"))o=l.view;else{if(!r.has(l,"partial")){if(r.has(confg,"full"))return void(window.location.href=l.full.page);throw new Error("Unsupported page type in router: "+e)}o="views/partial",l.partial.page=t.pages.pathBase+l.partial.page,s=r.extend(s,l.partial)}"views/map"===o?(t.mapController=new a(s),n=!0):require([o],function(e){var r=new e(s);r.render()})}),n||(t.mapController=null)},article:function(r){var i=this,t={config:i.config,issue:i.issueController.model,router:i};e("#titlepage").length>0&&e("#titlepage").remove(),e("#page").length>0&&e("#page").remove(),null===i.mapController&&(i.mapController=new a(t)),0===e("#menu").children().length&&new l(t).render(),i.mapController.init().done(function(){var e=i.issueController.model.getArticle(r);e.trigger("active",e)})}});return u});
define("controllers/map/layer",["jquery","underscore","backbone","controllers/prototype","controllers/map/layer/placetype","controllers/map/layer/timeline"],function(e,r,o,n,t,i){"use strict";var a=n.extend({view:null,router:null,map:null,controlsconfig:null,initialize:function(e){var o=this;o.map=e.map,o.view=e.view,o.model=e.model,o.controlsconfig=e.controlsconfig,o.subControllers=[],r.has(o.controlsconfig,"placetype")&&o.controlsconfig.placetype.enable&&o.subControllers.push(new t({views:o.view.markerViews,map:o.view.map,mapconfig:o.model.attributes.mapconfig})),r.has(o.controlsconfig,"timeline")&&o.controlsconfig.timeline.enable&&o.subControllers.push(new i({markerViews:o.view.markerViews,map:o.view.map,siteconfig:o.model.attributes.config})),r.forEach(o.subControllers,function(e){o.listenTo(e,"filter",function(){o._updateMarkers()})})},_updateMarkers:function(){var e=this,o=[],n=[];r.forEach(e.subControllers,function(e){var o=e.getFilterState();n.push(o.hide),n=r.flatten(n)}),r.forEach(e.view.markerViews,function(e){var t=r.find(n,function(r){r===e.markerLayer});t||o.push(e.markerLayer)}),r.forEach(o,function(r){e.view.map.addLayer(r)}),r.forEach(n,function(r){e.view.map.removeLayer(r)})}});return a});
define("controllers/map/pan",["jquery","underscore","backbone","controllers/prototype","mixins/domwatcher"],function(t,e,n,o,i){"use strict";var a=o.extend({map:null,mapconfig:null,initialize:function(t){if(this.map=t.map,this.mapconfig=t.mapconfig,!this.map)throw new Error("Uninitialized map")},_fitMarkerBounds:function(t){var n=this,o=document.getElementById("article");if(o){var i=L.DomUtil.getViewportOffset(o).x,a=L.latLngBounds(e.map(t,function(t){var e=t.model.getGeojson().geometry.coordinates.slice(0);return L.latLng(e.reverse())}));0===i?n.map.fitBounds(a):i!=n.map.getSize().x?n.map.fitBounds(a,{paddingBottomRight:[document.body.clientWidth-i,0]}):n.map.fitBounds(a),n.map.invalidateSize()}},fitMarkerBounds:function(e){var n=this,o=t.Deferred();o.then(function(){n.mapconfig.view||n._fitMarkerBounds(e)}),this.watchDOM(1e3,"#article",o)},handlePopupPosition:function(e){var n,o,i,a,r,p=this,s=p.map,d=t(e.getContent()).attr("id");i=e.getLatLng(),void 0!==i&&(n=L.DomUtil.getViewportOffset(document.getElementById("article")).x,o=t("#"+d).closest(".leaflet-popup-content-wrapper").first(),r=L.point(e.options.autoPanPaddingBottomRight||e.options.autoPanPadding),r=r?r.x:0,a=o.length>0?o.offset().left+o.width()+r:0,0!=n&&a>n&&n!=s.getSize().x?s.panBy([a-n,0]):s.getBounds().contains(e.getLatLng())||(s.closePopup(e),s.openPopup(e)))}});return e.extend(a.prototype,i),a});
define("models/error/user",["backbone"],function(e){"use strict";var s=e.Model.extend({defaults:{msg:""},initialize:function(e){this.set("msg",e.message)}});return s});
define("views/article/gallery",["jquery","underscore","backbone","views/article/gallery/popover","views/article/gallery/lightbox","views/article/gallery/slides"],function(e,i,r,n,l,a){"use strict";var o=r.View.extend({id:"article",initialize:function(){},remove:function(){},render:function(){var i=e("#article article").height()-e("#header").outerHeight(!0);e("#body").css({height:i});var r=[];e("img.slidesjs-slide").each(function(i,n){var l=e.Deferred();e(n).load(function(){e(n).removeClass("remove"),l.resolve()}),e(n).error(function(){window.setTimeout(function(){l.reject()},500)}),r.push(l)}),e.when.apply({},r).always(function(){e("img.slidesjs-slide.remove").remove(),e(".image-loading").removeClass("image-loading"),(new n).render(),(new l).render(),(new a).render()})}});return o});
define("views/article/menu",["jquery","underscore","backbone","mixins/xml2html","text!xsl/article-menu.xsl"],function(e,t,i,n,r){"use strict";var l=i.View.extend({render:function(e){var t=this;if("resolved"!==this.model.init().state())throw"Uninitialized article in ArticleMenuView";var i=t.xml2html(t.model.get("xml"),r,e);return i}});return t.extend(l.prototype,n),l});
define("views/error/user",["jquery","backbone","text!partials/error/user.html"],function(e,t,r){"use strict";var i=t.View.extend({template:_.template(r),el:e("#errorDialog"),initialize:function(){this.render()},render:function(){return this.$el.html(this.template(this.model.attributes)),this.$el.modal({keyboard:!0,show:!0}),this}});return i});
define("controllers/map/layer/placetype",["jquery","underscore","backbone","controllers/prototype","text!partials/marker-legend.html"],function(e,r,t,n,o){"use strict";var l=n.extend({views:null,router:null,map:null,control:null,initialize:function(t){var n=this;n.views=t.views,n.map=t.map,n.mapconfig=t.mapconfig;var l=r.template(o),a=r.groupBy(n.views,function(e){return e.model.getGeojson().properties.layer}),i=n.control=L.control.layers(null,null,n.mapconfig.control.layers.options).addTo(n.map),c=i.getContainer();r.forEach(Object.keys(c),function(e){e.match("mouseover")&&c.removeEventListener("mouseover",c[e]),e.match("mouseout")&&c.removeEventListener("mouseout",c[e])}),L.DomEvent.on(e(".leaflet-control-layers-toggle")[0],"click",i._expand,i),r.each(r.keys(a),function(e){var t=e.replace(/\s+/g,"-"),n=l({iconUrl:a[e][0].model.get("iconUrl"),title:e,klass:t}),o=r.map(a[e],function(e){return e.markerLayer}),c=L.layerGroup(o);i.addOverlay(c,n)}),e("input.leaflet-control-layers-selector").each(function(r,t){e(t).click()}),i.mapLayerController=n,i._onInputClick=n._onInputClick},getFilterState:function(){return{show:this.show||[],hide:this.hide||[]}},_onInputClick:function(){var e,r,t,n=this,o=[],l=[],a=n._form.getElementsByTagName("input"),i=a.length;for(n._handlingClick=!0,e=0;i>e;e++)r=a[e],t=n._layers[r.layerId],t.layer.getLayers().forEach(r.checked?function(e){o.push(e)}:function(e){l.push(e)});n._handlingClick=!1,n._refocusOnMap(),n.mapLayerController.show=o,n.mapLayerController.hide=l,n.mapLayerController.trigger("filter")}});return l});
define("controllers/map/layer/timeline",["jquery","underscore","backbone","controllers/prototype","views/map/layer/timeline","models/map/layer/timeline"],function(e,r,i,n,t,a){"use strict";var l=n.extend({map:null,model:null,view:null,siteconfig:null,markerViews:null,initialize:function(e){var r=this;r.views=e.views,r.map=e.map,r.markerViews=e.markerViews,r.model=new a({siteconfig:e.siteconfig,markerViews:e.markerViews}),r.view=new t({model:r.model,map:r.map,markerViews:e.markerViews}),r.listenTo(r.view,"filter",r._handleFilterEvent),r.view.render()},_handleFilterEvent:function(e){var i=this,n=[],t=[],a={};e.clear?n=r.map(i.markerViews,function(e){return e.markerLayer}):(n=r.map(e.selected,function(e){return a[e.markerView.model.cid]=void 0,e.markerView.markerLayer}),t=r.map(r.filter(i.markerViews,function(e){return!(e.model.cid in a)}),function(e){return e.markerLayer})),i.show=n,i.hide=t,i.trigger("filter")},getFilterState:function(){return{show:this.show||[],hide:this.hide||[]}}});return l});
define("models/map/layer/timeline",["jquery","underscore","backbone","collections/timeline","models/map/layer/timeline/item","mixins/asyncInit"],function(e,t,r,n,i,a){"use strict";var o=r.Model.extend({markerViews:null,start:null,end:null,siteconfig:null,bookconfig:null,initialize:function(t){var r=this;r.markerViews=t.markerViews,r.siteconfig=t.siteconfig,r.$def=e.Deferred(),e.getJSON(r.siteconfig.book.file,function(e){r.bookconfig=e.book,r._initialize(),r.$def.resolve(r)}).fail(function(e,t,n){r.$def.reject()})},_initialize:function(){var e=this,r=new n;e.set("collection",r),t.forEach(e.markerViews,function(n){var a=n.model,o=t.findWhere(e.bookconfig.chapters,{part:a.attributes.citedRange.part,chapter:a.attributes.citedRange.chapter});if(o){var c=o.paragraphs.start+a.attributes.citedRange.paragraph,s=c+1;r.add(new i({start:c,end:s,markerView:n}))}}),e.start=t.min(e.bookconfig.chapters,function(e){return e.paragraphs.start}).paragraphs.start,e.end=t.max(e.bookconfig.chapters,function(e){return e.paragraphs.end}).paragraphs.end},getItems:function(){return this.get("collection").models},tickValues:function(){var e=t.map(this.bookconfig.chapters,function(e){return e.paragraphs.start});return e.sort(function(e,t){return e-t}),e},tickFormat:function(e){var t,r,n=this;for(t=0;t<n.bookconfig.chapters.length;++t)if(r=n.bookconfig.chapters[t],e<=r.paragraphs.end)return e=r.chapter,e===n.bookconfig.chapters.length-1?"":e;return""}});return t.extend(o.prototype,a),o});
define("views/article/gallery/lightbox",["jquery","underscore","backbone","text!partials/lightbox-title.html","lightbox"],function(e,t,i,n){"use strict";var r=i.View.extend({id:"article",initialize:function(){},remove:function(){},render:function(){var i=this;return e(".gallery-item").magnificPopup({type:"image",gallery:{enabled:!0},image:{titleSrc:function(i){var r=i.el.attr("id"),l=e(".popover."+r),a=t.template(n),o=a({title:l.find(".head").text(),attr:l.find(".attr").text()});return o}}}),e(".glyphicon.glyphicon-expand").on("click",function(t){e(".gallery-item").magnificPopup("open")}),i}});return r});
define("views/article/gallery/popover",["jquery","underscore","backbone","text!partials/image-popover.html","text!partials/image-popover-content.html"],function(e,t,i,r,n){"use strict";var o=i.View.extend({id:"article",initialize:function(){},remove:function(){},render:function(){var i=this,o=t.template(n);return e("img.slidesjs-slide").each(function(t,i){var n=i.getAttribute("id"),a=e(".popover."+n),c=a.find(".head").text();e(i).attr("alt",a.find(".desc").text());var l=o({attr:a.find(".attr").text()});e(i).popover({container:"body",html:!0,content:l,title:c,template:r,trigger:"hover",placement:"left"}),e(i).click(function(t){e(i).popover("hide")})}),i}});return o});
define("views/article/gallery/slides",["jquery","underscore","backbone","text!partials/image-popover.html","text!partials/image-popover-content.html","text!partials/lightbox-title.html","slidesjs","lightbox"],function(i,e,t,s,n,l){"use strict";var a=t.View.extend({id:"article",initialize:function(){},remove:function(){},render:function(){var e=this;return i("#slides").slidesjs({navigation:{active:i("img.slidesjs-slide").length>1,effect:"fade"},pagination:{active:i("img.slidesjs-slide").length>1,effect:"fade"},effect:{fade:{speed:100,crossfade:!0}},callback:{loaded:function(e){var t=i(".slidesjs-control").children(":eq("+(e-1)+")");t.css({visibility:"hidden"}),t.css({height:"auto",width:"auto",maxHeight:i(".slidesjs-container").height(),maxWidth:i(".slidesjs-container").width(),position:"relative"}),t.css({left:(i(".slidesjs-container").width()-t.width())/2-parseInt(t.css("padding-left"),10),margin:0}),t.css({visibility:"visible"})},start:function(e){i(".slidesjs-control").children().css({visibility:"hidden"})},complete:function(e){var t=e-1,s=i(".slidesjs-control").children(":eq("+t+")");s.css({height:"auto",width:"auto",maxHeight:i(".slidesjs-container").height(),maxWidth:i(".slidesjs-container").width(),position:"relative"}),s.css({visibility:"visible"})}}}),e}});return a});
define("views/map/layer/timeline",["jquery","underscore","backbone","leaflet","text!partials/timeline.html","controls/L.Control.Timeline"],function(e,i,t,n,l){"use strict";var o=t.View.extend({id:"timeline",map:null,initialize:function(e){var i=this;i.map=e.map},_timelineCollapse:function(){var e=this;e._handleFilter({clear:!0})},_handleFilter:function(e){this.trigger("filter",e)},render:function(){var i,t,l,o,a=this;l=e("#map").height(),o=document.body.clientHeight,Math.abs(o/2-l)<2?(i="bottomright",t=e("#map").height()-100):(i="topleft",t=500),a.model.init().done(function(){a.timeline=n.control.timeline(a.map,a.model,{height:t,position:i,on:{brushend:function(e){a._handleFilter(e)}}}).addTo(a.map)})}});return o});
define("models/map/layer/timeline/item",["jquery","underscore","backbone"],function(e,n,t){"use strict";var r=t.Model.extend({markerView:null,start:null,end:null,initialize:function(e){var n=this;n.markerView=e.markerView,n.start=e.start,n.end=e.end},duration:function(){return this.end-this.start},compareTo:function(e){}});return r});
require.config({paths:{backbone:"//cdnjs.cloudflare.com/ajax/libs/backbone.js/1.1.2/backbone-min",bootstrap:"//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.5/js/bootstrap.min",d3:"//cdnjs.cloudflare.com/ajax/libs/d3/3.5.6/d3.min",jquery:"//code.jquery.com/jquery-2.1.4.min",leaflet:"//cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.3/leaflet",lightbox:"//cdnjs.cloudflare.com/ajax/libs/magnific-popup.js/1.0.0/jquery.magnific-popup.min",slidesjs:"//cdnjs.cloudflare.com/ajax/libs/slidesjs/3.0/jquery.slides.min",text:"//cdnjs.cloudflare.com/ajax/libs/require-text/2.0.12/text.min",underscore:"//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min",partials:"../partials",xsl:"../script/xsl",pages:"../pages"},shim:{bootstrap:{deps:["jquery"]},backbone:{deps:["jquery","underscore"],exports:"Backbone"},underscore:{exports:"_"},text:{deps:[]},slidesjs:{deps:["jquery"]},lightbox:{deps:["jquery"]}}}),require(["jquery","models/error/user","views/error/user","routes/router","views/app","bootstrap"],function(e,s,o,r,a){"use strict";var i=e("#main").attr("data-config");i?e.getJSON(i,function(e){try{new a,new r({routes:e.pages.routes,config:e})}catch(i){e.debug||new o({model:new s({msg:i.toString()})})}}).fail(function(e,r,a){new o({model:new s({msg:"Failed to load site config file '"+i+"' "+a})})}):new o({model:new s({msg:"No configuration filename specified in home page."})})});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbnRyb2xsZXJzL2lzc3VlLmpzIiwiY29udHJvbGxlcnMvbWFwLmpzIiwiY29udHJvbGxlcnMvcHJvdG90eXBlLmpzIiwiY29sbGVjdGlvbnMvYXJ0aWNsZXMuanMiLCJjb2xsZWN0aW9ucy90aW1lbGluZS5qcyIsImNvbnRyb2xzL0wuQ29udHJvbC5UaW1lbGluZS5qcyIsIm1vZGVscy9hcnRpY2xlLmpzIiwibW9kZWxzL2lzc3VlLmpzIiwibW9kZWxzL21hcC5qcyIsIm1peGlucy9hc3luY0luaXQuanMiLCJtaXhpbnMvZG9td2F0Y2hlci5qcyIsIm1peGlucy9mZXRjaHhtbC5qcyIsIm1peGlucy94bWwyaHRtbC5qcyIsInZpZXdzL2FwcC5qcyIsInZpZXdzL2FydGljbGUuanMiLCJ2aWV3cy9jbGVhci5qcyIsInZpZXdzL2lzc3VlLmpzIiwidmlld3MvbWFwLmpzIiwidmlld3MvbWFya2VyLmpzIiwidmlld3MvbWVudS5qcyIsInZpZXdzL3BhZ2UuanMiLCJ2aWV3cy9wYXJ0aWFsLmpzIiwicm91dGVzL3JvdXRlci5qcyIsImNvbnRyb2xsZXJzL21hcC9sYXllci5qcyIsImNvbnRyb2xsZXJzL21hcC9wYW4uanMiLCJtb2RlbHMvZXJyb3IvdXNlci5qcyIsInZpZXdzL2FydGljbGUvZ2FsbGVyeS5qcyIsInZpZXdzL2FydGljbGUvbWVudS5qcyIsInZpZXdzL2Vycm9yL3VzZXIuanMiLCJjb250cm9sbGVycy9tYXAvbGF5ZXIvcGxhY2V0eXBlLmpzIiwiY29udHJvbGxlcnMvbWFwL2xheWVyL3RpbWVsaW5lLmpzIiwibW9kZWxzL21hcC9sYXllci90aW1lbGluZS5qcyIsInZpZXdzL2FydGljbGUvZ2FsbGVyeS9saWdodGJveC5qcyIsInZpZXdzL2FydGljbGUvZ2FsbGVyeS9wb3BvdmVyLmpzIiwidmlld3MvYXJ0aWNsZS9nYWxsZXJ5L3NsaWRlcy5qcyIsInZpZXdzL21hcC9sYXllci90aW1lbGluZS5qcyIsIm1vZGVscy9tYXAvbGF5ZXIvdGltZWxpbmUvaXRlbS5qcyIsIm1haW4uanMiXSwibmFtZXMiOlsiZGVmaW5lIiwiJCIsIl8iLCJCYWNrYm9uZSIsIkNvbnRyb2xsZXIiLCJBc3luY0luaXQiLCJJc3N1ZVZpZXciLCJJc3N1ZU1vZGVsIiwiSXNzdWVDb250cm9sbGVyIiwiZXh0ZW5kIiwibW9kZWwiLCJ2aWV3Iiwicm91dGVyIiwiaW5pdGlhbGl6ZSIsImFyZ3MiLCJ0aGF0IiwidGhpcyIsIiRkZWYiLCJEZWZlcnJlZCIsImNvbmZpZyIsInJlbmRlciIsImluaXQiLCJkb25lIiwiZm9yRWFjaCIsImdldCIsIm1vZGVscyIsImFydGljbGUiLCJsaXN0ZW5UbyIsInVybCIsIm5hdmlnYXRlIiwidHJpZ2dlciIsInJlbmRlckFydGljbGUiLCJyZXNvbHZlIiwiYWx3YXlzIiwicmVqZWN0IiwicHJvdG90eXBlIiwiTWFwTW9kZWwiLCJNYXBWaWV3IiwiTWFwUGFuQ29udHJvbGxlciIsIk1hcExheWVyQ29udHJvbGxlciIsIk1hcFRpbWVsaW5lQ29udHJvbGxlciIsIk1hcENvbnRyb2xsZXIiLCJpc3N1ZSIsIm1hcFBhbkNvbnRyb2xsZXIiLCJtYXBUaW1lbGluZUNvbnRyb2xsZXIiLCJtYXAiLCJtYXBjb25maWciLCJhdHRyaWJ1dGVzIiwibWFwTGF5ZXJDb250cm9sbGVyIiwiY29udHJvbHNjb25maWciLCJjb250cm9scyIsIm1hcmtlclZpZXdzIiwiX3JlZ2lzdGVyTWFya2VycyIsImZpdE1hcmtlckJvdW5kcyIsIndoZW4iLCJhcHBseSIsIm1hcmtlclZpZXciLCJtYXBQb3B1cE9wZW4iLCJtYXJrZXJMYXllciIsIm1hcmtlciIsIl9nZXRNYXJrZXJMYXllciIsImhhbmRsZVBvcHVwUG9zaXRpb24iLCJnZXRQb3B1cCIsIm1hcFBvcHVwVG9nZ2xlIiwiZXZ0IiwiaG92ZXJQb3B1cCIsIm9wZW5wb3B1cCIsInBvcHVwaWQiLCJtYXBNYXJrZXIiLCJnZXRMYXRMbmciLCJvcGVuUG9wdXAiLCJvYmoiLCJtZXRob2QiLCJtYXBNYXJrZXJMYXllciIsImxheWVycyIsIkwiLCJMYXllckdyb3VwIiwiZ2V0TGF5ZXJzIiwicG9wIiwiaGFzIiwidGFyZ2V0IiwidG9nZ2xlUG9wdXAiLCJtYXBQb3B1cENsb3NlIiwiY2xvc2VQb3B1cCIsImNpZCIsInVuaXF1ZUlkIiwiYXJndW1lbnRzIiwiUm91dGVyIiwiRXZlbnRzIiwiRXJyb3IiLCJBcnRpY2xlTW9kZWwiLCJBcnRpY2xlc0NvbGxlY3Rpb24iLCJDb2xsZWN0aW9uIiwiVGltZWxpbmVJdGVtTW9kZWwiLCJUaW1lbGluZUNvbGxlY3Rpb24iLCJkMyIsIkNvbnRyb2wiLCJUaW1lbGluZSIsIm9wdGlvbnMiLCJvcmllbnRhdGlvbiIsImhlaWdodCIsIndpZHRoIiwibWFyZ2luIiwibGVmdCIsInJpZ2h0IiwidG9wIiwiYm90dG9tIiwiY29sbGFwc2VkIiwiaXRlbSIsIm1pbkhlaWdodCIsIm9uIiwidGl0bGUiLCJwb3NpdGlvbiIsInNvdXJjZSIsIlV0aWwiLCJzZXRPcHRpb25zIiwiX21hcCIsIl9zb3VyY2UiLCJjb250YWluZXIiLCJfY29udGFpbmVyIiwiRG9tVXRpbCIsImNyZWF0ZSIsImFkZENsYXNzIiwidG9nZ2xlIiwiX3RvZ2dsZSIsImxpbmsiLCJleHBhbmQiLCJfZXhwYW5kIiwiQnJvd3NlciIsInRvdWNoIiwiRG9tRXZlbnQiLCJzdG9wIiwic3RvcFByb3BhZ2F0aW9uIiwiZGlzYWJsZUNsaWNrUHJvcGFnYXRpb24iLCJvblJlbW92ZSIsIm9uQWRkIiwiX2V4cGFuZGVkIiwiX2NvbGxhcHNlIiwicmVtb3ZlQ2xhc3MiLCJfdGltZWxpbmUiLCJpbm5lckhlaWdodCIsImlubmVyV2lkdGgiLCJ5U2NhbGUiLCJfeFNjYWxlIiwic2NhbGUiLCJsaW5lYXIiLCJyYW5nZSIsIl95U2NhbGUiLCJkb21haW4iLCJzdGFydCIsImVuZCIsInRpbWVsaW5lIiwic2VsZWN0IiwiYXBwZW5kIiwiYXR0ciIsImJhbmQiLCJicnVzaCIsInNlbGVjdEFsbCIsImRhdGEiLCJnZXRJdGVtcyIsImVudGVyIiwiZCIsIm1heCIsImR1cmF0aW9uIiwiX2JydXNoIiwic3ZnIiwieSIsImV4dFN0YXJ0IiwiZXh0ZW50IiwiZXh0RW5kIiwicmVzdWx0cyIsImNsZWFyIiwic2VsZWN0ZWQiLCJlYWNoIiwiaSIsInB1c2giLCJicnVzaGVuZCIsInlCcnVzaCIsImNhbGwiLCJ5QXhpcyIsImF4aXMiLCJvcmllbnQiLCJ0aWNrU2l6ZSIsInRpY2tWYWx1ZXMiLCJ0aWNrRm9ybWF0IiwiY29sbGFwc2UiLCJvZmYiLCJjb250cm9sIiwiRmV0Y2hYTUwiLCJYTUwySFRNTCIsImdlb0pzb25Yc2wiLCJjaXRlZFJhbmdlWHNsIiwiTW9kZWwiLCIkZ2V0IiwiZmV0Y2hYTUwiLCJzZXQiLCJfbWtHZW9qc29uIiwiX21rQ2l0ZWRSYW5nZSIsImdlb2pzb24iLCJwcm9wZXJ0aWVzIiwibGF5ZXIiLCJmYWlsIiwiZGVmYXVsdHMiLCJ4bWwiLCJwbGFjZVR5cGUiLCJpY29uVXJsIiwiY2l0ZWRSYW5nZSIsImdldEdlb2pzb24iLCJqc29uU3RyaW5nIiwieG1sMmh0bWwiLCJKU09OIiwicGFyc2UiLCJlIiwidG9TdHJpbmciLCJBcnRpY2xlQ29sbGVjdGlvbiIsImFydGRpciIsImFydGljbGVzIiwicGF0aEJhc2UiLCJtYXRjaCIsImZpbGVzIiwiY29sIiwibGVuZ3RoIiwidW5kZWZpbmVkIiwiZmlsZSIsImFydGljbGVpZCIsImFydGljbGVkaXIiLCJwYXRoIiwiaW5pdHMiLCJhZGQiLCJzZXRJY29ucyIsIiRwcm9taXNlIiwic3RhdGUiLCJpY2NvbmZpZyIsIm1hcmtlcnMiLCJpY29ucyIsImljb25GaWxlcyIsInNodWZmbGUiLCJmbGF0dGVuIiwiZW50cnkiLCJkaXIiLCJjb25jYXQiLCJkZWZhdWx0SWNvbkZpbGUiLCJnZXRBcnRpY2xlIiwiYXJ0IiwiYXQiLCJnZXRKU09OIiwianF4aHIiLCJ0ZXh0U3RhdHVzIiwiZXJyb3IiLCJjb25zb2xlIiwibG9nIiwicHJvbWlzZSIsIkRPTVdhdGNoZXIiLCJ3YXRjaERPTSIsIm1zIiwic2VsIiwiZiIsImRvY3VtZW50IiwiYm9keSIsIndpbmRvdyIsInNldFRpbWVvdXQiLCJhamF4IiwidHlwZSIsImRhdGFUeXBlIiwic3VjY2VzcyIsImpxWEhSIiwiZXJyb3JUaHJvd24iLCJfZG9jIiwieG1sRG9jIiwiRE9NUGFyc2VyIiwicGFyc2VGcm9tU3RyaW5nIiwiRG9jdW1lbnQiLCJoYXNPd25Qcm9wZXJ0eSIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwieHNsIiwicGFyYW1zIiwibW9kZSIsInhzbERvYyIsInhzbHRQcm9jZXNzb3IiLCJYU0xUUHJvY2Vzc29yIiwiaW1wb3J0U3R5bGVzaGVldCIsImtleXMiLCJrZXkiLCJzZXRQYXJhbWV0ZXIiLCJyZXN1bHQiLCJkb2MiLCJ0cmFuc2Zvcm1Ub0RvY3VtZW50IiwibmF2aWdhdG9yIiwidXNlckFnZW50IiwiaW5kZXhPZiIsImRvY3VtZW50RWxlbWVudCIsInRleHRDb250ZW50IiwiaW5uZXJIVE1MIiwiQXBwVmlldyIsIlZpZXciLCJlbCIsInJlc2l6ZSIsImxvY2F0aW9uIiwicmVsb2FkIiwiR2FsbGVyeVZpZXciLCJBcnRpY2xlVmlldyIsImlkIiwiJGVsIiwiZmluZCIsImh0bWwiLCJhcnRpY2xlLWRpciIsInJlbW92ZSIsImNsaWNrIiwiZWx0IiwidG1wbCIsIkNsZWFyVmlldyIsImVtcHR5IiwidGVtcGxhdGUiLCJtYXBQYXJ0aWFsIiwiTWFya2VyVmlldyIsIlVzZXJFcnJvck1vZGVsIiwiVXNlckVycm9yVmlldyIsInRhZ05hbWUiLCJjaGlsZHJlbiIsIl9pbml0TWFwIiwiTWFwIiwic2V0VmlldyIsIkxhdExuZyIsImxhdCIsImxuZyIsInpvb20iLCJtZXNzYWdlIiwiVGlsZUxheWVyIiwidGlsZUxheWVyIiwib3B0cyIsImFkZFRvIiwicmVuZXdWaWV3cyIsIm12IiwibGVnZW5kUGFydGlhbCIsImluaXRNYXJrZXJMYXllciIsImljb25Db25maWciLCJmZWF0dXJlcyIsImljb24iLCJnZW9Kc29uIiwib25FYWNoRmVhdHVyZSIsImZlYXR1cmUiLCJwb3B1cCIsInNldENvbnRlbnQiLCJiaW5kUG9wdXAiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwicG9pbnRUb0xheWVyIiwibGF0bG5nIiwiY2xpY2thYmxlIiwidGV4dCIsIm1hcmtlcm5hbWUiLCJvcGFjaXR5IiwicmlzZU9uSG92ZXIiLCJtZW51VG1wbCIsIkFydGljbGVNZW51VmlldyIsIk1lbnVWaWV3IiwiaXRlbXMiLCJtZW51IiwicHJvbWlzZXMiLCJ0ZW1wbGF0ZXMiLCJjb2xsZWN0aW9ucyIsInBhcnRpYWwiLCJjb2xsZWN0aW9uIiwicmVxdWlyZSIsInRlbXBsIiwiY29udGVudCIsInNvcnRlciIsInN1YkNvbnRlbnQiLCJzb3J0S2V5cyIsImoiLCIkbGkiLCJocmVmIiwicmVwbGFjZSIsImFtdiIsIkVsZW1lbnQiLCJub2RlTmFtZSIsIm91dGVySFRNTCIsImNsb25lIiwic29ydCIsImEiLCJiIiwibG9jYWxlQ29tcGFyZSIsImxhYmVsIiwidGhlbiIsIiRmYWlsRGVmIiwicGFnZSIsIlBhZ2VWaWV3IiwiUGFydGlhbFZpZXciLCIkd2F0Y2hEZWYiLCJwYWdlcyIsImlzc3VlQ29udHJvbGxlciIsIm1hcENvbnRyb2xsZXIiLCJoaXN0b3J5IiwiZnJhZ21lbnQiLCJwYWdlQ29uZmlnIiwibWFwUGFnZSIsImhvbWUiLCJwYyIsInZpZXdOYW1lIiwic3RyaW5naWZ5IiwiY29uZmciLCJmdWxsIiwidiIsIlBsYWNlVHlwZUNvbnRyb2xsZXIiLCJUaW1lbGluZUNvbnRyb2xsZXIiLCJzdWJDb250cm9sbGVycyIsInBsYWNldHlwZSIsImVuYWJsZSIsInZpZXdzIiwic2l0ZWNvbmZpZyIsInN1YkNvbnRyb2xsZXIiLCJfdXBkYXRlTWFya2VycyIsInNob3ciLCJoaWRlIiwicmVzIiwiZ2V0RmlsdGVyU3RhdGUiLCJmb3VuZCIsImhpZGRlbkxheWVyIiwiYWRkTGF5ZXIiLCJyZW1vdmVMYXllciIsIl9maXRNYXJrZXJCb3VuZHMiLCJnZXRFbGVtZW50QnlJZCIsImVkZ2VQdFgiLCJnZXRWaWV3cG9ydE9mZnNldCIsIngiLCJib3VuZHMiLCJsYXRMbmdCb3VuZHMiLCJsbmdMYXQiLCJnZW9tZXRyeSIsImNvb3JkaW5hdGVzIiwic2xpY2UiLCJsYXRMbmciLCJyZXZlcnNlIiwiZml0Qm91bmRzIiwiZ2V0U2l6ZSIsInBhZGRpbmdCb3R0b21SaWdodCIsImNsaWVudFdpZHRoIiwiaW52YWxpZGF0ZVNpemUiLCIkcG9wdXBXcmFwIiwicG9wdXBMYXRMbmciLCJwb3B1cFJpZ2h0WCIsInBhZCIsImdldENvbnRlbnQiLCJjbG9zZXN0IiwiZmlyc3QiLCJwb2ludCIsImF1dG9QYW5QYWRkaW5nQm90dG9tUmlnaHQiLCJhdXRvUGFuUGFkZGluZyIsIm9mZnNldCIsInBhbkJ5IiwiZ2V0Qm91bmRzIiwiY29udGFpbnMiLCJtc2ciLCJBcnRpY2xlR2FsbGVyeVBvcG92ZXJWaWV3IiwiQXJ0aWNsZUdhbGxlcnlMaWdodGJveFZpZXciLCJBcnRpY2xlR2FsbGVyeVNsaWRlc1ZpZXciLCJBcnRpY2xlR2FsbGVyeVZpZXciLCJvdXRlckhlaWdodCIsImNzcyIsImRlZnMiLCJpbWciLCJsb2FkIiwiYW1Yc2wiLCJtZW51aXRlbSIsIm1vZGFsIiwia2V5Ym9hcmQiLCJQbGFjZXR5cGVDb250cm9sbGVyIiwibGVnZW5kVGVtcGwiLCJsYXllck1hcmtlcnMiLCJncm91cEJ5IiwiZ2V0Q29udGFpbmVyIiwiT2JqZWN0IiwibGF5ZXJOYW1lIiwia2xhc3MiLCJsYXllckxlZ2VuZCIsIm1hcmtlckxheWVycyIsImxheWVyR3JvdXAiLCJhZGRPdmVybGF5IiwiX29uSW5wdXRDbGljayIsImlucHV0IiwiaW5wdXRzIiwiX2Zvcm0iLCJpbnB1dHNMZW4iLCJfaGFuZGxpbmdDbGljayIsIl9sYXllcnMiLCJsYXllcklkIiwiY2hlY2tlZCIsIl9yZWZvY3VzT25NYXAiLCJUaW1lbGluZVZpZXciLCJUaW1lbGluZU1vZGVsIiwiX2hhbmRsZUZpbHRlckV2ZW50Iiwic2hvd0xheWVycyIsImhpZGVMYXllcnMiLCJzaG93SWRzIiwiZmlsdGVyIiwiVGltZWxpbmVJdGVtIiwiYm9va2NvbmZpZyIsImJvb2siLCJfaW5pdGlhbGl6ZSIsImJvb2tDaGFwdGVyIiwiZmluZFdoZXJlIiwiY2hhcHRlcnMiLCJwYXJ0IiwiY2hhcHRlciIsInBhcmFncmFwaHMiLCJwYXJhZ3JhcGgiLCJtaW4iLCJ2YWx1ZXMiLCJwIiwibGlnaHRib3hUaXRsZVRlbXBsIiwibWFnbmlmaWNQb3B1cCIsImdhbGxlcnkiLCJlbmFibGVkIiwiaW1hZ2UiLCJ0aXRsZVNyYyIsIiRpdGVtIiwiJHBvIiwicGN0IiwicG9wb3ZlclRlbXBsIiwicG9wb3ZlckNvbnRlbnRUZW1wbCIsImdldEF0dHJpYnV0ZSIsInBvcG92ZXIiLCJwbGFjZW1lbnQiLCJzbGlkZXNqcyIsIm5hdmlnYXRpb24iLCJhY3RpdmUiLCJlZmZlY3QiLCJwYWdpbmF0aW9uIiwiZmFkZSIsInNwZWVkIiwiY3Jvc3NmYWRlIiwiY2FsbGJhY2siLCJsb2FkZWQiLCJudW1iZXIiLCIkaW1nIiwidmlzaWJpbGl0eSIsIm1heEhlaWdodCIsIm1heFdpZHRoIiwicGFyc2VJbnQiLCJjb21wbGV0ZSIsIm5ld0ltZyIsInRpbWVsaW5lQ29udHJvbFBhcnRpYWwiLCJfdGltZWxpbmVDb2xsYXBzZSIsIl9oYW5kbGVGaWx0ZXIiLCJjb250cm9saGVpZ2h0IiwibWFwaGVpZ2h0IiwiZG9jdW1lbnRoZWlnaHQiLCJjbGllbnRIZWlnaHQiLCJNYXRoIiwiYWJzIiwiY29tcGFyZVRvIiwicGF0aHMiLCJiYWNrYm9uZSIsImJvb3RzdHJhcCIsImpxdWVyeSIsImxlYWZsZXQiLCJsaWdodGJveCIsInVuZGVyc2NvcmUiLCJwYXJ0aWFscyIsInNoaW0iLCJkZXBzIiwiZXhwb3J0cyIsImNvbmZpZ2ZpbGUiLCJyb3V0ZXMiLCJkZWJ1ZyJdLCJtYXBwaW5ncyI6IkFBQ0FBLE9BQU8scUJBQ0QsU0FDQSxhQUNBLFdBQ0Esd0JBQ0EsbUJBQ0EsY0FDQSxnQkFDSCxTQUFTQyxFQUFFQyxFQUFFQyxFQUFTQyxFQUFXQyxF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USxHQUFhaGpCLEVBQUUsU0FBU3lKLEtBQUssY0FDN0J1WixHQUNBaGpCLEVBQUVvUCxRQUFRNFQsRUFBWSxTQUFTekosR0FDM0IsSUFDSSxHQUFJbkgsR0FDSixHQUFJOU0sSUFDRTJkLE9BQVExSixFQUFXcEIsTUFBTThLLE9BQ3pCL2hCLE9BQVFxWSxJQUVoQixNQUFPcE0sR0FDQW9NLEVBQVcySixPQUNaLEdBQUl2UCxJQUNBbFQsTUFBTyxHQUFJaVQsSUFDUHdJLElBQUsvTyxFQUFFQyxrQkFLeEJaLEtBQUssU0FBUzZDLEVBQU9DLEVBQVlDLEdBQ2hDLEdBQUlvRSxJQUNBbFQsTUFBTyxHQUFJaVQsSUFDUHdJLElBQUssb0NBQXNDOEcsRUFBYSxLQUFPelQsUUFLM0UsR0FBSW9FLElBQ0FsVCxNQUFPLEdBQUlpVCxJQUNQd0ksSUFBSyIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLypnbG9iYWwgZGVmaW5lKi9cbmRlZmluZSgnY29udHJvbGxlcnMvaXNzdWUnLCBbXG4gICAgICAnanF1ZXJ5J1xuICAgICwgJ3VuZGVyc2NvcmUnXG4gICAgLCAnYmFja2JvbmUnXG4gICAgLCAnY29udHJvbGxlcnMvcHJvdG90eXBlJ1xuICAgICwgJ21peGlucy9hc3luY0luaXQnXG4gICAgLCAndmlld3MvaXNzdWUnXG4gICAgLCAnbW9kZWxzL2lzc3VlJ1xuXSwgZnVuY3Rpb24oJCxfLEJhY2tib25lLENvbnRyb2xsZXIsQXN5bmNJbml0LElzc3VlVmlldyxJc3N1ZU1vZGVsKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBJc3N1ZUNvbnRyb2xsZXIgPSBDb250cm9sbGVyLmV4dGVuZCh7XG4gICAgICAgICAgbW9kZWw6IG51bGxcbiAgICAgICAgLCB2aWV3IDogbnVsbFxuICAgICAgICAsIHJvdXRlcjogbnVsbFxuICAgICAgICAsIGluaXRpYWxpemU6IGZ1bmN0aW9uKGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIHRoYXQuJGRlZiA9ICQuRGVmZXJyZWQoKTtcbiAgICAgICAgICAgIHRoYXQucm91dGVyID0gYXJncy5yb3V0ZXI7XG4gICAgICAgICAgICB0aGF0Lm1vZGVsID0gbmV3IElzc3VlTW9kZWwoeyBjb25maWc6IGFyZ3MuY29uZmlnIH0pO1xuICAgICAgICAgICAgdGhhdC52aWV3ID0gbmV3IElzc3VlVmlldyh7XG4gICAgICAgICAgICAgICAgICBtb2RlbDogdGhhdC5tb2RlbFxuICAgICAgICAgICAgICAgICwgY29uZmlnOiBhcmdzLmNvbmZpZ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGF0LnZpZXcucmVuZGVyKCk7XG4gICAgICAgICAgICB0aGF0Lm1vZGVsLmluaXQoKS5kb25lKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIF8uZm9yRWFjaCh0aGF0Lm1vZGVsLmdldCgnY29sbGVjdGlvbicpLm1vZGVscywgZnVuY3Rpb24oYXJ0aWNsZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGF0Lmxpc3RlblRvKGFydGljbGUsICdhY3RpdmUnLCBmdW5jdGlvbihhcnRpY2xlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdXJsID0gJ2FydGljbGUvJyArIGFydGljbGUuZ2V0KCdhcnRpY2xlaWQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQucm91dGVyLm5hdmlnYXRlKHVybCwge3RyaWdnZXI6IHRydWV9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQudmlldy5yZW5kZXJBcnRpY2xlKGFydGljbGUpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGF0LiRkZWYucmVzb2x2ZSh0aGF0KTtcbiAgICAgICAgICAgIH0pLmFsd2F5cyhmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB0aGF0LiRkZWYucmVqZWN0KCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIF8uZXh0ZW5kKElzc3VlQ29udHJvbGxlci5wcm90b3R5cGUsQXN5bmNJbml0KTtcbiAgICByZXR1cm4gSXNzdWVDb250cm9sbGVyO1xufSk7XG4iLCIvKmdsb2JhbCBkZWZpbmUqL1xuZGVmaW5lKCdjb250cm9sbGVycy9tYXAnLCBbXG4gICAgICAnanF1ZXJ5J1xuICAgICwgJ3VuZGVyc2NvcmUnXG4gICAgLCAnYmFja2JvbmUnXG4gICAgLCAnY29udHJvbGxlcnMvcHJvdG90eXBlJ1xuICAgICwgJ21vZGVscy9tYXAnXG4gICAgLCAndmlld3MvbWFwJ1xuICAgICwgJ21peGlucy9hc3luY0luaXQnXG4gICAgLCAnY29udHJvbGxlcnMvbWFwL3BhbidcbiAgICAsICdjb250cm9sbGVycy9tYXAvbGF5ZXInXG5dLCBmdW5jdGlvbigkLF8sQmFja2JvbmUsQ29udHJvbGxlcixNYXBNb2RlbCxNYXBWaWV3LEFzeW5jSW5pdCxNYXBQYW5Db250cm9sbGVyLE1hcExheWVyQ29udHJvbGxlcixNYXBUaW1lbGluZUNvbnRyb2xsZXIpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIE1hcENvbnRyb2xsZXIgPSBDb250cm9sbGVyLmV4dGVuZCh7XG4gICAgICAgICAgbW9kZWw6IG51bGxcbiAgICAgICAgLCB2aWV3OiAgbnVsbFxuICAgICAgICAsIGlzc3VlOiBudWxsXG4gICAgICAgICwgY29uZmlnOiBudWxsXG4gICAgICAgICwgbWFwUGFuQ29udHJvbGxlciA6IG51bGxcbiAgICAgICAgLCBNYXBMYXllckNvbnRyb2xsZXIgOiBudWxsXG4gICAgICAgICwgbWFwVGltZWxpbmVDb250cm9sbGVyIDogbnVsbFxuICAgICAgICAsIGluaXRpYWxpemU6IGZ1bmN0aW9uKGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIHRoYXQuJGRlZiA9ICQuRGVmZXJyZWQoKTtcbiAgICAgICAgICAgIHRoYXQuY29uZmlnID0gYXJncy5jb25maWc7XG4gICAgICAgICAgICB0aGF0LnJvdXRlciA9IGFyZ3Mucm91dGVyO1xuICAgICAgICAgICAgdGhhdC5pc3N1ZSA9IGFyZ3MuaXNzdWU7XG4gICAgICAgICAgICB0aGF0Lm1vZGVsID0gbmV3IE1hcE1vZGVsKGFyZ3MpO1xuICAgICAgICAgICAgdGhhdC52aWV3ID0gbmV3IE1hcFZpZXcoe1xuICAgICAgICAgICAgICAgICAgbW9kZWw6ICB0aGF0Lm1vZGVsXG4gICAgICAgICAgICAgICAgLCByb3V0ZXI6IHRoYXQucm91dGVyXG4gICAgICAgICAgICAgICAgLCBpc3N1ZTogdGhhdC5pc3N1ZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGF0LnZpZXcuaW5pdCgpLmRvbmUoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdGhhdC5tYXBQYW5Db250cm9sbGVyID0gbmV3IE1hcFBhbkNvbnRyb2xsZXIoe1xuICAgICAgICAgICAgICAgICAgICAgIG1hcDogdGhhdC52aWV3Lm1hcFxuICAgICAgICAgICAgICAgICAgICAsIG1hcGNvbmZpZzogdGhhdC5tb2RlbC5hdHRyaWJ1dGVzLm1hcGNvbmZpZ1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoYXQubWFwTGF5ZXJDb250cm9sbGVyID0gbmV3IE1hcExheWVyQ29udHJvbGxlcih7XG4gICAgICAgICAgICAgICAgICAgICAgdmlldyAgOiB0aGF0LnZpZXdcbiAgICAgICAgICAgICAgICAgICAgLCBtYXAgICA6IHRoYXQudmlldy5tYXBcbiAgICAgICAgICAgICAgICAgICAgLCBtb2RlbCA6IHRoYXQubW9kZWxcbiAgICAgICAgICAgICAgICAgICAgLCBtYXBjb25maWc6IHRoYXQubW9kZWwuYXR0cmlidXRlcy5tYXBjb25maWdcbiAgICAgICAgICAgICAgICAgICAgLCBjb250cm9sc2NvbmZpZzogdGhhdC5jb25maWcuY29udHJvbHNcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGF0Lmxpc3RlblRvKHRoYXQudmlldywgJ21hcmtlcnMnLCBmdW5jdGlvbihtYXJrZXJWaWV3cyl7XG4gICAgICAgICAgICAgICAgICAgIHRoYXQuX3JlZ2lzdGVyTWFya2VycyhtYXJrZXJWaWV3cyk7XG4gICAgICAgICAgICAgICAgICAgIHRoYXQubWFwUGFuQ29udHJvbGxlci5maXRNYXJrZXJCb3VuZHModGhhdC52aWV3Lm1hcmtlclZpZXdzKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGF0LnZpZXcucmVuZGVyKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICQud2hlbi5hcHBseShudWxsLFt0aGF0Lm1vZGVsLmluaXQoKSwgdGhhdC52aWV3LmluaXQoKV0pLmRvbmUoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdGhhdC4kZGVmLnJlc29sdmUodGhhdCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICAsIF9yZWdpc3Rlck1hcmtlcnMgOiBmdW5jdGlvbihtYXJrZXJWaWV3cykge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgXy5mb3JFYWNoKG1hcmtlclZpZXdzLCBmdW5jdGlvbihtYXJrZXJWaWV3KSB7XG4gICAgICAgICAgICAgICAgdGhhdC5saXN0ZW5UbyhtYXJrZXJWaWV3Lm1vZGVsLCAnYWN0aXZlJywgZnVuY3Rpb24oYXJ0aWNsZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGF0Lm1hcFBvcHVwT3BlbihtYXJrZXJWaWV3Lm1hcmtlckxheWVyKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1hcmtlciA9IHRoYXQuX2dldE1hcmtlckxheWVyKG1hcmtlclZpZXcubWFya2VyTGF5ZXIsICdnZXRQb3B1cCcpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWFya2VyICE9PSBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5tYXBQYW5Db250cm9sbGVyLmhhbmRsZVBvcHVwUG9zaXRpb24obWFya2VyLmdldFBvcHVwKCkpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoYXQubGlzdGVuVG8obWFya2VyVmlldy5tb2RlbCwgJ3RvZ2dsZScsIGZ1bmN0aW9uKGFydGljbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5tYXBQb3B1cFRvZ2dsZShtYXJrZXJWaWV3Lm1hcmtlckxheWVyKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1hcmtlciA9IHRoYXQuX2dldE1hcmtlckxheWVyKG1hcmtlclZpZXcubWFya2VyTGF5ZXIsICdnZXRQb3B1cCcpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWFya2VyICE9PSBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5tYXBQYW5Db250cm9sbGVyLmhhbmRsZVBvcHVwUG9zaXRpb24obWFya2VyLmdldFBvcHVwKCkpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoYXQubGlzdGVuVG8obWFya2VyVmlldywgJ2NsaWNrJywgZnVuY3Rpb24oZXZ0KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoYXQubWFwUG9wdXBPcGVuKGV2dCk7XG4gICAgICAgICAgICAgICAgICAgIG1hcmtlclZpZXcubW9kZWwudHJpZ2dlcignYWN0aXZlJywgbWFya2VyVmlldy5tb2RlbCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhhdC5saXN0ZW5UbyhtYXJrZXJWaWV3LCdtb3VzZW92ZXInLCBmdW5jdGlvbihldnQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGF0LnZpZXcubWFwLmhvdmVyUG9wdXApIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wZW5wb3B1cFtwb3B1cGlkKG1hcE1hcmtlci5nZXRMYXRMbmcoKSldKSByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIG1hcE1hcmtlci5vcGVuUG9wdXAoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgICwgX2dldE1hcmtlckxheWVyIDogZnVuY3Rpb24ob2JqLG1ldGhvZCkge1xuICAgICAgICAgICAgdmFyIG1hcE1hcmtlckxheWVyLCBsYXllcnM7XG4gICAgICAgICAgICBpZiAob2JqIGluc3RhbmNlb2YgTC5MYXllckdyb3VwKSB7XG4gICAgICAgICAgICAgICAgaWYgKG1ldGhvZCBpbiBvYmopIHtcbiAgICAgICAgICAgICAgICAgICAgbWFwTWFya2VyTGF5ZXIgPSBvYmo7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbGF5ZXJzID0gb2JqLmdldExheWVycygpO1xuICAgICAgICAgICAgICAgICAgICB3aGlsZSAob2JqID0gbGF5ZXJzLnBvcCgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobWV0aG9kIGluIG9iaikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcE1hcmtlckxheWVyID0gb2JqO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmIChfLmhhcyhvYmosICdvcmlnaW5hbEV2ZW50JykpIHtcbiAgICAgICAgICAgICAgICBtYXBNYXJrZXJMYXllciA9IG9iai50YXJnZXQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbWFwTWFya2VyTGF5ZXI7XG4gICAgICAgIH1cbiAgICAgICAgLCBtYXBQb3B1cE9wZW46IGZ1bmN0aW9uKG9iaikge1xuICAgICAgICAgICAgdmFyIG1hcE1hcmtlckxheWVyID0gdGhpcy5fZ2V0TWFya2VyTGF5ZXIob2JqLCAnb3BlblBvcHVwJyk7XG4gICAgICAgICAgICBpZiAoIW1hcE1hcmtlckxheWVyKSByZXR1cm47XG4gICAgICAgICAgICBtYXBNYXJrZXJMYXllci5vcGVuUG9wdXAoKTtcbiAgICAgICAgfVxuICAgICAgICAsIG1hcFBvcHVwVG9nZ2xlOiBmdW5jdGlvbihvYmopIHtcbiAgICAgICAgICAgIHZhciBtYXBNYXJrZXJMYXllciA9IHRoaXMuX2dldE1hcmtlckxheWVyKG9iaiwgJ3RvZ2dsZVBvcHVwJyk7XG4gICAgICAgICAgICBpZiAoIW1hcE1hcmtlckxheWVyKSByZXR1cm47XG4gICAgICAgICAgICBtYXBNYXJrZXJMYXllci50b2dnbGVQb3B1cCgpO1xuICAgICAgICB9XG4gICAgICAgICwgbWFwUG9wdXBDbG9zZTogZnVuY3Rpb24ob2JqKSB7XG4gICAgICAgICAgICB2YXIgbWFwTWFya2VyTGF5ZXIgPSB0aGlzLl9nZXRNYXJrZXJMYXllcihvYmosICdjbG9zZVBvcHVwJyk7XG4gICAgICAgICAgICBpZiAoIW1hcE1hcmtlckxheWVyKSByZXR1cm47XG4gICAgICAgICAgICBtYXBNYXJrZXJMYXllci5jbG9zZVBvcHVwKCk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBfLmV4dGVuZChNYXBDb250cm9sbGVyLnByb3RvdHlwZSxBc3luY0luaXQpO1xuICAgIHJldHVybiBNYXBDb250cm9sbGVyO1xufSk7XG4iLCIvKmdsb2JhbCBkZWZpbmUqL1xuZGVmaW5lKCdjb250cm9sbGVycy9wcm90b3R5cGUnLCBbXG4gICAgICAndW5kZXJzY29yZSdcbiAgICAsICdiYWNrYm9uZSdcbl0sIGZ1bmN0aW9uKF8sQmFja2JvbmUpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIENvbnRyb2xsZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdGhpcy5jaWQgPSBfLnVuaXF1ZUlkKCdjb250cm9sbGVyJyk7XG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH07XG4gICAgQ29udHJvbGxlci5leHRlbmQgPSBCYWNrYm9uZS5Sb3V0ZXIuZXh0ZW5kO1xuICAgIF8uZXh0ZW5kKENvbnRyb2xsZXIucHJvdG90eXBlLCBCYWNrYm9uZS5FdmVudHMpO1xuICAgIF8uZXh0ZW5kKENvbnRyb2xsZXIucHJvdG90eXBlLCB7IFxuICAgICAgICBpbml0aWFsaXplOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigndW5pbXBsZW1lbnRlZCBpbml0aWFsaXplKCknKTtcbiAgICAgICAgfSBcbiAgICB9KTtcbiAgICByZXR1cm4gQ29udHJvbGxlcjtcbn0pOyIsIi8qZ2xvYmFsIGRlZmluZSAqL1xuZGVmaW5lKCdjb2xsZWN0aW9ucy9hcnRpY2xlcycsIFtcbiAgICAnanF1ZXJ5JywgXG4gICAgJ3VuZGVyc2NvcmUnLCBcbiAgICAnYmFja2JvbmUnLFxuICAgICdtb2RlbHMvYXJ0aWNsZSdcbl0sIGZ1bmN0aW9uKCQsXyxCYWNrYm9uZSxBcnRpY2xlTW9kZWwpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIEFydGljbGVzQ29sbGVjdGlvbiA9IEJhY2tib25lLkNvbGxlY3Rpb24uZXh0ZW5kKHtcbiAgICAgICAgbW9kZWw6IEFydGljbGVNb2RlbFxuICAgIH0pOyAgICBcbiAgICByZXR1cm4gQXJ0aWNsZXNDb2xsZWN0aW9uO1xufSk7XG4iLCIvKmdsb2JhbCBkZWZpbmUgKi9cbmRlZmluZSgnY29sbGVjdGlvbnMvdGltZWxpbmUnLCBbXG4gICAgJ2pxdWVyeScsIFxuICAgICd1bmRlcnNjb3JlJywgXG4gICAgJ2JhY2tib25lJyxcbiAgICAnbW9kZWxzL21hcC9sYXllci90aW1lbGluZS9pdGVtJ1xuXSwgZnVuY3Rpb24oJCxfLEJhY2tib25lLFRpbWVsaW5lSXRlbU1vZGVsKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBUaW1lbGluZUNvbGxlY3Rpb24gPSBCYWNrYm9uZS5Db2xsZWN0aW9uLmV4dGVuZCh7XG4gICAgICAgIG1vZGVsOiBUaW1lbGluZUl0ZW1Nb2RlbFxuICAgIH0pOyAgICBcbiAgICByZXR1cm4gVGltZWxpbmVDb2xsZWN0aW9uO1xufSk7XG4iLCJkZWZpbmUoJ2NvbnRyb2xzL0wuQ29udHJvbC5UaW1lbGluZScsIFtcbiAgICAgICdsZWFmbGV0J1xuICAgICwgJ2QzJ1xuXSwgZnVuY3Rpb24gKEwsZDMpIHtcbiAgICBpZiAoTC5Db250cm9sLlRpbWVsaW5lKSByZXR1cm4gTDtcbiAgICBMLkNvbnRyb2wuVGltZWxpbmUgPSBMLkNvbnRyb2wuZXh0ZW5kKHtcbiAgICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgICAgICAgb3JpZW50YXRpb24gOiAnbGVmdCdcbiAgICAgICAgICAgICAgLCBoZWlnaHQgICAgICA6IDUwMFxuICAgICAgICAgICAgICAsIHdpZHRoICAgICAgIDogMTAwXG4gICAgICAgICAgICAgICwgbWFyZ2luICAgICAgOiB7IGxlZnQ6IDMsIHJpZ2h0OiAzLCB0b3A6IDEwLCBib3R0b206IDUgfVxuICAgICAgICAgICAgICAsIGNvbGxhcHNlZCAgIDogdHJ1ZVxuICAgICAgICAgICAgICAsIGl0ZW0gICAgICAgIDoge21pbkhlaWdodDoxfVxuICAgICAgICAgICAgICAsIG9uICAgICAgICAgIDogbnVsbFxuICAgICAgICAgICAgICAsIHRpdGxlICAgICAgIDogJ1RpbWVsaW5lJ1xuICAgICAgICAgICAgICAsIHBvc2l0aW9uICAgIDogJ3RvcGxlZnQnXG4gICAgICAgIH1cbiAgICAgICAgLCBpbml0aWFsaXplIDogZnVuY3Rpb24obWFwLCBzb3VyY2UsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIEwuVXRpbC5zZXRPcHRpb25zKHRoaXMsIG9wdGlvbnMpO1xuICAgICAgICAgICAgdGhpcy5fbWFwID0gbWFwO1xuICAgICAgICAgICAgdGhpcy5fc291cmNlID0gc291cmNlO1xuICAgICAgICAgICAgdmFyIGNvbnRhaW5lciA9IHRoaXMuX2NvbnRhaW5lciA9IEwuRG9tVXRpbC5jcmVhdGUoJ2RpdicsJ2xlYWZsZXQtY29udHJvbC10aW1lbGluZSBsZWFmbGV0LWNvbnRyb2wnKTtcbiAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMuY29sbGFwc2VkKSB7XG4gICAgICAgICAgICAgICAgTC5Eb21VdGlsLmFkZENsYXNzKGNvbnRhaW5lciwgJ2xlYWZsZXQtY29udHJvbC10aW1lbGluZS1jb2xsYXBzZWQnKTtcbiAgICAgICAgICAgICAgICB2YXIgdG9nZ2xlID0gdGhpcy5fdG9nZ2xlID0gTC5Eb21VdGlsLmNyZWF0ZSgnYScsICdsZWFmbGV0LWNvbnRyb2wtdGltZWxpbmUtdG9nZ2xlJywgY29udGFpbmVyKTtcbiAgICAgICAgICAgICAgICB0b2dnbGUudGl0bGUgPSB0aGlzLm9wdGlvbnMudGl0bGU7XG4gICAgICAgICAgICAgICAgdG9nZ2xlLmxpbmsgPSAnIyc7XG4gICAgICAgICAgICAgICAgdmFyIGV4cGFuZCA9IGZ1bmN0aW9uKCkgeyB0aGF0Ll9leHBhbmQoKTsgfTtcbiAgICAgICAgICAgICAgICBpZiAoTC5Ccm93c2VyLnRvdWNoKSB7XG4gICAgICAgICAgICAgICAgICAgIEwuRG9tRXZlbnRcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbih0b2dnbGUsICdjbGljaycsIEwuRG9tRXZlbnQuc3RvcClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbih0b2dnbGUsICdjbGljaycsIGV4cGFuZCwgdGhpcyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgTC5Eb21FdmVudC5vbih0b2dnbGUsICdjbGljaycsIGV4cGFuZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBMLkRvbVV0aWwuYWRkQ2xhc3MoY29udGFpbmVyLCAnbGVhZmxldC1jb250cm9sLXRpbWVsaW5lLWV4cGFuZGVkJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIUwuQnJvd3Nlci50b3VjaCkge1xuICAgICAgICAgICAgICAgIEwuRG9tRXZlbnQuZGlzYWJsZUNsaWNrUHJvcGFnYXRpb24odGhpcy5fY29udGFpbmVyKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgTC5Eb21FdmVudC5vbih0aGlzLl9jb250YWluZXIsICdjbGljaycsIEwuRG9tRXZlbnQuc3RvcFByb3BhZ2F0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjb250YWluZXI7XG4gICAgICAgIH1cbiAgICAgICAgLCBvblJlbW92ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAvLyBkbyBhbnkgY2xlYW51cCBoZXJlXG4gICAgICAgIH1cbiAgICAgICAgLCBvbkFkZDogZnVuY3Rpb24obWFwKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fY29udGFpbmVyO1xuICAgICAgICB9XG4gICAgICAgICwgX2V4cGFuZDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICBpZiAodGhhdC5fZXhwYW5kZWQpIHJldHVybjtcbiAgICAgICAgICAgIHRoYXQuX2V4cGFuZGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuX21hcC5vbignY2xpY2snLCB0aGlzLl9jb2xsYXBzZSwgdGhpcyk7XG5cbiAgICAgICAgICAgIEwuRG9tVXRpbC5yZW1vdmVDbGFzcyh0aGlzLl9jb250YWluZXIsICdsZWFmbGV0LWNvbnRyb2wtdGltZWxpbmUtY29sbGFwc2VkJyk7XG4gICAgICAgICAgICBMLkRvbVV0aWwuYWRkQ2xhc3ModGhpcy5fY29udGFpbmVyLCAnbGVhZmxldC1jb250cm9sLXRpbWVsaW5lLWV4cGFuZGVkJyk7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLl90aW1lbGluZSkgcmV0dXJuO1xuXG4gICAgICAgICAgICB2YXIgaW5uZXJIZWlnaHQgPSB0aGlzLm9wdGlvbnMuaGVpZ2h0IC0gdGhpcy5vcHRpb25zLm1hcmdpbi50b3AgICAtIHRoaXMub3B0aW9ucy5tYXJnaW4uYm90dG9tO1xuICAgICAgICAgICAgdmFyIGlubmVyV2lkdGggID0gdGhpcy5vcHRpb25zLndpZHRoICAtIHRoaXMub3B0aW9ucy5tYXJnaW4ucmlnaHQgLSB0aGlzLm9wdGlvbnMubWFyZ2luLmxlZnQ7XG5cbiAgICAgICAgICAgIHZhciB4U2NhbGUgPSB0aGlzLl94U2NhbGUgPSBkMy5zY2FsZS5saW5lYXIoKVxuICAgICAgICAgICAgICAgIC5yYW5nZShbMCxpbm5lcldpZHRoXSk7XG5cbiAgICAgICAgICAgIHZhciB5U2NhbGUgPSB0aGlzLl95U2NhbGUgPSBkMy5zY2FsZS5saW5lYXIoKVxuICAgICAgICAgICAgICAgIC5kb21haW4oW3RoaXMuX3NvdXJjZS5zdGFydCx0aGlzLl9zb3VyY2UuZW5kXSlcbiAgICAgICAgICAgICAgICAucmFuZ2UoWzAsaW5uZXJIZWlnaHRdKTtcblxuICAgICAgICAgICAgdmFyIHRpbWVsaW5lID0gdGhpcy5fdGltZWxpbmUgPSBkMy5zZWxlY3QoJy5sZWFmbGV0LWNvbnRyb2wtdGltZWxpbmUnKVxuICAgICAgICAgICAgICAgIC5hcHBlbmQoJ3N2ZycpXG4gICAgICAgICAgICAgICAgLmF0dHIoJ2lkJywgJ3RpbWVsaW5lJylcbiAgICAgICAgICAgICAgICAuYXR0cignaGVpZ2h0JywgdGhpcy5vcHRpb25zLmhlaWdodClcbiAgICAgICAgICAgICAgICAuYXR0cignd2lkdGgnLCB0aGlzLm9wdGlvbnMud2lkdGgpO1xuXG4gICAgICAgICAgICB2YXIgYmFuZCA9IHRpbWVsaW5lLmFwcGVuZCgnZycpXG4gICAgICAgICAgICAgICAgLmF0dHIoJ2lkJywnYmFuZCcpXG4gICAgICAgICAgICAgICAgLmF0dHIoJ3dpZHRoJywgKGlubmVyV2lkdGgvMiAtIHRoaXMub3B0aW9ucy5tYXJnaW4ucmlnaHQpKVxuICAgICAgICAgICAgICAgIC5hdHRyKCdoZWlnaHQnLCBpbm5lckhlaWdodClcbiAgICAgICAgICAgICAgICAuYXR0cigndHJhbnNmb3JtJyxcbiAgICAgICAgICAgICAgICAgICAgICAndHJhbnNsYXRlKCcgKyAuMjUqaW5uZXJXaWR0aCArICcsJyArIHRoaXMub3B0aW9ucy5tYXJnaW4udG9wICsgICcpJ1xuICAgICAgICAgICAgICAgICAgICArICcgc2NhbGUoLjc1IDEuMCknXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgdmFyIGl0ZW1zID0gYmFuZC5zZWxlY3RBbGwoJ2cnKVxuICAgICAgICAgICAgICAgIC5kYXRhKHRoaXMuX3NvdXJjZS5nZXRJdGVtcygpKVxuICAgICAgICAgICAgICAgIC5lbnRlcigpLmFwcGVuZCgncmVjdCcpXG4gICAgICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywndGltZWxpbmUtaXRlbScpXG4gICAgICAgICAgICAgICAgLmF0dHIoJ2hlaWdodCcsIGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQzLm1heChbXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQub3B0aW9ucy5pdGVtLm1pbkhlaWdodFxuICAgICAgICAgICAgICAgICAgICAgICAgLCB5U2NhbGUoZC5kdXJhdGlvbigpKVxuICAgICAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5hdHRyKCd3aWR0aCcsaW5uZXJXaWR0aClcbiAgICAgICAgICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ3RyYW5zbGF0ZSgwLCAnICsgeVNjYWxlKGQuc3RhcnQpICsgJyknO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB2YXIgYnJ1c2ggPSB0aGlzLl9icnVzaCA9IGQzLnN2Zy5icnVzaCgpXG4gICAgICAgICAgICAgICAgLnkoeVNjYWxlKVxuICAgICAgICAgICAgICAgIC5vbignYnJ1c2hlbmQnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGV4dFN0YXJ0ID0geVNjYWxlKGJydXNoLmV4dGVudCgpWzBdKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGV4dEVuZCAgID0geVNjYWxlKGJydXNoLmV4dGVudCgpWzFdKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdHMgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFyOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgLCBzZWxlY3RlZCA6IFtdXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIGlmIChleHRTdGFydCAhPT0gZXh0RW5kKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3QoJyNiYW5kJykuc2VsZWN0QWxsKCdyZWN0LnRpbWVsaW5lLWl0ZW0nKS5lYWNoKGZ1bmN0aW9uKGkpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoeVNjYWxlKGkuc3RhcnQpIDw9IGV4dEVuZCkgJiYgKHlTY2FsZShpLmVuZCkgICA+PSBleHRTdGFydCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdHMuc2VsZWN0ZWQucHVzaChpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0cy5jbGVhciA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhhdC5vcHRpb25zLm9uLmJydXNoZW5kKHJlc3VsdHMpO1xuICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHZhciB5QnJ1c2ggPSBiYW5kLmFwcGVuZCgnc3ZnJylcbiAgICAgICAgICAgICAgICAuYXR0cignaWQnLCdicnVzaCcpXG4gICAgICAgICAgICAgICAgLmNhbGwoYnJ1c2gpO1xuICAgICAgICAgICAgeUJydXNoLnNlbGVjdEFsbCgncmVjdCcpXG4gICAgICAgICAgICAgICAgLmF0dHIoJ3dpZHRoJyxpbm5lcldpZHRoKTtcblxuICAgICAgICAgICAgdmFyIHlBeGlzID0gdGltZWxpbmUuYXBwZW5kKCdnJylcbiAgICAgICAgICAgICAgICAuYXR0cignaWQnLCdheGlzJylcbiAgICAgICAgICAgICAgICAuYXR0cigndHJhbnNmb3JtJywndHJhbnNsYXRlKCcgKyAoKC4yNSppbm5lcldpZHRoKSAtIHRoaXMub3B0aW9ucy5tYXJnaW4ubGVmdCkgKyAnLCcgKyB0aGlzLm9wdGlvbnMubWFyZ2luLnRvcCArICAnKScpO1xuXG4gICAgICAgICAgICB2YXIgYXhpcyA9IGQzLnN2Zy5heGlzKClcbiAgICAgICAgICAgICAgICAuc2NhbGUoeVNjYWxlKVxuICAgICAgICAgICAgICAgIC5vcmllbnQodGhpcy5vcHRpb25zLm9yaWVudGF0aW9uKVxuICAgICAgICAgICAgICAgIC50aWNrU2l6ZSg2LCAwKVxuICAgICAgICAgICAgICAgIC50aWNrVmFsdWVzKHRoaXMuX3NvdXJjZS50aWNrVmFsdWVzKCkpXG4gICAgICAgICAgICAgICAgLnRpY2tGb3JtYXQoZnVuY3Rpb24oaXRlbSl7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGF0Ll9zb3VyY2UudGlja0Zvcm1hdChpdGVtKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHlBeGlzLmNhbGwoYXhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgLCBfY29sbGFwc2UgOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5fZXhwYW5kZWQpIHJldHVybjtcbiAgICAgICAgICAgIGlmICAodGhpcy5vcHRpb25zLm9uLmNvbGxhcHNlIHx8IHR5cGVvZiB0aGlzLm9wdGlvbnMub24uY29sbGFwc2UgPT09ICdmdW5jdGlvbicpIFxuICAgICAgICAgICAgICAgIHRoaXMub3B0aW9ucy5vbi5jb2xsYXBzZSgpO1xuICAgICAgICAgICAgLy9kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGltZWxpbmUnKS5yZW1vdmUoKTtcbiAgICAgICAgICAgIHRoaXMuX2V4cGFuZGVkID0gZmFsc2U7XG4gICAgICAgICAgICBMLkRvbVV0aWwuYWRkQ2xhc3ModGhpcy5fY29udGFpbmVyLCAnbGVhZmxldC1jb250cm9sLXRpbWVsaW5lLWNvbGxhcHNlZCcpO1xuICAgICAgICAgICAgTC5Eb21VdGlsLnJlbW92ZUNsYXNzKHRoaXMuX2NvbnRhaW5lciwgJ2xlYWZsZXQtY29udHJvbC10aW1lbGluZS1leHBhbmRlZCcpO1xuICAgICAgICAgICAgdGhpcy5fbWFwLm9mZignY2xpY2snLCB0aGlzLl9jb2xsYXBzZSwgdGhpcyk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBMLmNvbnRyb2wudGltZWxpbmUgPSBmdW5jdGlvbihtYXAsc291cmNlLG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBMLkNvbnRyb2wuVGltZWxpbmUobWFwLHNvdXJjZSxvcHRpb25zKTtcbiAgICB9O1xufSk7XG4iLCIvKmdsb2JhbCBkZWZpbmUgKi9cbmRlZmluZSgnbW9kZWxzL2FydGljbGUnLCBbXG4gICAgICAnanF1ZXJ5J1xuICAgICwgJ3VuZGVyc2NvcmUnXG4gICAgLCAnYmFja2JvbmUnXG4gICAgLCAnbWl4aW5zL2ZldGNoeG1sJ1xuICAgICwgJ21peGlucy9hc3luY0luaXQnXG4gICAgLCAnbWl4aW5zL3htbDJodG1sJ1xuICAgICwgJ3RleHQheHNsL2dlb2pzb24ueHNsJ1xuICAgICwgJ3RleHQheHNsL2NpdGVkLXJhbmdlLnhzbCdcbl0sIGZ1bmN0aW9uKCQsXyxCYWNrYm9uZSxGZXRjaFhNTCxBc3luY0luaXQsWE1MMkhUTUwsZ2VvSnNvblhzbCxjaXRlZFJhbmdlWHNsKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBBcnRpY2xlTW9kZWwgPSBCYWNrYm9uZS5Nb2RlbC5leHRlbmQoe1xuICAgICAgICBpbml0aWFsaXplOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIHRoYXQuJGRlZiA9ICQuRGVmZXJyZWQoKTtcbiAgICAgICAgICAgIHZhciAkZ2V0ID0gdGhhdC5mZXRjaFhNTCh0aGF0LmdldCgncGF0aCcpKTtcbiAgICAgICAgICAgICQud2hlbigkZ2V0KS5kb25lKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICB0aGF0LnNldCgneG1sJywgZGF0YSk7XG4gICAgICAgICAgICAgICAgdGhhdC5fbWtHZW9qc29uKCk7XG4gICAgICAgICAgICAgICAgdGhhdC5fbWtDaXRlZFJhbmdlKCk7XG4gICAgICAgICAgICAgICAgaWYgKHRoYXQuZ2VvanNvbiAhPT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5zZXQoJ3BsYWNlVHlwZScsIHRoYXQuZ2VvanNvbi5wcm9wZXJ0aWVzLmxheWVyKTtcbiAgICAgICAgICAgICAgICB0aGF0LiRkZWYucmVzb2x2ZSh0aGF0KTtcbiAgICAgICAgICAgIH0pLmZhaWwoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdGhhdC4kZGVmLnJlamVjdCgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIGRlZmF1bHRzOiB7XG4gICAgICAgICAgICAvL1RPRE86ICd4bWwnOiBzZXJpYWxpemU/IGFuZCBjYWNoZSB0byBsb2NhbHN0b3JhZ2VcbiAgICAgICAgICAgIC8vIGFkZCBhZGFwdGVyIGZvciBhY2Nlc3MgdGhyb3VnaCAuYXR0cmlidXRlc1xuICAgICAgICAgICAgICBcInhtbFwiICAgICAgIDogbnVsbCAgICAvLyBEb2N1bWVudFxuICAgICAgICAgICAgLCBcInBsYWNlVHlwZVwiIDogbnVsbFxuICAgICAgICAgICAgLCBcImljb25VcmxcIiAgIDogJydcbiAgICAgICAgICAgICwgXCJjaXRlZFJhbmdlXCI6IHt9XG4gICAgICAgIH0sXG4gICAgICAgIGdlb2pzb246IG51bGwsXG4gICAgICAgIGdldEdlb2pzb246IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuZ2VvanNvbiA9PT0gbnVsbClcbiAgICAgICAgICAgICAgICB0aGlzLl9ta0dlb2pzb24oKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdlb2pzb247XG4gICAgICAgIH0sXG4gICAgICAgIF9ta0dlb2pzb246IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB2YXIganNvblN0cmluZyA9IHRoaXMueG1sMmh0bWwodGhpcy5nZXQoJ3htbCcpLCBnZW9Kc29uWHNsLCB7fSwgJ3RleHQnKTtcbiAgICAgICAgICAgICAgICB0aGlzLmdlb2pzb24gPSBKU09OLnBhcnNlKGpzb25TdHJpbmcpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byBwYXJzZSBnZW9qc29uOiBcIiArIGUudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIF9ta0NpdGVkUmFuZ2U6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB2YXIganNvblN0cmluZyA9IHRoaXMueG1sMmh0bWwodGhpcy5nZXQoJ3htbCcpLCBjaXRlZFJhbmdlWHNsLCB7fSwgJ3RleHQnKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNldCgnY2l0ZWRSYW5nZScsIEpTT04ucGFyc2UoanNvblN0cmluZykpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byBwYXJzZSBjaXRlZCByYW5nZSBqc29uOiBcIiArIGUudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBfLmV4dGVuZChBcnRpY2xlTW9kZWwucHJvdG90eXBlLEZldGNoWE1MKTtcbiAgICBfLmV4dGVuZChBcnRpY2xlTW9kZWwucHJvdG90eXBlLEFzeW5jSW5pdCk7XG4gICAgXy5leHRlbmQoQXJ0aWNsZU1vZGVsLnByb3RvdHlwZSxYTUwySFRNTCk7XG4gICAgcmV0dXJuIEFydGljbGVNb2RlbDtcbn0pO1xuIiwiLypnbG9iYWwgZGVmaW5lICovXG5kZWZpbmUoJ21vZGVscy9pc3N1ZScsIFtcbiAgICAgICdqcXVlcnknXG4gICAgLCAndW5kZXJzY29yZSdcbiAgICAsICdiYWNrYm9uZSdcbiAgICAsICdtb2RlbHMvYXJ0aWNsZSdcbiAgICAsICdjb2xsZWN0aW9ucy9hcnRpY2xlcydcbiAgICAsICdtaXhpbnMvYXN5bmNJbml0J1xuXSwgZnVuY3Rpb24oJCxfLEJhY2tib25lLEFydGljbGVNb2RlbCxBcnRpY2xlQ29sbGVjdGlvbixBc3luY0luaXQpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIElzc3VlTW9kZWwgPSBCYWNrYm9uZS5Nb2RlbC5leHRlbmQoe1xuICAgICAgICBpbml0aWFsaXplOiBmdW5jdGlvbihhcmdzKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCAgICA9IHRoaXM7XG4gICAgICAgICAgICB0aGF0LiRkZWYgICA9ICQuRGVmZXJyZWQoKTtcbiAgICAgICAgICAgIHZhciBhcnRkaXIgID0gYXJncy5jb25maWcuYXJ0aWNsZXMucGF0aEJhc2U7XG4gICAgICAgICAgICBpZiAoIWFydGRpci5tYXRjaCgvXFwvJC8pKSBhcnRkaXIgKz0gJy8nO1xuICAgICAgICAgICAgdmFyIGZpbGVzICAgPSBhcmdzLmNvbmZpZy5hcnRpY2xlcy5maWxlcztcbiAgICAgICAgICAgIHZhciBjb2wgICAgID0gbmV3IEFydGljbGVDb2xsZWN0aW9uKCk7XG4gICAgICAgICAgICB0aGF0LmNvbmZpZyA9IGFyZ3MuY29uZmlnO1xuICAgICAgICAgICAgdGhhdC5zZXQoJ2NvbGxlY3Rpb24nLCBjb2wpO1xuICAgICAgICAgICAgLy8gZml4IGxlbmd0aCBvZiBhcnRpY2xlcyBhcnJheVxuICAgICAgICAgICAgdmFyIGFydGljbGVzID0gXy5tYXAoXy5yYW5nZShmaWxlcy5sZW5ndGgpLCBmdW5jdGlvbigpe3JldHVybiB1bmRlZmluZWQ7fSk7XG4gICAgICAgICAgICAvLyBhcnRpY2xlcyBjb25zdHJ1Y3RlZCBzeW5jLCBzbyBhcnRpY2xlIG9iamVjdHMgYWRkZWQgdG8gbGlzdCBieSBpbmRleFxuICAgICAgICAgICAgXy5lYWNoKGZpbGVzLCBmdW5jdGlvbihmaWxlLGkpIHtcbiAgICAgICAgICAgICAgICBhcnRpY2xlc1tpXSA9IG5ldyBBcnRpY2xlTW9kZWwoe1xuICAgICAgICAgICAgICAgICAgICBhcnRpY2xlaWQ6ICBpLFxuICAgICAgICAgICAgICAgICAgICBhcnRpY2xlZGlyOiBhcnRkaXIsXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6ICAgICAgIGFydGRpciArIGZpbGVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdmFyIGluaXRzID0gXy5tYXAoYXJ0aWNsZXMsIGZ1bmN0aW9uKGFydGljbGUpe3JldHVybiBhcnRpY2xlLmluaXQoKTt9KTtcbiAgICAgICAgICAgICQud2hlbi5hcHBseShudWxsLGluaXRzKS5kb25lKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGNvbC5hZGQoYXJ0aWNsZXMpO1xuICAgICAgICAgICAgICAgIHRoYXQuc2V0SWNvbnMoKTtcbiAgICAgICAgICAgICAgICB0aGF0LiRkZWYucmVzb2x2ZSh0aGF0KTtcbiAgICAgICAgICAgIH0pLmFsd2F5cyhmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBfLmZvckVhY2goaW5pdHMsIGZ1bmN0aW9uKCRwcm9taXNlKXtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCRwcm9taXNlLnN0YXRlKCkgPT09ICdyZWplY3RlZCcpXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGF0LiRkZWYucmVqZWN0KCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhhdC4kZGVmLnJlamVjdCgpOyAvLyBub3QgcmUtc2V0IG9uIGZhaWx1cmVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIC8vIG1hcCBtYXJrZXIgaWNvbnMgZmlsZW5hbWUgdmFsdWVzIGFyZSBzZXQgaGVyZTsgaWNvbiBjb2xvcnMgYXJlIGFzc2lnbmVkXG4gICAgICAgIC8vIHJhbmRvbWx5LCBzbyB0byBzdXBwb3J0IGEgY29uc2lzdGVuY3kgYmV0d2VlbiB0aGUgY29sb3IgYW5kIHRoZSBwbGFjZS10eXBlXG4gICAgICAgIC8vIGxheWVyLCB0aGV5IG11c3QgYmUgYXNzaWduZWQgYXMgYSBncm91cFxuICAgICAgICAsIHNldEljb25zOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIHZhciBpY2NvbmZpZyAgPSB0aGF0LmNvbmZpZy5tYXJrZXJzLmljb25zO1xuICAgICAgICAgICAgdmFyIGljb25GaWxlcyA9IF8uc2h1ZmZsZShfLmZsYXR0ZW4oXG4gICAgICAgICAgICAgICAgXy5tYXAoaWNjb25maWcsIGZ1bmN0aW9uKGVudHJ5KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfLm1hcChlbnRyeS5maWxlcywgZnVuY3Rpb24oZmlsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVudHJ5LmRpci5jb25jYXQoZmlsZSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICApKTtcbiAgICAgICAgICAgIHZhciBkZWZhdWx0SWNvbkZpbGUgPSBpY29uRmlsZXMucG9wKCk7XG4gICAgICAgICAgICB2YXIgaWNvbnMgPSBbXTtcbiAgICAgICAgICAgIC8vIGRvIG1hcCBtYXJrZXIgaWNvbiBpbml0aWFsaXphdGlvbjsgdGhpcyBzZWVtcyBsaWtlIGl0IHNob3VsZFxuICAgICAgICAgICAgLy8gYmUgaXNvbGF0ZWQgdG8gdGhlIE1hcFZpZXcgb3IgTWFya2VyVmlldywgYnV0IGlzIGRhdGEgdXNlZFxuICAgICAgICAgICAgLy8gZWxzZXdoZXJlIGluIHRoZSBhcHBsaWNhdGlvbiwgc28gdGhleSBhcmUgYXNzaWduZWQgaGVyZVxuICAgICAgICAgICAgdGhhdC5nZXQoJ2NvbGxlY3Rpb24nKS5mb3JFYWNoKGZ1bmN0aW9uKGFydGljbGUsaSkge1xuICAgICAgICAgICAgICAgIHZhciBnZW9qc29uID0gKGFydGljbGUuZ2V0R2VvanNvbigpIHx8IHtcInByb3BlcnRpZXNcIjp7fX0pO1xuICAgICAgICAgICAgICAgIHZhciBsYXllciA9IGdlb2pzb24ucHJvcGVydGllcy5sYXllcjtcbiAgICAgICAgICAgICAgICBpY29uc1tsYXllcl0gPSBpY29uc1tsYXllcl0gfHwgaWNvbkZpbGVzLnBvcCgpIHx8IGRlZmF1bHRJY29uRmlsZTtcbiAgICAgICAgICAgICAgICBhcnRpY2xlLnNldCgnaWNvblVybCcsIGljb25zW2xheWVyXSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICAvLyByZXR1cm4gYXJ0aWNsZSBvYmplY3QgY29ycmVzcG9uZGluZyB0byBhcmd1bWVudDtcbiAgICAgICAgLy8gYXJndW1lbnQgbWF5IGJlIGVpdGhlciBhbiBpbmRleCBpbnRvIHRoZSBjb2xsZWN0aW9uXG4gICAgICAgIC8vIChlLmcuLCB3aGVuIHByb3ZpZGVkIGJ5IGEgdXJsKSBvciBhbiBBcnRpY2xlTW9kZWxcbiAgICAgICAgLy8gKGUuZy4sIHdoZW4gc2VsZWN0ZWQgYnkgYSBtYXAgbWFya2VyKSBcbiAgICAgICAgLCBnZXRBcnRpY2xlOiBmdW5jdGlvbihhcnRpY2xlKSB7XG4gICAgICAgICAgICB2YXIgYXJ0O1xuICAgICAgICAgICAgdmFyIGNvbCA9IHRoaXMuZ2V0KCdjb2xsZWN0aW9uJyk7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGFydGljbGUgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAgICAgYXJ0ID0gYXJ0aWNsZTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGFydGljbGUgPT09ICdudW1iZXInIHx8IHR5cGVvZiBhcnRpY2xlID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIGFydCA9IGNvbC5hdChhcnRpY2xlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBhcnQ7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBfLmV4dGVuZChJc3N1ZU1vZGVsLnByb3RvdHlwZSxBc3luY0luaXQpO1xuICAgIHJldHVybiBJc3N1ZU1vZGVsO1xufSk7XG4iLCIvKmdsb2JhbCBkZWZpbmUgKi9cbmRlZmluZSgnbW9kZWxzL21hcCcsIFtcbiAgICAgICdqcXVlcnknXG4gICAgLCAndW5kZXJzY29yZSdcbiAgICAsICdiYWNrYm9uZSdcbiAgICAsICdtaXhpbnMvYXN5bmNJbml0J1xuXSwgZnVuY3Rpb24oJCxfLEJhY2tib25lLEFzeW5jSW5pdCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgTWFwTW9kZWwgPSBCYWNrYm9uZS5Nb2RlbC5leHRlbmQoe1xuICAgICAgICBpbml0aWFsaXplOiBmdW5jdGlvbihhcmdzKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCAgPSB0aGlzO1xuICAgICAgICAgICAgdGhhdC4kZGVmID0gJC5EZWZlcnJlZCgpO1xuICAgICAgICAgICAgJC5nZXRKU09OKGFyZ3MuY29uZmlnLm1hcC5jb25maWcsIGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICB0aGF0LnNldCgnbWFwY29uZmlnJywgZGF0YSk7XG4gICAgICAgICAgICAgICAgdGhhdC4kZGVmLnJlc29sdmUodGhhdCk7XG4gICAgICAgICAgICB9KS5mYWlsKGZ1bmN0aW9uKGpxeGhyLCB0ZXh0U3RhdHVzLCBlcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdGYWlsZWQgdG8gbG9hZCBtYXAgY29uZmlnIGZpbGU6ICcgKyBlcnJvcik7XG4gICAgICAgICAgICAgICAgdGhhdC4kZGVmLnJlamVjdCgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIGRlZmF1bHRzOiB7XG4gICAgICAgICAgICBcIm1hcGNvbmZpZ1wiIDoge31cbiAgICAgICAgfSxcbiAgICB9KTtcbiAgICBfLmV4dGVuZChNYXBNb2RlbC5wcm90b3R5cGUsQXN5bmNJbml0KTtcbiAgICByZXR1cm4gTWFwTW9kZWw7XG59KTtcbiIsIi8qZ2xvYmFsIGRlZmluZSAqL1xuZGVmaW5lKCdtaXhpbnMvYXN5bmNJbml0JywgW1xuICAgICdqcXVlcnknLFxuICAgICd1bmRlcnNjb3JlJ1xuXSwgZnVuY3Rpb24oJCxfKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBBc3luY0luaXQgPSB7XG4gICAgICAgICAgJGRlZjogbnVsbFxuICAgICAgICAsIGluaXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuJGRlZi5wcm9taXNlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBBc3luY0luaXQ7XG59KTtcbiIsIi8qZ2xvYmFsIGRlZmluZSAqL1xuZGVmaW5lKCdtaXhpbnMvZG9td2F0Y2hlcicsIFtcbiAgICAnanF1ZXJ5JyBcbl0sIGZ1bmN0aW9uKCQpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIERPTVdhdGNoZXIgPSB7XG4gICAgICAgIHdhdGNoRE9NIDogZnVuY3Rpb24obXMsc2VsLCRkZWYpIHtcbiAgICAgICAgICAgIGlmICghc2VsKSB0aHJvdyBcIkVtcHR5IHNlbGVjdG9yIGluIHdhdGNoRE9NKClcIjtcbiAgICAgICAgICAgIGlmICgkKHNlbCkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgdmFyIGYgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCQoc2VsKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKGRvY3VtZW50LmJvZHkpLm9mZignRE9NTm9kZUluc2VydGVkJywgZik7XG4gICAgICAgICAgICAgICAgICAgICAgICAkZGVmLnJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgJChkb2N1bWVudC5ib2R5KS5vbignRE9NTm9kZUluc2VydGVkJywgZik7XG4gICAgICAgICAgICAgICAgd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICQoZG9jdW1lbnQuYm9keSkub2ZmKCdET01Ob2RlSW5zZXJ0ZWQnLCBmKTtcbiAgICAgICAgICAgICAgICAgICAgJGRlZi5yZWplY3QoKTtcbiAgICAgICAgICAgICAgICB9LCBtcyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICRkZWYucmVzb2x2ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gRE9NV2F0Y2hlcjtcbn0pO1xuIiwiLypnbG9iYWwgZGVmaW5lICovXG5kZWZpbmUoJ21peGlucy9mZXRjaHhtbCcsIFtcbiAgICAnanF1ZXJ5J1xuXSwgZnVuY3Rpb24oJCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgRmV0Y2hYTUwgPSB7XG4gICAgICAgIC8vIHJldHVybiBhbiBvYmplY3QgaW1wbGVtZW50aW5nIHRoZSBQcm9taXNlIGludGVyZmFjZVxuICAgICAgICAvLyB3aGVuIHN1Y2Nlc3NmdWwsIHRoZSBQcm9taXNlIHJldHVybnMgdGhlIGRhdGEgZmV0Y2hlZFxuICAgICAgICAvLyBieSB0aGUgYWpheCByZXF1ZXN0XG4gICAgICAgIC8vIGRhdGEgcmV0dXJuZWQgYnkgdGhlIHByb21pc2UgaXMgYSBEb2N1bWVudFxuICAgICAgICBmZXRjaFhNTCA6IGZ1bmN0aW9uKHVybCkge1xuICAgICAgICAgICAgdmFyICRnZXQgPSAkLkRlZmVycmVkKCk7XG4gICAgICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgICAgIHR5cGU6ICAgICAnR0VUJyxcbiAgICAgICAgICAgICAgICB1cmw6ICAgICAgdXJsLFxuICAgICAgICAgICAgICAgIGRhdGFUeXBlOiAneG1sJyxcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAkZ2V0LnJlc29sdmUoZGF0YSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24oanFYSFIsIHRleHRTdGF0dXMsIGVycm9yVGhyb3duKSB7XG4gICAgICAgICAgICAgICAgICAgICRnZXQucmVqZWN0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gJGdldC5wcm9taXNlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBGZXRjaFhNTDtcbn0pO1xuIiwiLypnbG9iYWwgZGVmaW5lICovXG5kZWZpbmUoJ21peGlucy94bWwyaHRtbCcsIFtcbiAgICAnanF1ZXJ5JyxcbiAgICAndW5kZXJzY29yZSdcbl0sIGZ1bmN0aW9uKCQsXykge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgWE1MMkhUTUwgPSB7XG4gICAgICAgIF9kb2M6IGZ1bmN0aW9uKHhtbCkge1xuICAgICAgICAgICAgdmFyIHhtbERvYztcbiAgICAgICAgICAgIGlmICh0eXBlb2YgeG1sID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIHhtbERvYyA9IG5ldyBET01QYXJzZXIoKS5wYXJzZUZyb21TdHJpbmcoeG1sLCd0ZXh0L3htbCcpO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh4bWwgaW5zdGFuY2VvZiBEb2N1bWVudCkge1xuICAgICAgICAgICAgICAgIHhtbERvYyA9IHhtbDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVW5yZWNvZ25pemVkIGRvY3VtZW50IGlucHV0IGluIFhNTDJIVE1MXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHhtbERvYyA9PSBudWxsIHx8ICgheG1sRG9jLmhhc093blByb3BlcnR5KCdnZXRFbGVtZW50c0J5VGFnTmFtZScpICYmIHhtbERvYy5nZXRFbGVtZW50c0J5VGFnTmFtZSgncGFyc2VyZXJyb3InKS5sZW5ndGggPiAwKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byBwYXJzZSBkb2N1bWVudCBpbiB4bWwyaHRtbFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB4bWxEb2M7XG4gICAgICAgIH0sXG4gICAgICAgIC8vIHJldHVybiBIVE1MIG9yIEpTT04gc3RyaW5nIGZyb20gWFNMVCB0cmFuc2Zvcm1hdGlvblxuICAgICAgICB4bWwyaHRtbDogZnVuY3Rpb24oeG1sLHhzbCxwYXJhbXMsbW9kZSkge1xuICAgICAgICAgICAgdmFyIHhtbERvYyA9IHRoaXMuX2RvYyh4bWwpLFxuICAgICAgICAgICAgICAgIHhzbERvYyA9IHRoaXMuX2RvYyh4c2wpO1xuICAgICAgICAgICAgdmFyIHhzbHRQcm9jZXNzb3IgPSBuZXcgWFNMVFByb2Nlc3NvcigpO1xuICAgICAgICAgICAgeHNsdFByb2Nlc3Nvci5pbXBvcnRTdHlsZXNoZWV0KHhzbERvYyk7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHBhcmFtcyA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgICAgICBfLmVhY2goXy5rZXlzKHBhcmFtcyksIGZ1bmN0aW9uKGtleSl7XG4gICAgICAgICAgICAgICAgICAgIHhzbHRQcm9jZXNzb3Iuc2V0UGFyYW1ldGVyKG51bGwsa2V5LHBhcmFtc1trZXldKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciByZXN1bHQ7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHZhciBkb2MgPSB4c2x0UHJvY2Vzc29yLnRyYW5zZm9ybVRvRG9jdW1lbnQoeG1sRG9jKTtcbiAgICAgICAgICAgICAgICBpZiAobmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCdGaXJlZm94JykgIT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgLy88dHJhbnNmb3JtaWl4OnJlc3VsdD4uLi48L3RyYW5zZm9ybWlpeDpyZXN1bHQ+XG4gICAgICAgICAgICAgICAgICAgIGlmIChtb2RlID09PSAndGV4dCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IGRvYy5kb2N1bWVudEVsZW1lbnQudGV4dENvbnRlbnQ7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBkb2MuZG9jdW1lbnRFbGVtZW50O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1vZGUgPT09ICd0ZXh0Jykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gZG9jLmRvY3VtZW50RWxlbWVudC50ZXh0Q29udGVudDtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IHJlc3VsdCA9IGRvYy5ib2R5LmlubmVySFRNTDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Vycm9yIGluIFhTTFQgdHJhbnNmb3JtOiAnICsgZS50b1N0cmluZygpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBYTUwySFRNTDtcbn0pO1xuIiwiLypnbG9iYWwgZGVmaW5lICovXG5kZWZpbmUoJ3ZpZXdzL2FwcCcsIFtcbiAgICAnanF1ZXJ5JyxcbiAgICAndW5kZXJzY29yZScsXG4gICAgJ2JhY2tib25lJ1xuXSwgZnVuY3Rpb24oJCxfLEJhY2tib25lKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBzaWduYWwgPSB7fTtcbiAgICB2YXIgQXBwVmlldyA9IEJhY2tib25lLlZpZXcuZXh0ZW5kKHtcbiAgICAgICAgZWw6ICdib2R5JyxcbiAgICAgICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICAkKHdpbmRvdykucmVzaXplKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmxvY2F0aW9uLnJlbG9hZCgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gQXBwVmlldztcbn0pO1xuIiwiLypnbG9iYWwgZGVmaW5lKi9cbmRlZmluZSgndmlld3MvYXJ0aWNsZScsIFtcbiAgICAgICdqcXVlcnknXG4gICAgLCAndW5kZXJzY29yZSdcbiAgICAsICdiYWNrYm9uZSdcbiAgICAsICd2aWV3cy9hcnRpY2xlL2dhbGxlcnknXG4gICAgLCAnbWl4aW5zL3htbDJodG1sJ1xuICAgICwgJ3RleHQheHNsL2FydGljbGUueHNsJ1xuXSwgZnVuY3Rpb24oJCxfLEJhY2tib25lLEdhbGxlcnlWaWV3LFhNTDJIVE1MLHhzbCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgQXJ0aWNsZVZpZXcgPSBCYWNrYm9uZS5WaWV3LmV4dGVuZCh7XG4gICAgICAgIGlkOiAnYXJ0aWNsZScsXG4gICAgICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uKGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIHRoYXQuY29uZmlnID0gYXJncy5jb25maWc7XG4gICAgICAgIH0sXG4gICAgICAgIHJlbmRlcjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgdGhhdC4kZWwgPSAkKCcjJyArIHRoYXQuaWQpO1xuICAgICAgICAgICAgaWYgKHRoYXQuJGVsLmZpbmQoJyMnICsgdGhhdC5tb2RlbC5jaWQpLmxlbmd0aCAhPT0gMClcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB2YXIgaHRtbCA9IHRoaXMueG1sMmh0bWwoXG4gICAgICAgICAgICAgICAgdGhpcy5tb2RlbC5nZXQoJ3htbCcpLCB4c2wsIFxuICAgICAgICAgICAgICAgIHtcImFydGljbGUtZGlyXCI6IHRoYXQuY29uZmlnLmFydGljbGVzLnBhdGhCYXNlXG4gICAgICAgICAgICAgICAgLCBcImljb25VcmxcIiAgICA6IHRoYXQubW9kZWwuZ2V0KCdpY29uVXJsJylcbiAgICAgICAgICAgICAgICAsIFwiY2lkXCIgICAgICAgIDogdGhhdC5tb2RlbC5jaWRcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAkKCcuYXJ0aWNsZS1jb250ZW50JykucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgJCgnIycrdGhpcy5pZCkuYXBwZW5kKGh0bWwpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiYXJ0aWNsZSBsb2FkIGVycm9yOiBcIiArIGUudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoICQoJ2ltZy5zbGlkZXNqcy1zbGlkZScpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBuZXcgR2FsbGVyeVZpZXcoKS5yZW5kZXIoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgJCgnI2Zvb3RlcicpLnJlbW92ZSgpXG4gICAgICAgICAgICAgICAgJCgnYXJ0aWNsZScpLnJlbW92ZUNsYXNzKCdiZWZvcmUtZm9vdGVyJykuYWRkQ2xhc3MoJ25vLWZvb3RlcicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhhdC4kZWwuZmluZCgnLmFydGljbGUtbWFya2VyJykuY2xpY2soZnVuY3Rpb24oaSxlbHQpIHtcbiAgICAgICAgICAgICAgICB0aGF0Lm1vZGVsLnRyaWdnZXIoJ3RvZ2dsZScsIHRoYXQubW9kZWwpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gdGhhdDtcbiAgICAgICAgfSxcbiAgICAgICAgcmVtb3ZlOiBmdW5jdGlvbigpIHsgLyogcmV0YWluICovfSxcbiAgICB9KTtcbiAgICBfLmV4dGVuZChBcnRpY2xlVmlldy5wcm90b3R5cGUsWE1MMkhUTUwpO1xuICAgIHJldHVybiBBcnRpY2xlVmlldztcbn0pO1xuIiwiLypnbG9iYWwgZGVmaW5lKi9cbmRlZmluZSgndmlld3MvY2xlYXInLCBbXG4gICAgJ2pxdWVyeScsXG4gICAgJ3VuZGVyc2NvcmUnLFxuICAgICdiYWNrYm9uZSdcbl0sIGZ1bmN0aW9uKCQsXyxCYWNrYm9uZSx0bXBsKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBDbGVhclZpZXcgPSBCYWNrYm9uZS5WaWV3LmV4dGVuZCh7XG4gICAgICAgIGVsOiAnYm9keScsXG4gICAgICAgIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkKCdib2R5JykuZW1wdHkoKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBDbGVhclZpZXc7XG59KTtcbiIsIi8qZ2xvYmFsIGRlZmluZSovXG5kZWZpbmUoJ3ZpZXdzL2lzc3VlJywgW1xuICAgICAgJ2pxdWVyeSdcbiAgICAsICd1bmRlcnNjb3JlJ1xuICAgICwgJ2JhY2tib25lJ1xuICAgICwgJ3RleHQhcGFydGlhbHMvaXNzdWUuaHRtbCdcbiAgICAsICd2aWV3cy9hcnRpY2xlJ1xuXSwgZnVuY3Rpb24oJCxfLEJhY2tib25lLHRtcGwsQXJ0aWNsZVZpZXcpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIElzc3VlVmlldyA9IEJhY2tib25lLlZpZXcuZXh0ZW5kKHtcbiAgICAgICAgZWw6ICAgICAgICAgJyNpc3N1ZScsXG4gICAgICAgIHRlbXBsYXRlOiAgIF8udGVtcGxhdGUodG1wbCksXG4gICAgICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uKGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIHRoYXQuY29uZmlnID0gYXJncy5jb25maWc7XG4gICAgICAgIH0sXG4gICAgICAgIHJlbmRlcjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy4kZWwucmVtb3ZlKCk7XG4gICAgICAgICAgICAkKCdib2R5JykuYXBwZW5kKHRtcGwpO1xuICAgICAgICB9LFxuICAgICAgICByZW5kZXJBcnRpY2xlOiBmdW5jdGlvbihhcnRpY2xlKSB7XG4gICAgICAgICAgICBuZXcgQXJ0aWNsZVZpZXcoe1xuICAgICAgICAgICAgICAgICAgbW9kZWw6ICBhcnRpY2xlXG4gICAgICAgICAgICAgICAgLCBjb25maWc6IHRoaXMubW9kZWwuY29uZmlnXG4gICAgICAgICAgICAgICAgLCBpc3N1ZTogIHRoaXNcbiAgICAgICAgICAgICAgICAsIHJvdXRlcjogdGhpcy5tb2RlbC5yb3V0ZXJcbiAgICAgICAgICAgIH0pLnJlbmRlcigpO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIElzc3VlVmlldztcbn0pO1xuIiwiLypnbG9iYWwgZGVmaW5lKi9cbmRlZmluZSgndmlld3MvbWFwJywgW1xuICAgICAgJ2pxdWVyeSdcbiAgICAsICd1bmRlcnNjb3JlJ1xuICAgICwgJ2JhY2tib25lJ1xuICAgICwgJ2xlYWZsZXQnXG4gICAgLCAndGV4dCFwYXJ0aWFscy9tYXAuaHRtbCdcbiAgICAsICd2aWV3cy9tYXJrZXInXG4gICAgLCAnbWl4aW5zL2FzeW5jSW5pdCdcbiAgICAsICdtb2RlbHMvZXJyb3IvdXNlcidcbiAgICAsICd2aWV3cy9lcnJvci91c2VyJ1xuXSwgZnVuY3Rpb24oJCxfLEJhY2tib25lLEwsbWFwUGFydGlhbCxNYXJrZXJWaWV3LEFzeW5jSW5pdCxVc2VyRXJyb3JNb2RlbCxVc2VyRXJyb3JWaWV3KSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBNYXBWaWV3ID0gQmFja2JvbmUuVmlldy5leHRlbmQoe1xuICAgICAgICAgIGlkOiAgICAgICdtYXAnXG4gICAgICAgICwgdGFnTmFtZTogJ2RpdidcbiAgICAgICAgLCBtYXJrZXJWaWV3czogW10gLy8gc3Vidmlld3NcbiAgICAgICAgLCBtYXBjb25maWc6IHt9XG4gICAgICAgICwgaW5pdGlhbGl6ZTogZnVuY3Rpb24oYXJncykge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgdGhhdC4kZGVmID0gJC5EZWZlcnJlZCgpO1xuICAgICAgICAgICAgdGhhdC5tb2RlbCA9IGFyZ3MubW9kZWw7XG4gICAgICAgICAgICB0aGF0Lmlzc3VlID0gYXJncy5pc3N1ZTtcbiAgICAgICAgICAgICQud2hlbi5hcHBseSh7fSxbdGhhdC5pc3N1ZS5pbml0KCksIHRoYXQubW9kZWwuaW5pdCgpXSkuZG9uZShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB0aGF0Lm1hcGNvbmZpZyA9IHRoYXQubW9kZWwuZ2V0KCdtYXBjb25maWcnKTtcbiAgICAgICAgICAgICAgICBpZiAoJCgnIycgKyB0aGlzLmlkKS5sZW5ndGggPiAwKSByZXR1cm47XG4gICAgICAgICAgICAgICAgaWYgKCQoJyMnICsgdGhpcy5pZCkuY2hpbGRyZW4oKS5sZW5ndGggPiAwKSByZXR1cm47XG4gICAgICAgICAgICAgICAgdGhhdC5faW5pdE1hcCgpOyAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB0aGF0LiRkZWYucmVzb2x2ZSh0aGF0KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgICwgX2luaXRNYXAgOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIGlmICgkKCcjJyArIHRoaXMuaWQpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICQoJ2JvZHknKS5hcHBlbmQobWFwUGFydGlhbCk7XG4gICAgICAgICAgICAgICAgdGhhdC5tYXAgPSBuZXcgTC5NYXAodGhhdC5tYXBjb25maWcuaWQsIHRoYXQubWFwY29uZmlnLm1hcCk7XG4gICAgICAgICAgICAgICAgaWYgKHRoYXQubWFwY29uZmlnLnZpZXcpIHtcbiAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHRoYXQubWFwLnNldFZpZXcoXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgTC5MYXRMbmcodGhhdC5tYXBjb25maWcudmlldy5sYXQsIHRoYXQubWFwY29uZmlnLnZpZXcubG5nKVxuICAgICAgICAgICAgICAgICAgICAgICwgdGhhdC5tYXBjb25maWcudmlldy56b29tXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBVc2VyRXJyb3JWaWV3KHttb2RlbDogbmV3IFVzZXJFcnJvck1vZGVsKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdMZWFmbGV0IHJlcG9ydHMgYmFkIGRhdGEgaW4gbWFwLmpzb24gZmlsZS4gJyArIGUudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgICAgICB9KX0pO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBuZXcgTC5UaWxlTGF5ZXIodGhhdC5tYXBjb25maWcudGlsZUxheWVyLnVybCwgdGhhdC5tYXBjb25maWcudGlsZUxheWVyLm9wdHMpLmFkZFRvKHRoYXQubWFwKTtcbiAgICAgICAgICAgICAgICBuZXcgTC5jb250cm9sLnNjYWxlKHRoYXQubWFwY29uZmlnLnNjYWxlKS5hZGRUbyh0aGF0Lm1hcCk7ICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHRoYXQubWFya2VyVmlld3MgPSBfLm1hcCh0aGF0Lmlzc3VlLmdldCgnY29sbGVjdGlvbicpLm1vZGVscywgZnVuY3Rpb24oYXJ0aWNsZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IE1hcmtlclZpZXcoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICBtb2RlbCAgICAgOiBhcnRpY2xlXG4gICAgICAgICAgICAgICAgICAgICAgICAsIG1hcCAgICAgICA6IHRoYXQubWFwXG4gICAgICAgICAgICAgICAgICAgICAgICAsIG1hcGNvbmZpZyA6IHRoYXQubWFwY29uZmlnXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgICwgcmVuZXdWaWV3cyA6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgdGhhdC5tYXJrZXJWaWV3cyA9IF8ubWFwKHRoYXQuaXNzdWUuZ2V0KCdjb2xsZWN0aW9uJykubW9kZWxzLCBmdW5jdGlvbihhcnRpY2xlKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFhcnRpY2xlLm1hcmtlclZpZXcpIHtcbiAgICAgICAgICAgICAgICAgICAgYXJ0aWNsZS5tYXJrZXJWaWV3ID0gbmV3IE1hcmtlclZpZXcoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICBtb2RlbCAgICAgOiBhcnRpY2xlXG4gICAgICAgICAgICAgICAgICAgICAgICAsIG1hcCAgICAgICA6IHRoYXQubWFwXG4gICAgICAgICAgICAgICAgICAgICAgICAsIG1hcGNvbmZpZyA6IHRoYXQubWFwY29uZmlnXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gYXJ0aWNsZS5tYXJrZXJWaWV3O1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBfLmZvckVhY2godGhhdC5tYXJrZXJWaWV3cywgZnVuY3Rpb24obXYpIHsgbXYucmVuZGVyKCk7IH0pO1xuICAgICAgICAgICAgdGhhdC50cmlnZ2VyKCdtYXJrZXJzJywgdGhhdC5tYXJrZXJWaWV3cyk7XG4gICAgICAgIH1cbiAgICAgICAgLCByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgdGhhdC5faW5pdE1hcCgpO1xuICAgICAgICAgICAgXy5mb3JFYWNoKHRoYXQubWFya2VyVmlld3MsIGZ1bmN0aW9uKG12KSB7IG12LnJlbmRlcigpIH0pO1xuICAgICAgICAgICAgdGhhdC50cmlnZ2VyKCdtYXJrZXJzJywgdGhhdC5tYXJrZXJWaWV3cyk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBfLmV4dGVuZChNYXBWaWV3LnByb3RvdHlwZSxBc3luY0luaXQpO1xuICAgIHJldHVybiBNYXBWaWV3O1xufSk7XG4iLCIvKmdsb2JhbCBkZWZpbmUqL1xuZGVmaW5lKCd2aWV3cy9tYXJrZXInLCBbXG4gICAgICAnanF1ZXJ5J1xuICAgICwgJ3VuZGVyc2NvcmUnXG4gICAgLCAnYmFja2JvbmUnXG4gICAgLCAndGV4dCFwYXJ0aWFscy9tYXJrZXIuaHRtbCdcbiAgICAsICd0ZXh0IXBhcnRpYWxzL21hcmtlci1sZWdlbmQuaHRtbCdcbl0sIGZ1bmN0aW9uKCQsXyxCYWNrYm9uZSx0bXBsLGxlZ2VuZFBhcnRpYWwpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIE1hcmtlclZpZXcgPSBCYWNrYm9uZS5WaWV3LmV4dGVuZCh7XG4gICAgICAgICAgdGVtcGxhdGU6IF8udGVtcGxhdGUodG1wbClcbiAgICAgICAgLCBlbDogJydcbiAgICAgICAgLCBtYXJrZXJMYXllcjogbnVsbFxuICAgICAgICAsIG1hcDogbnVsbFxuICAgICAgICAsIG1hcGNvbmZpZzogbnVsbFxuICAgICAgICAsIGluaXRpYWxpemU6IGZ1bmN0aW9uKGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIHRoYXQubWFwID0gYXJncy5tYXA7XG4gICAgICAgICAgICB0aGF0Lm1hcGNvbmZpZyA9IGFyZ3MubWFwY29uZmlnO1xuICAgICAgICAgICAgdGhhdC5pbml0TWFya2VyTGF5ZXIoKTtcbiAgICAgICAgfVxuICAgICAgICAsIGluaXRNYXJrZXJMYXllciA6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIHRoYXQgICAgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIGdlb2pzb24gPSB0aGlzLm1vZGVsLmdldEdlb2pzb24oKTtcbiAgICAgICAgICAgIHZhciBpY29uQ29uZmlnID0gdGhhdC5tYXBjb25maWcuZmVhdHVyZXMuaWNvbjtcbiAgICAgICAgICAgIGljb25Db25maWcuaWNvblVybCA9ICh0aGlzLm1vZGVsLmdldCgnaWNvblVybCcpIHx8ICcnKTtcbiAgICAgICAgICAgIHZhciBpY29uID0gTC5pY29uKGljb25Db25maWcpO1xuICAgICAgICAgICAgdGhhdC5tYXJrZXJMYXllciA9IEwuZ2VvSnNvbihnZW9qc29uLCB7XG4gICAgICAgICAgICAgICAgb25FYWNoRmVhdHVyZTogZnVuY3Rpb24gKGZlYXR1cmUsIG1hcE1hcmtlcikge1xuICAgICAgICAgICAgICAgICAgICAvLyBhZGQgdGhlIHBvcHVwIHRvIHRoaXMgbWFya2VyXG4gICAgICAgICAgICAgICAgICAgIHZhciBwb3B1cCA9IEwucG9wdXAodGhhdC5tYXBjb25maWcuZmVhdHVyZXMucG9wdXApO1xuICAgICAgICAgICAgICAgICAgICBwb3B1cC5zZXRDb250ZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC50ZW1wbGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJ0aWNsZWlkOiAgdGhhdC5tb2RlbC5nZXQoJ2FydGljbGVpZCcpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdlb2pzb246ICAgIHRoYXQubW9kZWwuZ2V0R2VvanNvbigpXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICBtYXBNYXJrZXIuYmluZFBvcHVwKHBvcHVwKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gb3ZlcnJpZGUgdGhlIGRlZmF1bHQgY2xpY2sgaGFuZGxlciBmb3IgdGhlXG4gICAgICAgICAgICAgICAgICAgIC8vIG1hcmtlciwgd2hpY2ggd291bGQgY2xvc2UgdGhlIHBvcHVwIGlmIGl0XG4gICAgICAgICAgICAgICAgICAgIC8vIHdlcmUgYWxyZWFkeSBvcGVuXG4gICAgICAgICAgICAgICAgICAgIG1hcE1hcmtlci5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycpO1xuICAgICAgICAgICAgICAgICAgICBtYXBNYXJrZXIub24oJ2NsaWNrJywgZnVuY3Rpb24oZXZ0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGF0LnRyaWdnZXIoJ2NsaWNrJywgZXZ0KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIG1hcE1hcmtlci5vbignbW91c2VvdmVyJywgZnVuY3Rpb24oZXZ0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGF0LnRyaWdnZXIoJ21vdXNlb3ZlcicsIGV2dCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcG9pbnRUb0xheWVyOiBmdW5jdGlvbiAoZmVhdHVyZSwgbGF0bG5nKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBMLm1hcmtlcihsYXRsbmcsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbiAgICAgICAgOiBpY29uXG4gICAgICAgICAgICAgICAgICAgICAgICAsIGNsaWNrYWJsZSAgIDogISFmZWF0dXJlLnByb3BlcnRpZXMudGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgLCB0aXRsZSAgICAgICA6IChmZWF0dXJlLnByb3BlcnRpZXMubWFya2VybmFtZSB8fCAnJylcbiAgICAgICAgICAgICAgICAgICAgICAgICwgb3BhY2l0eSAgICAgOiB0aGF0Lm1hcGNvbmZpZy5mZWF0dXJlcy5vcGFjaXR5XG4gICAgICAgICAgICAgICAgICAgICAgICAsIHJpc2VPbkhvdmVyIDogdGhhdC5tYXBjb25maWcuZmVhdHVyZXMucmlzZU9uSG92ZXJcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgLCByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdGhpcy5tYXJrZXJMYXllci5hZGRUbyh0aGlzLm1hcCk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gTWFya2VyVmlldztcbn0pO1xuIiwiLypnbG9iYWwgZGVmaW5lKi9cbmRlZmluZSgndmlld3MvbWVudScsIFtcbiAgICAgICdqcXVlcnknXG4gICAgLCAndW5kZXJzY29yZSdcbiAgICAsICdiYWNrYm9uZSdcbiAgICAsICd0ZXh0IXBhcnRpYWxzL21lbnUuaHRtbCdcbiAgICAsICdtaXhpbnMvZG9td2F0Y2hlcidcbiAgICAsICd2aWV3cy9hcnRpY2xlL21lbnUnXG5dLCBmdW5jdGlvbigkLF8sQmFja2JvbmUsbWVudVRtcGwsRE9NV2F0Y2hlcixBcnRpY2xlTWVudVZpZXcpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIE1lbnVWaWV3ID0gQmFja2JvbmUuVmlldy5leHRlbmQoe1xuICAgICAgICB0ZW1wbGF0ZTogXy50ZW1wbGF0ZShtZW51VG1wbCksXG4gICAgICAgICAgaWQ6ICAgICAgJ21lbnUnXG4gICAgICAgICwgdGFnTmFtZTogJ2RpdidcbiAgICAgICAgLCBpc3N1ZTogICBudWxsXG4gICAgICAgICwgY29uZmlnOiAge31cbiAgICAgICAgLCBpbml0aWFsaXplOiBmdW5jdGlvbihhcmdzKSB7XG4gICAgICAgICAgICB0aGlzLmNvbmZpZyA9IGFyZ3MuY29uZmlnO1xuICAgICAgICAgICAgdGhpcy5pc3N1ZSAgPSBhcmdzLmlzc3VlO1xuICAgICAgICB9LFxuICAgICAgICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgaWYgKCQoJyMnICsgdGhhdC5pZCkuY2hpbGRyZW4oKS5sZW5ndGggIT09IDApIHJldHVybjtcbiAgICAgICAgICAgIHZhciBpdGVtcyA9IHRoaXMuY29uZmlnLm1lbnU7XG4gICAgICAgICAgICAvLyByZW5kZXIgZWFjaCBpdGVtIGZyb20gdGhlIGNvbmZpZyBmaWxlIHRvIGEgPGxpPlxuICAgICAgICAgICAgLy8gbXVzdCBiZSBkb25lIGFzeW5jIGR1ZSB0byByZXRyaWV2YWwgb2YgcGFydGlhbCBmaWxlc1xuICAgICAgICAgICAgdmFyIHByb21pc2VzID0gW107XG4gICAgICAgICAgICAgLy8gY2FjaGUgb2YgdGVtcGxhdGUgc3RyaW5nczogdXJsID0+IHRlbXBsXG4gICAgICAgICAgICB2YXIgdGVtcGxhdGVzID0ge307XG4gICAgICAgICAgICB2YXIgY29sbGVjdGlvbnMgPSB7fTtcbiAgICAgICAgICAgIF8uZWFjaChpdGVtcywgZnVuY3Rpb24oaXRlbSl7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVzW2l0ZW0ucGFydGlhbF0gPSAnJztcbiAgICAgICAgICAgICAgICBpZiAoaXRlbS50eXBlID09PSAnbWVudScpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBpdGVtLmNvbGxlY3Rpb24gPT09IFwiY29sbGVjdGlvbnMvYXJ0aWNsZXNcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29sbGVjdGlvbnNbaXRlbS5jb2xsZWN0aW9uXSA9IHRoYXQuaXNzdWUuZ2V0KCdjb2xsZWN0aW9uJyk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbmhhbmRsZWQgY29sbGVjdGlvbiB0eXBlIHJlcXVlc3RlZDogXCIgKyBpdGVtLmNvbGxlY3Rpb24pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBfLmVhY2goXy5rZXlzKHRlbXBsYXRlcyksIGZ1bmN0aW9uKHVybCkge1xuICAgICAgICAgICAgICAgIHZhciAkZGVmID0gJC5EZWZlcnJlZCgpO1xuICAgICAgICAgICAgICAgIHJlcXVpcmUoWyd0ZXh0IScgKyB1cmxdLCBmdW5jdGlvbih0ZW1wbCkge1xuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZXNbdXJsXSA9IF8udGVtcGxhdGUodGVtcGwpO1xuICAgICAgICAgICAgICAgICAgICAkZGVmLnJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBwcm9taXNlcy5wdXNoKCRkZWYucHJvbWlzZSgpKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gcmVuZGVyIHRoZSBtZW51IGFzIGEgPGRpdj5cbiAgICAgICAgICAgIHZhciBjb250ZW50ID0gJyc7XG4gICAgICAgICAgICAkLndoZW4uYXBwbHkoJCwgcHJvbWlzZXMpLmRvbmUoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgXy5mb3JFYWNoKGl0ZW1zLCBmdW5jdGlvbihpdGVtLGkpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHVybCA9IGl0ZW0ucGFydGlhbDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNvcnRlciA9IHt9O1xuICAgICAgICAgICAgICAgICAgICB2YXIgc3ViQ29udGVudCA9ICcnO1xuICAgICAgICAgICAgICAgICAgICB2YXIgc29ydEtleXMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gJ3BhZ2UnIHx8IGl0ZW0udHlwZSA9PT0gJ3NlcCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgKz0gKHRlbXBsYXRlc1t1cmxdKShpdGVtKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpdGVtLnR5cGUgPT09ICdtZW51Jykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29sbGVjdGlvbnNbaXRlbS5jb2xsZWN0aW9uXS5tb2RlbHMuZm9yRWFjaChmdW5jdGlvbihtb2RlbCxqKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGhyZWYgICAgPSBpdGVtLml0ZW0uaHJlZi5yZXBsYWNlKCc6aScsIGopO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhbXYgICAgID0gbmV3IEFydGljbGVNZW51Vmlldyh7bW9kZWw6bW9kZWx9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ICA9IGFtdi5yZW5kZXIoe2hyZWY6ICcjJyArIGhyZWZ9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgJGxpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG5lZWQgYW4gPGxpPiBlbGVtZW50IGhlcmVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlc3VsdCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGxpID0gJChyZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzdWx0IGluc3RhbmNlb2YgRWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0Lm5vZGVOYW1lID09PSAnQk9EWScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRsaSA9ICQocmVzdWx0LmlubmVySFRNTCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzdWx0Lm5vZGVOYW1lID09PSAnTEknKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkbGkgPSAkKHJlc3VsdC5vdXRlckhUTUwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbnN1cHBvcnRlZCBkb2N1bWVudCBlbGVtZW50IGZvciBzdWJtZW51OiAnICsgcmVzdWx0LnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbnN1cHBvcnRlZCByZXN1bHQgdHlwZSBmb3Igc3VibWVudTogJyArIHJlc3VsdC50b1N0cmluZygpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCRsaS5hdHRyKCdkYXRhLXNvcnQta2V5JykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc29ydGVyWyRsaS5hdHRyKCdkYXRhLXNvcnQta2V5JyldID0gJGxpLmNsb25lKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc29ydGVyWyRsaS5maW5kKCdhJykudGV4dCgpXSA9ICRsaS5jbG9uZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgc29ydEtleXMgPSBfLmtleXMoc29ydGVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNvcnRLZXlzLnNvcnQoZnVuY3Rpb24oYSxiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGEubG9jYWxlQ29tcGFyZShiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgXy5lYWNoKHNvcnRLZXlzLCBmdW5jdGlvbihrZXkpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YkNvbnRlbnQgKz0gc29ydGVyW2tleV1bMF0ub3V0ZXJIVE1MO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50ICs9ICh0ZW1wbGF0ZXNbdXJsXSkoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBpdGVtLmxhYmVsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zOiBzdWJDb250ZW50XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAkKCcjJyArIHRoYXQuaWQpLmVtcHR5KCkuYXBwZW5kKHRoYXQudGVtcGxhdGUoe2NvbnRlbnQ6IGNvbnRlbnR9KSk7XG4gICAgICAgICAgICAgICAgLy8gY29uZmlybSB0aGF0IHRoZSBtZW51IGhhcyBsb2FkZWRcbiAgICAgICAgICAgICAgICB2YXIgJGZhaWxEZWYgPSAkLkRlZmVycmVkKCk7XG4gICAgICAgICAgICAgICAgJGZhaWxEZWYuZmFpbChmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICB0aGF0LnJlbmRlcigpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoYXQud2F0Y2hET00oNTAwLCAnIycgKyB0aGF0LmlkLCAkZmFpbERlZik7XG4gICAgICAgICAgICB9KS5mYWlsKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byBidWlsZCBtZW51LlwiKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgXy5leHRlbmQoTWVudVZpZXcucHJvdG90eXBlLERPTVdhdGNoZXIpO1xuICAgIHJldHVybiBNZW51Vmlldztcbn0pO1xuIiwiLypnbG9iYWwgZGVmaW5lKi9cbmRlZmluZSgndmlld3MvcGFnZScsIFtcbiAgICAnanF1ZXJ5JywgXG4gICAgJ3VuZGVyc2NvcmUnLCBcbiAgICAnYmFja2JvbmUnLFxuICAgICdtaXhpbnMvZG9td2F0Y2hlcicsXG4gICAgJ3RleHQhcGFydGlhbHMvcGFnZS5odG1sJ1xuXSwgZnVuY3Rpb24oJCxfLEJhY2tib25lLERPTVdhdGNoZXIscGFnZSkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgUGFnZVZpZXcgPSBCYWNrYm9uZS5WaWV3LmV4dGVuZCh7XG4gICAgICAgIGVsOiAnYm9keScsXG4gICAgICAgIHJlbmRlcjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgdmFyICRkZWYgPSAkLkRlZmVycmVkKCk7XG4gICAgICAgICAgICAkZGVmLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgJCh0aGF0LmVsKS5hcHBlbmQocGFnZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMud2F0Y2hET00oMTAwMCx0aGF0LmVsLCRkZWYpO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgXy5leHRlbmQoUGFnZVZpZXcucHJvdG90eXBlLERPTVdhdGNoZXIpO1xuICAgIHJldHVybiBQYWdlVmlldztcbn0pO1xuIiwiLypnbG9iYWwgZGVmaW5lKi9cbmRlZmluZSgndmlld3MvcGFydGlhbCcsIFtcbiAgICAgICdqcXVlcnknXG4gICAgLCAndW5kZXJzY29yZSdcbiAgICAsICdiYWNrYm9uZSdcbiAgICAsICdtaXhpbnMvZG9td2F0Y2hlcidcbiAgICAsICdtaXhpbnMvYXN5bmNJbml0J1xuXSwgZnVuY3Rpb24oJCxfLEJhY2tib25lLERPTVdhdGNoZXIsQXN5bmNJbml0KSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBQYXJ0aWFsVmlldyA9IEJhY2tib25lLlZpZXcuZXh0ZW5kKHtcbiAgICAgICAgZWw6ICcnLFxuICAgICAgICBwYWdlOiAnJyxcbiAgICAgICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24ob3B0cykge1xuICAgICAgICAgICAgdmFyIHRoYXQgID0gdGhpcztcbiAgICAgICAgICAgIHRoYXQuZWwgICA9IG9wdHMuZWw7XG4gICAgICAgICAgICB0aGF0LiRkZWYgPSAkLkRlZmVycmVkKCk7XG4gICAgICAgICAgICByZXF1aXJlKFsndGV4dCEnICsgb3B0cy5wYWdlXSwgZnVuY3Rpb24oaHRtbCkge1xuICAgICAgICAgICAgICAgIHRoYXQucGFnZSA9IGh0bWw7XG4gICAgICAgICAgICAgICAgdGhhdC4kZGVmLnJlc29sdmUodGhhdCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgcmVuZGVyOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgJHdhdGNoRGVmID0gJC5EZWZlcnJlZCgpO1xuICAgICAgICAgICAgdGhhdC5pbml0KCkudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAkKHRoYXQuZWwpLmFwcGVuZCh0aGF0LnBhZ2UpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLndhdGNoRE9NKDEwMDAsdGhhdC5lbCwkd2F0Y2hEZWYpO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgXy5leHRlbmQoUGFydGlhbFZpZXcucHJvdG90eXBlLERPTVdhdGNoZXIpO1xuICAgIF8uZXh0ZW5kKFBhcnRpYWxWaWV3LnByb3RvdHlwZSxBc3luY0luaXQpO1xuICAgIHJldHVybiBQYXJ0aWFsVmlldztcbn0pO1xuIiwiLypnbG9iYWwgZGVmaW5lICovXG5kZWZpbmUoJ3JvdXRlcy9yb3V0ZXInLCBbXG4gICAgICAnanF1ZXJ5J1xuICAgICwgJ3VuZGVyc2NvcmUnXG4gICAgLCAnYmFja2JvbmUnXG4gICAgLCAnbW9kZWxzL2Vycm9yL3VzZXInXG4gICAgLCAndmlld3MvZXJyb3IvdXNlcidcbiAgICAsICd2aWV3cy9jbGVhcidcbiAgICAsICdjb250cm9sbGVycy9pc3N1ZSdcbiAgICAsICdjb250cm9sbGVycy9tYXAnXG4gICAgLCAndmlld3MvbWVudSdcbl0sIGZ1bmN0aW9uKCQsXyxCYWNrYm9uZSxVc2VyRXJyb3JNb2RlbCxVc2VyRXJyb3JWaWV3LENsZWFyVmlldyxJc3N1ZUNvbnRyb2xsZXIsTWFwQ29udHJvbGxlcixNZW51Vmlldykge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgUm91dGVyID0gQmFja2JvbmUuUm91dGVyLmV4dGVuZCh7XG4gICAgICAgICAgcGFnZXMgICA6IHt9ICAgLy8gY29uZmlnIGZvciBzdXBwb3J0ZWQgcGFnZXNcbiAgICAgICAgLCBjb25maWcgIDoge30gICAvLyBnbG9iYWwgc2l0ZSBjb25maWd1cmF0aW9uLCBpLmUuLCBzaXRlLmpzb25cbiAgICAgICAgLCBpc3N1ZUNvbnRyb2xsZXIgOiBudWxsIC8vIElzc3VlTW9kZWwgZm9yIHRoaXMgYXBwXG4gICAgICAgICwgbWFwQ29udHJvbGxlciAgIDogbnVsbFxuICAgICAgICAsIGluaXRpYWxpemU6IGZ1bmN0aW9uKG9wdHMpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ICAgID0gdGhpcztcbiAgICAgICAgICAgIHRoaXMuY29uZmlnID0gb3B0cy5jb25maWc7XG4gICAgICAgICAgICB0aGlzLnBhZ2VzICA9IG9wdHMuY29uZmlnLnBhZ2VzO1xuICAgICAgICAgICAgdGhpcy5pc3N1ZUNvbnRyb2xsZXIgPSBuZXcgSXNzdWVDb250cm9sbGVyKHtcbiAgICAgICAgICAgICAgICAgIHJvdXRlcjogdGhpc1xuICAgICAgICAgICAgICAgICwgY29uZmlnOiB0aGlzLmNvbmZpZyBcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5pc3N1ZUNvbnRyb2xsZXIuaW5pdCgpLmRvbmUoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgLy8gcGFnZXMucm91dGVyLmhpc3RvcnkgPSB0cnVlIGJ5IGRlZmF1bHQsIGlmIG1pc3NpbmdcbiAgICAgICAgICAgICAgICBpZiAoXy5oYXModGhhdC5wYWdlcy5yb3V0ZXIsJ2hpc3RvcnknKSAmJiAhIXRoYXQucGFnZXMucm91dGVyLmhpc3RvcnkpIHtcbiAgICAgICAgICAgICAgICAgICAgQmFja2JvbmUuaGlzdG9yeS5zdGFydCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgICwgbmF2aWdhdGU6IGZ1bmN0aW9uKGZyYWdtZW50LG9wdGlvbnMpIHtcbiAgICAgICAgICAgIGlmIChCYWNrYm9uZS5oaXN0b3J5LmZyYWdtZW50ID09PSBmcmFnbWVudCkgcmV0dXJuO1xuICAgICAgICAgICAgQmFja2JvbmUuaGlzdG9yeS5uYXZpZ2F0ZShmcmFnbWVudCxvcHRpb25zKTtcbiAgICAgICAgfVxuICAgICAgICAsIHBhZ2U6IGZ1bmN0aW9uKHBhZ2UpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIHZhciBwYWdlQ29uZmlnO1xuICAgICAgICAgICAgdmFyIG1hcFBhZ2UgPSBmYWxzZTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgaWYgKCFwYWdlKSBwYWdlID0gdGhpcy5wYWdlcy5ob21lO1xuICAgICAgICAgICAgICAgIHBhZ2VDb25maWcgPSB0aGlzLnBhZ2VzLnBhZ2VzW3BhZ2VdO1xuICAgICAgICAgICAgICAgIGlmIChwYWdlQ29uZmlnID09PSB1bmRlZmluZWQpIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBjb25maWcgaW4gcm91dGVyL3BhZ2UnKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wYWdlKCc0MDQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG5ldyBDbGVhclZpZXcoKS5yZW5kZXIoKTtcbiAgICAgICAgICAgIF8uZWFjaChwYWdlQ29uZmlnLCBmdW5jdGlvbihwYykge1xuICAgICAgICAgICAgICAgIHZhciB2aWV3TmFtZTtcbiAgICAgICAgICAgICAgICB2YXIgYXJncyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICBjb25maWc6IHRoYXQuY29uZmlnXG4gICAgICAgICAgICAgICAgICAgICwgaXNzdWU6ICB0aGF0Lmlzc3VlQ29udHJvbGxlci5tb2RlbFxuICAgICAgICAgICAgICAgICAgICAsIHJvdXRlcjogdGhhdFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgLy8gY2xvbmUgY29uZmlnIHRvIGF2b2lkIGdsb2JhbCBjaGFuZ2VzXG4gICAgICAgICAgICAgICAgdmFyIGNvbmZpZyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkocGMpKTtcbiAgICAgICAgICAgICAgICBpZiAoXy5oYXMoY29uZmlnLCAndmlldycpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZpZXdOYW1lID0gY29uZmlnLnZpZXc7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChfLmhhcyhjb25maWcsICdwYXJ0aWFsJykpIHtcbiAgICAgICAgICAgICAgICAgICAgdmlld05hbWUgPSAndmlld3MvcGFydGlhbCc7XG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZy5wYXJ0aWFsLnBhZ2UgPSB0aGF0LnBhZ2VzLnBhdGhCYXNlICsgY29uZmlnLnBhcnRpYWwucGFnZTtcbiAgICAgICAgICAgICAgICAgICAgYXJncyA9IF8uZXh0ZW5kKGFyZ3MsY29uZmlnLnBhcnRpYWwpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoXy5oYXMoY29uZmcsICdmdWxsJykpIHtcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBjb25maWcuZnVsbC5wYWdlO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbnN1cHBvcnRlZCBwYWdlIHR5cGUgaW4gcm91dGVyOiAnICsgcGFnZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh2aWV3TmFtZSA9PT0gJ3ZpZXdzL21hcCcpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5tYXBDb250cm9sbGVyID0gbmV3IE1hcENvbnRyb2xsZXIoYXJncyk7XG4gICAgICAgICAgICAgICAgICAgIG1hcFBhZ2UgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJlcXVpcmUoW3ZpZXdOYW1lXSwgZnVuY3Rpb24oVmlldykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHYgPSBuZXcgVmlldyhhcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHYucmVuZGVyKCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKCFtYXBQYWdlKSB0aGF0Lm1hcENvbnRyb2xsZXIgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgICwgYXJ0aWNsZSA6IGZ1bmN0aW9uKGlkKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgYXJncyA9IHtcbiAgICAgICAgICAgICAgICAgIGNvbmZpZzogdGhhdC5jb25maWdcbiAgICAgICAgICAgICAgICAsIGlzc3VlOiAgdGhhdC5pc3N1ZUNvbnRyb2xsZXIubW9kZWxcbiAgICAgICAgICAgICAgICAsIHJvdXRlcjogdGhhdFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmICgkKCcjdGl0bGVwYWdlJykubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICQoJyN0aXRsZXBhZ2UnKS5yZW1vdmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICgkKCcjcGFnZScpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAkKCcjcGFnZScpLnJlbW92ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoYXQubWFwQ29udHJvbGxlciA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRoYXQubWFwQ29udHJvbGxlciA9IG5ldyBNYXBDb250cm9sbGVyKGFyZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCQoJyNtZW51JykuY2hpbGRyZW4oKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICBuZXcgTWVudVZpZXcoYXJncykucmVuZGVyKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBzZWxlY3QgdGhlIGFydGljbGUgaW5kaWNhdGVkIGJ5IHRoZSB1cmwncyByb3V0ZSBvbmx5IGFmdGVyXG4gICAgICAgICAgICAvLyB0aGUgbWFwIGhhcyBpbml0aWFsaXplZFxuICAgICAgICAgICAgdGhhdC5tYXBDb250cm9sbGVyLmluaXQoKS5kb25lKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHZhciBhcnRpY2xlID0gdGhhdC5pc3N1ZUNvbnRyb2xsZXIubW9kZWwuZ2V0QXJ0aWNsZShpZCk7IFxuICAgICAgICAgICAgICAgIGFydGljbGUudHJpZ2dlcignYWN0aXZlJywgYXJ0aWNsZSk7XG4gICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIFJvdXRlcjtcbn0pO1xuIiwiLypnbG9iYWwgZGVmaW5lKi9cbmRlZmluZSgnY29udHJvbGxlcnMvbWFwL2xheWVyJywgW1xuICAgICAgJ2pxdWVyeSdcbiAgICAsICd1bmRlcnNjb3JlJ1xuICAgICwgJ2JhY2tib25lJ1xuICAgICwgJ2NvbnRyb2xsZXJzL3Byb3RvdHlwZSdcbiAgICAsICdjb250cm9sbGVycy9tYXAvbGF5ZXIvcGxhY2V0eXBlJ1xuICAgICwgJ2NvbnRyb2xsZXJzL21hcC9sYXllci90aW1lbGluZSdcbl0sIGZ1bmN0aW9uKCQsXyxCYWNrYm9uZSxDb250cm9sbGVyLFBsYWNlVHlwZUNvbnRyb2xsZXIsVGltZWxpbmVDb250cm9sbGVyKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBNYXBMYXllckNvbnRyb2xsZXIgPSBDb250cm9sbGVyLmV4dGVuZCh7XG4gICAgICAgICAgdmlldyAgIDogbnVsbFxuICAgICAgICAsIHJvdXRlciA6IG51bGxcbiAgICAgICAgLCBtYXAgICAgOiBudWxsXG4gICAgICAgICwgY29udHJvbHNjb25maWcgOiBudWxsXG4gICAgICAgICwgaW5pdGlhbGl6ZTogZnVuY3Rpb24oYXJncykge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgdGhhdC5tYXAgPSBhcmdzLm1hcDtcbiAgICAgICAgICAgIHRoYXQudmlldyA9IGFyZ3MudmlldztcbiAgICAgICAgICAgIHRoYXQubW9kZWwgPSBhcmdzLm1vZGVsO1xuICAgICAgICAgICAgdGhhdC5jb250cm9sc2NvbmZpZyA9IGFyZ3MuY29udHJvbHNjb25maWc7XG4gICAgICAgICAgICB0aGF0LnN1YkNvbnRyb2xsZXJzID0gW107XG4gICAgICAgICAgICBpZiAoXy5oYXModGhhdC5jb250cm9sc2NvbmZpZywgJ3BsYWNldHlwZScpICYmIHRoYXQuY29udHJvbHNjb25maWcucGxhY2V0eXBlLmVuYWJsZSkge1xuICAgICAgICAgICAgICAgIHRoYXQuc3ViQ29udHJvbGxlcnMucHVzaChuZXcgUGxhY2VUeXBlQ29udHJvbGxlcih7XG4gICAgICAgICAgICAgICAgICAgICAgdmlld3MgOiB0aGF0LnZpZXcubWFya2VyVmlld3NcbiAgICAgICAgICAgICAgICAgICAgLCBtYXAgICA6IHRoYXQudmlldy5tYXBcbiAgICAgICAgICAgICAgICAgICAgLCBtYXBjb25maWc6IHRoYXQubW9kZWwuYXR0cmlidXRlcy5tYXBjb25maWdcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoXy5oYXModGhhdC5jb250cm9sc2NvbmZpZywgJ3RpbWVsaW5lJykgJiYgdGhhdC5jb250cm9sc2NvbmZpZy50aW1lbGluZS5lbmFibGUpIHtcbiAgICAgICAgICAgICAgICB0aGF0LnN1YkNvbnRyb2xsZXJzLnB1c2gobmV3IFRpbWVsaW5lQ29udHJvbGxlcih7XG4gICAgICAgICAgICAgICAgICAgICAgbWFya2VyVmlld3MgOiB0aGF0LnZpZXcubWFya2VyVmlld3NcbiAgICAgICAgICAgICAgICAgICAgLCBtYXAgICAgICAgICA6IHRoYXQudmlldy5tYXBcbiAgICAgICAgICAgICAgICAgICAgLCBzaXRlY29uZmlnICA6IHRoYXQubW9kZWwuYXR0cmlidXRlcy5jb25maWdcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBfLmZvckVhY2godGhhdC5zdWJDb250cm9sbGVycywgZnVuY3Rpb24oc3ViQ29udHJvbGxlcikge1xuICAgICAgICAgICAgICAgIHRoYXQubGlzdGVuVG8oc3ViQ29udHJvbGxlciwgJ2ZpbHRlcicsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICB0aGF0Ll91cGRhdGVNYXJrZXJzKClcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIC8vIGZpbHRlciB0aGUgdmlzaWJsZSBtYXAgbWFya2VycyBiYXNlZCBvbiB0aGUgcGxhY2V0eXBlIGFuZCB0aGVcbiAgICAgICAgLy8gdGltZWxpbmUgbGF5ZXIgY29udHJvbHM7IHRoZSBcImhpZGVcIiBzdGF0ZSB0YWtlcyBwcmVjZWRlbmNlIGlmXG4gICAgICAgIC8vIHRoZSBjb250cm9scyBkaXNhZ3JlZSAoaS5lLiwgYSBtYXJrZXIgdGhhdCBpcyBoaWRkZW4gb24gYW55XG4gICAgICAgIC8vIGNvbnRyb2wgaXMgaGlkZGVuIG9uIHRoZSBtYXApXG4gICAgICAgICwgX3VwZGF0ZU1hcmtlcnM6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIHNob3cgPSBbXSwgaGlkZSA9IFtdO1xuICAgICAgICAgICAgXy5mb3JFYWNoKHRoYXQuc3ViQ29udHJvbGxlcnMsIGZ1bmN0aW9uKHN1YkNvbnRyb2xsZXIpe1xuICAgICAgICAgICAgICAgIHZhciByZXMgPSBzdWJDb250cm9sbGVyLmdldEZpbHRlclN0YXRlKCk7XG4gICAgICAgICAgICAgICAgaGlkZS5wdXNoKHJlcy5oaWRlKVxuICAgICAgICAgICAgICAgIGhpZGUgPSBfLmZsYXR0ZW4oaGlkZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIF8uZm9yRWFjaCh0aGF0LnZpZXcubWFya2VyVmlld3MsIGZ1bmN0aW9uKG1hcmtlclZpZXcpIHtcbiAgICAgICAgICAgICAgICB2YXIgZm91bmQgPSBfLmZpbmQoaGlkZSwgZnVuY3Rpb24oaGlkZGVuTGF5ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgaGlkZGVuTGF5ZXIgPT09IG1hcmtlclZpZXcubWFya2VyTGF5ZXJcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAoIWZvdW5kKVxuICAgICAgICAgICAgICAgICAgICBzaG93LnB1c2gobWFya2VyVmlldy5tYXJrZXJMYXllcik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIF8uZm9yRWFjaChzaG93LCBmdW5jdGlvbihtYXJrZXJMYXllcikge1xuICAgICAgICAgICAgICAgIHRoYXQudmlldy5tYXAuYWRkTGF5ZXIobWFya2VyTGF5ZXIpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBfLmZvckVhY2goaGlkZSwgZnVuY3Rpb24obWFya2VyTGF5ZXIpIHtcbiAgICAgICAgICAgICAgICB0aGF0LnZpZXcubWFwLnJlbW92ZUxheWVyKG1hcmtlckxheWVyKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIE1hcExheWVyQ29udHJvbGxlcjtcbn0pO1xuIiwiLypnbG9iYWwgZGVmaW5lKi9cbmRlZmluZSgnY29udHJvbGxlcnMvbWFwL3BhbicsIFtcbiAgICAgICdqcXVlcnknXG4gICAgLCAndW5kZXJzY29yZSdcbiAgICAsICdiYWNrYm9uZSdcbiAgICAsICdjb250cm9sbGVycy9wcm90b3R5cGUnXG4gICAgLCAnbWl4aW5zL2RvbXdhdGNoZXInXG5dLCBmdW5jdGlvbigkLF8sQmFja2JvbmUsQ29udHJvbGxlcixET01XYXRjaGVyKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBNYXBQYW5Db250cm9sbGVyID0gQ29udHJvbGxlci5leHRlbmQoe1xuICAgICAgICAgIG1hcDogbnVsbFxuICAgICAgICAsIG1hcGNvbmZpZzogbnVsbFxuICAgICAgICAsIGluaXRpYWxpemU6IGZ1bmN0aW9uKGFyZ3MpIHtcbiAgICAgICAgICAgIHRoaXMubWFwID0gYXJncy5tYXA7XG4gICAgICAgICAgICB0aGlzLm1hcGNvbmZpZyA9IGFyZ3MubWFwY29uZmlnO1xuICAgICAgICAgICAgaWYgKCF0aGlzLm1hcClcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbmluaXRpYWxpemVkIG1hcFwiKTtcbiAgICAgICAgfVxuICAgICAgICAsIF9maXRNYXJrZXJCb3VuZHMgOiBmdW5jdGlvbihtYXJrZXJWaWV3cykge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIGVsdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhcnRpY2xlJyk7XG4gICAgICAgICAgICBpZiAoIWVsdCkgcmV0dXJuO1xuICAgICAgICAgICAgdmFyIGVkZ2VQdFggPSBMLkRvbVV0aWwuZ2V0Vmlld3BvcnRPZmZzZXQoZWx0KS54O1xuICAgICAgICAgICAgdmFyIGJvdW5kcyA9IEwubGF0TG5nQm91bmRzKF8ubWFwKG1hcmtlclZpZXdzLGZ1bmN0aW9uKG1hcmtlclZpZXcpIHtcbiAgICAgICAgICAgICAgICB2YXIgbG5nTGF0ID0gbWFya2VyVmlldy5tb2RlbC5nZXRHZW9qc29uKCkuZ2VvbWV0cnkuY29vcmRpbmF0ZXMuc2xpY2UoMCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIEwubGF0TG5nKGxuZ0xhdC5yZXZlcnNlKCkpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgaWYgKGVkZ2VQdFggPT09IDApIHtcbiAgICAgICAgICAgICAgICB0aGF0Lm1hcC5maXRCb3VuZHMoYm91bmRzKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZWRnZVB0WCAhPSB0aGF0Lm1hcC5nZXRTaXplKCkueCkge1xuICAgICAgICAgICAgICAgIC8vIG1hcCB1bmRlcm5lYXRoIGFydGljbGVcbiAgICAgICAgICAgICAgICB0aGF0Lm1hcC5maXRCb3VuZHMoYm91bmRzLCB7XG4gICAgICAgICAgICAgICAgICAgICdwYWRkaW5nQm90dG9tUmlnaHQnIDogW2RvY3VtZW50LmJvZHkuY2xpZW50V2lkdGggLSBlZGdlUHRYLDBdXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIG1hcCBiZXNpZGUgYXJ0aWNsZVxuICAgICAgICAgICAgICAgIHRoYXQubWFwLmZpdEJvdW5kcyhib3VuZHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhhdC5tYXAuaW52YWxpZGF0ZVNpemUoKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBhZGp1c3QgbWFwIHBhbi96b29tIHRvIG1ha2UgYWxsIG1hcCBtYXJrZXJzIG9jY3VyIHRvIHRoZVxuICAgICAgICAvLyBsZWZ0IG9mIGRpdiNhcnRpY2xlIGluIHdpZGUgbW9kZVxuICAgICAgICAsIGZpdE1hcmtlckJvdW5kcyA6IGZ1bmN0aW9uKG1hcmtlclZpZXdzKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgJGRlZiA9ICQuRGVmZXJyZWQoKTtcbiAgICAgICAgICAgICRkZWYudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoYXQubWFwY29uZmlnLnZpZXcpIHtcbiAgICAgICAgICAgICAgICAgIHRoYXQuX2ZpdE1hcmtlckJvdW5kcyhtYXJrZXJWaWV3cyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLndhdGNoRE9NKDEwMDAsJyNhcnRpY2xlJywkZGVmKTtcbiAgICAgICAgfVxuICAgICAgICAsIGhhbmRsZVBvcHVwUG9zaXRpb24gOiBmdW5jdGlvbihwb3B1cCkge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIG1hcCA9IHRoYXQubWFwO1xuICAgICAgICAgICAgdmFyIGlkID0gJChwb3B1cC5nZXRDb250ZW50KCkpLmF0dHIoJ2lkJyk7XG4gICAgICAgICAgICB2YXIgZWRnZVB0WCwgJHBvcHVwV3JhcCwgcG9wdXBMYXRMbmcsIHBvcHVwUmlnaHRYLCBwYWQ7XG4gICAgICAgICAgICBwb3B1cExhdExuZyA9IHBvcHVwLmdldExhdExuZygpO1xuICAgICAgICAgICAgaWYgKHBvcHVwTGF0TG5nID09PSB1bmRlZmluZWQpIHJldHVybjtcbiAgICAgICAgICAgIGVkZ2VQdFggPSBMLkRvbVV0aWwuZ2V0Vmlld3BvcnRPZmZzZXQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FydGljbGUnKSkueDtcbiAgICAgICAgICAgIC8vIG1hcCBzaG91bGQgcGFuIHJpZ2h0L2Vhc3QgaWYgdGhlIHBvcHVwIGJhbGxvb24gaXMgY292ZXJlZCBieSB0aGUgYXJ0aWNsZTtcbiAgICAgICAgICAgIC8vIHBhZCBpcyBhIHNsaWdodCByZWxpZWYgYmV0d2VlbiB0aGUgcG9wdXAgYW5kIHRoZSBhcnRpY2xlXG4gICAgICAgICAgICAkcG9wdXBXcmFwID0gJCgnIycgKyBpZCkuY2xvc2VzdCgnLmxlYWZsZXQtcG9wdXAtY29udGVudC13cmFwcGVyJykuZmlyc3QoKTtcbiAgICAgICAgICAgIHBhZCA9IEwucG9pbnQocG9wdXAub3B0aW9ucy5hdXRvUGFuUGFkZGluZ0JvdHRvbVJpZ2h0IHx8IHBvcHVwLm9wdGlvbnMuYXV0b1BhblBhZGRpbmcpO1xuICAgICAgICAgICAgcGFkID0gcGFkID8gcGFkLnggOiAwO1xuICAgICAgICAgICAgcG9wdXBSaWdodFggPSAoJHBvcHVwV3JhcC5sZW5ndGggPiAwKVxuICAgICAgICAgICAgICAgID8gJHBvcHVwV3JhcC5vZmZzZXQoKS5sZWZ0ICsgJHBvcHVwV3JhcC53aWR0aCgpICsgcGFkXG4gICAgICAgICAgICAgICAgOiAwO1xuICAgICAgICAgICAgaWYgKGVkZ2VQdFggIT0gMCAmJiBwb3B1cFJpZ2h0WCA+IGVkZ2VQdFggJiYgZWRnZVB0WCAhPSBtYXAuZ2V0U2l6ZSgpLngpIHtcbiAgICAgICAgICAgICAgICBtYXAucGFuQnkoW3BvcHVwUmlnaHRYIC0gZWRnZVB0WCwwXSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKCFtYXAuZ2V0Qm91bmRzKCkuY29udGFpbnMocG9wdXAuZ2V0TGF0TG5nKCkpKSB7XG4gICAgICAgICAgICAgICAgbWFwLmNsb3NlUG9wdXAocG9wdXApO1xuICAgICAgICAgICAgICAgIG1hcC5vcGVuUG9wdXAocG9wdXApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG4gICAgXy5leHRlbmQoTWFwUGFuQ29udHJvbGxlci5wcm90b3R5cGUsRE9NV2F0Y2hlcik7XG4gICAgcmV0dXJuIE1hcFBhbkNvbnRyb2xsZXI7XG59KTtcbiIsIi8qZ2xvYmFsIGRlZmluZSAqL1xuZGVmaW5lKCdtb2RlbHMvZXJyb3IvdXNlcicsIFtcbiAgICAnYmFja2JvbmUnXG5dLCBmdW5jdGlvbihCYWNrYm9uZSkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgVXNlckVycm9yTW9kZWwgPSBCYWNrYm9uZS5Nb2RlbC5leHRlbmQoe1xuICAgICAgICBkZWZhdWx0czoge1xuICAgICAgICAgICAgXCJtc2dcIiA6IFwiXCJcbiAgICAgICAgfSxcbiAgICAgICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24oYXJncykge1xuICAgICAgICAgICAgdGhpcy5zZXQoJ21zZycsIGFyZ3MubWVzc2FnZSk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gVXNlckVycm9yTW9kZWw7XG59KTtcbiIsIi8qZ2xvYmFsIGRlZmluZSovXG5kZWZpbmUoJ3ZpZXdzL2FydGljbGUvZ2FsbGVyeScsIFtcbiAgICAgICdqcXVlcnknXG4gICAgLCAndW5kZXJzY29yZSdcbiAgICAsICdiYWNrYm9uZSdcbiAgICAsICd2aWV3cy9hcnRpY2xlL2dhbGxlcnkvcG9wb3ZlcidcbiAgICAsICd2aWV3cy9hcnRpY2xlL2dhbGxlcnkvbGlnaHRib3gnXG4gICAgLCAndmlld3MvYXJ0aWNsZS9nYWxsZXJ5L3NsaWRlcydcbl0sIGZ1bmN0aW9uKCQsXyxCYWNrYm9uZSxBcnRpY2xlR2FsbGVyeVBvcG92ZXJWaWV3LEFydGljbGVHYWxsZXJ5TGlnaHRib3hWaWV3LEFydGljbGVHYWxsZXJ5U2xpZGVzVmlldykge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgQXJ0aWNsZUdhbGxlcnlWaWV3ID0gQmFja2JvbmUuVmlldy5leHRlbmQoe1xuICAgICAgICAgIGlkOiAnYXJ0aWNsZSdcbiAgICAgICAgLCBpbml0aWFsaXplOiBmdW5jdGlvbigpIHt9XG4gICAgICAgICwgcmVtb3ZlOiBmdW5jdGlvbigpIHsgLyogcmV0YWluICovfVxuICAgICAgICAsIHJlbmRlcjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgLy8gYWRqdXN0IGhlaWdodCBvZiBhcnRpY2xlIGJvZHlcbiAgICAgICAgICAgIC8vIFRPRE86IGhhbmRsZSBpbiBjc3NcbiAgICAgICAgICAgIHZhciBoZWlnaHQgPSAkKCcjYXJ0aWNsZSBhcnRpY2xlJykuaGVpZ2h0KCkgLSAkKCcjaGVhZGVyJykub3V0ZXJIZWlnaHQodHJ1ZSk7XG4gICAgICAgICAgICAkKCcjYm9keScpLmNzcyh7aGVpZ2h0OmhlaWdodH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyByZW1vdmUgaW1hZ2VzIHRoYXQgZmFpbCB0byBsb2FkLCBzaW5jZSB3ZSBjYW5ub3QgZG9cbiAgICAgICAgICAgIC8vIGEgZmlsZSB0ZXN0IHdoZW4gcnVubmluZyB0aGUgeHNsXG4gICAgICAgICAgICB2YXIgZGVmcyA9IFtdO1xuICAgICAgICAgICAgJCgnaW1nLnNsaWRlc2pzLXNsaWRlJykuZWFjaChmdW5jdGlvbihpLGltZyl7XG4gICAgICAgICAgICAgICAgdmFyICRkZWYgPSAkLkRlZmVycmVkKCk7XG4gICAgICAgICAgICAgICAgJChpbWcpLmxvYWQoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgJChpbWcpLnJlbW92ZUNsYXNzKCdyZW1vdmUnKTtcbiAgICAgICAgICAgICAgICAgICAgJGRlZi5yZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgJChpbWcpLmVycm9yKGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgIC8vIGFsbG93IHNvbWUgdGltZSBiZWZvcmUgZmFpbHVyZVxuICAgICAgICAgICAgICAgICAgICB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICAgICAgJGRlZi5yZWplY3QoKTtcbiAgICAgICAgICAgICAgICAgICAgfSw1MDApO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGRlZnMucHVzaCgkZGVmKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgJC53aGVuLmFwcGx5KHt9LGRlZnMpLmFsd2F5cyhmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICQoJ2ltZy5zbGlkZXNqcy1zbGlkZS5yZW1vdmUnKS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAkKCcuaW1hZ2UtbG9hZGluZycpLnJlbW92ZUNsYXNzKCdpbWFnZS1sb2FkaW5nJyk7XG4gICAgICAgICAgICAgICAgbmV3IEFydGljbGVHYWxsZXJ5UG9wb3ZlclZpZXcoKS5yZW5kZXIoKTtcbiAgICAgICAgICAgICAgICBuZXcgQXJ0aWNsZUdhbGxlcnlMaWdodGJveFZpZXcoKS5yZW5kZXIoKTtcbiAgICAgICAgICAgICAgICBuZXcgQXJ0aWNsZUdhbGxlcnlTbGlkZXNWaWV3KCkucmVuZGVyKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBBcnRpY2xlR2FsbGVyeVZpZXc7XG59KTtcbiIsIi8qZ2xvYmFsIGRlZmluZSovXG4vKlxuICogVGhpcyBpcyBtZWFudCB0byBiZSBleHRlbmRlZCBhcyBhbiBhYnN0cmFjdCBiYXNlIGNsYXNzIGZvciB0aGVcbiAqIHNlY3Rpb25zIG9mIGFuIGFydGljbGUuXG4gKi9cbmRlZmluZSgndmlld3MvYXJ0aWNsZS9tZW51JywgW1xuICAgICdqcXVlcnknLCBcbiAgICAndW5kZXJzY29yZScsIFxuICAgICdiYWNrYm9uZScsXG4gICAgJ21peGlucy94bWwyaHRtbCcsXG4gICAgJ3RleHQheHNsL2FydGljbGUtbWVudS54c2wnXG5dLCBmdW5jdGlvbigkLF8sQmFja2JvbmUsWE1MMkhUTUwsYW1Yc2wpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIEFydGljbGVNZW51VmlldyA9IEJhY2tib25lLlZpZXcuZXh0ZW5kKHtcbiAgICAgICAgcmVuZGVyOiBmdW5jdGlvbihwYXJhbXMpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIC8vIHRoaXMgdmlldyBpcyBtZWFudCB0byBiZSBjYWxsZWQgb25seSBhZnRlciB0aGUgY29ycmVzcG9uZGluZ1xuICAgICAgICAgICAgLy8gYXJ0aWNsZSBtb2RlbCBoYXMgYmVlbiBpbml0aWFsaXplZFxuICAgICAgICAgICAgaWYgKHRoaXMubW9kZWwuaW5pdCgpLnN0YXRlKCkgIT09ICdyZXNvbHZlZCcpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBcIlVuaW5pdGlhbGl6ZWQgYXJ0aWNsZSBpbiBBcnRpY2xlTWVudVZpZXdcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBtZW51aXRlbSA9IHRoYXQueG1sMmh0bWwodGhhdC5tb2RlbC5nZXQoJ3htbCcpLCBhbVhzbCwgcGFyYW1zKTtcbiAgICAgICAgICAgIHJldHVybiBtZW51aXRlbTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIF8uZXh0ZW5kKEFydGljbGVNZW51Vmlldy5wcm90b3R5cGUsWE1MMkhUTUwpO1xuICAgIHJldHVybiBBcnRpY2xlTWVudVZpZXc7XG59KTtcbiIsIi8qZ2xvYmFsIGRlZmluZSovXG5kZWZpbmUoJ3ZpZXdzL2Vycm9yL3VzZXInLCBbXG4gICAgJ2pxdWVyeScsIFxuICAgICdiYWNrYm9uZScsIFxuICAgICd0ZXh0IXBhcnRpYWxzL2Vycm9yL3VzZXIuaHRtbCdcbl0sIGZ1bmN0aW9uKCQsQmFja2JvbmUsdG1wbCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgVXNlckVycm9yVmlldyA9IEJhY2tib25lLlZpZXcuZXh0ZW5kKHtcbiAgICAgICAgdGVtcGxhdGU6IF8udGVtcGxhdGUodG1wbCksXG4gICAgICAgIGVsOiAkKCcjZXJyb3JEaWFsb2cnKSxcbiAgICAgICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICAgICAgfSxcbiAgICAgICAgcmVuZGVyOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLiRlbC5odG1sKHRoaXMudGVtcGxhdGUodGhpcy5tb2RlbC5hdHRyaWJ1dGVzKSk7XG4gICAgICAgICAgICB0aGlzLiRlbC5tb2RhbCh7a2V5Ym9hcmQ6IHRydWUsIHNob3c6IHRydWV9KTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIFVzZXJFcnJvclZpZXc7XG59KTtcbiIsIi8qZ2xvYmFsIGRlZmluZSovXG5kZWZpbmUoJ2NvbnRyb2xsZXJzL21hcC9sYXllci9wbGFjZXR5cGUnLCBbXG4gICAgICAnanF1ZXJ5J1xuICAgICwgJ3VuZGVyc2NvcmUnXG4gICAgLCAnYmFja2JvbmUnXG4gICAgLCAnY29udHJvbGxlcnMvcHJvdG90eXBlJ1xuICAgICwgJ3RleHQhcGFydGlhbHMvbWFya2VyLWxlZ2VuZC5odG1sJ1xuXSwgZnVuY3Rpb24oJCxfLEJhY2tib25lLENvbnRyb2xsZXIsbGVnZW5kUGFydGlhbCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgUGxhY2V0eXBlQ29udHJvbGxlciA9IENvbnRyb2xsZXIuZXh0ZW5kKHtcbiAgICAgICAgICB2aWV3cyAgOiBudWxsXG4gICAgICAgICwgcm91dGVyIDogbnVsbFxuICAgICAgICAsIG1hcCAgICA6IG51bGxcbiAgICAgICAgLCBjb250cm9sIDogbnVsbFxuICAgICAgICAsIGluaXRpYWxpemU6IGZ1bmN0aW9uKGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIHRoYXQudmlld3MgPSBhcmdzLnZpZXdzO1xuICAgICAgICAgICAgdGhhdC5tYXAgPSBhcmdzLm1hcDtcbiAgICAgICAgICAgIHRoYXQubWFwY29uZmlnID0gYXJncy5tYXBjb25maWc7XG4gICAgICAgICAgICB2YXIgbGVnZW5kVGVtcGwgPSBfLnRlbXBsYXRlKGxlZ2VuZFBhcnRpYWwpO1xuICAgICAgICAgICAgdmFyIGxheWVyTWFya2VycyA9IF8uZ3JvdXBCeSh0aGF0LnZpZXdzLCBmdW5jdGlvbihtYXJrZXJWaWV3KXtcbiAgICAgICAgICAgICAgICByZXR1cm4gbWFya2VyVmlldy5tb2RlbC5nZXRHZW9qc29uKCkucHJvcGVydGllcy5sYXllcjtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdmFyIGNvbnRyb2wgPSB0aGF0LmNvbnRyb2wgPSBMLmNvbnRyb2wubGF5ZXJzKG51bGwsIG51bGwsIHRoYXQubWFwY29uZmlnLmNvbnRyb2wubGF5ZXJzLm9wdGlvbnMpLmFkZFRvKHRoYXQubWFwKTtcbiAgICAgICAgICAgIC8vIGRpc2FibGUgbW91c2VvdmVyL21vdXNlb3V0IGV2ZW50cyBmb3IgdGhpcyBjb250cm9sLCB3aGljaCBhcmUgc2V0IGJ5IGRlZmF1bHQgaW5cbiAgICAgICAgICAgIC8vIExlYWZsZXQ7IGVuYWJsZXMgJ2NsaWNrJyBjb250cm9sXG4gICAgICAgICAgICB2YXIgY29udGFpbmVyID0gY29udHJvbC5nZXRDb250YWluZXIoKTtcbiAgICAgICAgICAgIF8uZm9yRWFjaChPYmplY3Qua2V5cyhjb250YWluZXIpLCBmdW5jdGlvbihrZXkpe1xuICAgICAgICAgICAgICAgIGlmIChrZXkubWF0Y2goJ21vdXNlb3ZlcicpKVxuICAgICAgICAgICAgICAgICAgICBjb250YWluZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2VvdmVyJywgY29udGFpbmVyW2tleV0pO1xuICAgICAgICAgICAgICAgIGlmIChrZXkubWF0Y2goJ21vdXNlb3V0JykpXG4gICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lci5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW91dCcsIGNvbnRhaW5lcltrZXldKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gaW4gU2FmYXJpLCBsYXllciBjb250cm9sIGJ1dHRvbiBkb2VzIG5vdCByZWNlaXZlICdmb2N1cycgZXZlbnQgb24gY2xpY2tcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgTC5Eb21FdmVudC5vbigkKCcubGVhZmxldC1jb250cm9sLWxheWVycy10b2dnbGUnKVswXSwgJ2NsaWNrJywgY29udHJvbC5fZXhwYW5kLCBjb250cm9sKTtcbiAgICAgICAgICAgIF8uZWFjaChfLmtleXMobGF5ZXJNYXJrZXJzKSwgZnVuY3Rpb24obGF5ZXJOYW1lKSB7XG4gICAgICAgICAgICAgICAgdmFyIGtsYXNzID0gbGF5ZXJOYW1lLnJlcGxhY2UoL1xccysvZywgJy0nKTtcbiAgICAgICAgICAgICAgICB2YXIgbGF5ZXJMZWdlbmQgPSBsZWdlbmRUZW1wbCh7XG4gICAgICAgICAgICAgICAgICAgICAgaWNvblVybDogbGF5ZXJNYXJrZXJzW2xheWVyTmFtZV1bMF0ubW9kZWwuZ2V0KCdpY29uVXJsJylcbiAgICAgICAgICAgICAgICAgICAgLCB0aXRsZSAgOiBsYXllck5hbWVcbiAgICAgICAgICAgICAgICAgICAgLCBrbGFzcyAgOiBrbGFzc1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHZhciBtYXJrZXJMYXllcnMgPSBfLm1hcChsYXllck1hcmtlcnNbbGF5ZXJOYW1lXSwgZnVuY3Rpb24odmlldyl7IHJldHVybiB2aWV3Lm1hcmtlckxheWVyOyB9KTtcbiAgICAgICAgICAgICAgICB2YXIgbGF5ZXIgPSBMLmxheWVyR3JvdXAobWFya2VyTGF5ZXJzKTtcbiAgICAgICAgICAgICAgICBjb250cm9sLmFkZE92ZXJsYXkobGF5ZXIsbGF5ZXJMZWdlbmQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAkKCdpbnB1dC5sZWFmbGV0LWNvbnRyb2wtbGF5ZXJzLXNlbGVjdG9yJykuZWFjaChmdW5jdGlvbihpLGVsdCkge1xuICAgICAgICAgICAgICAgJChlbHQpLmNsaWNrKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnRyb2wubWFwTGF5ZXJDb250cm9sbGVyID0gdGhhdDtcbiAgICAgICAgICAgIGNvbnRyb2wuX29uSW5wdXRDbGljayA9IHRoYXQuX29uSW5wdXRDbGljaztcbiAgICAgICAgfVxuICAgICAgICAsIGdldEZpbHRlclN0YXRlIDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgc2hvdzogKHRoaXMuc2hvdyB8fCBbXSlcbiAgICAgICAgICAgICAgICAsIGhpZGU6ICh0aGlzLmhpZGUgfHwgW10pXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIC8vIFRPRE86IGRvIG5vdCBvdmVycmlkZSB0aGlzIHByaXZhdGUgbWV0aG9kOyBzYWZlciB0byByZXBsYWNlXG4gICAgICAgIC8vICBMLmNvbnRyb2wubGF5ZXJzKCkgd2l0aCBhIGN1c3RvbSBjb250cm9sXG4gICAgICAgICwgX29uSW5wdXRDbGljazogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgY29udHJvbCA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgc2hvdyA9IFtdLCBoaWRlID0gW107XG4gICAgXHRcdHZhciBpLCBpbnB1dCwgb2JqLFxuICAgIFx0XHQgICAgaW5wdXRzID0gY29udHJvbC5fZm9ybS5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaW5wdXQnKSxcbiAgICBcdFx0ICAgIGlucHV0c0xlbiA9IGlucHV0cy5sZW5ndGg7XG4gICAgXHRcdGNvbnRyb2wuX2hhbmRsaW5nQ2xpY2sgPSB0cnVlO1xuICAgIFx0XHRmb3IgKGkgPSAwOyBpIDwgaW5wdXRzTGVuOyBpKyspIHtcbiAgICBcdFx0XHRpbnB1dCA9IGlucHV0c1tpXTtcbiAgICBcdFx0XHRvYmogPSBjb250cm9sLl9sYXllcnNbaW5wdXQubGF5ZXJJZF07XG4gICAgXHRcdFx0aWYgKGlucHV0LmNoZWNrZWQpIHtcbiAgICBcdFx0XHRcdG9iai5sYXllci5nZXRMYXllcnMoKS5mb3JFYWNoKGZ1bmN0aW9uKGxheWVyKSB7XG4gICAgXHRcdFx0XHQgICAgc2hvdy5wdXNoKGxheWVyKTtcbiAgICBcdFx0XHQgICAgfSk7XG4gICAgXHRcdFx0fSBlbHNlIHtcbiAgICBcdFx0XHRcdG9iai5sYXllci5nZXRMYXllcnMoKS5mb3JFYWNoKGZ1bmN0aW9uKGxheWVyKSB7XG4gICAgXHRcdFx0XHQgICAgaGlkZS5wdXNoKGxheWVyKTtcbiAgICBcdFx0XHQgICAgfSk7XG4gICAgXHRcdFx0fVxuICAgIFx0XHR9XG4gICAgXHRcdGNvbnRyb2wuX2hhbmRsaW5nQ2xpY2sgPSBmYWxzZTtcbiAgICBcdFx0Y29udHJvbC5fcmVmb2N1c09uTWFwKCk7XG4gICAgXHRcdGNvbnRyb2wubWFwTGF5ZXJDb250cm9sbGVyLnNob3cgPSBzaG93O1xuICAgIFx0XHRjb250cm9sLm1hcExheWVyQ29udHJvbGxlci5oaWRlID0gaGlkZTtcbiAgICBcdFx0Y29udHJvbC5tYXBMYXllckNvbnRyb2xsZXIudHJpZ2dlcignZmlsdGVyJyk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gUGxhY2V0eXBlQ29udHJvbGxlcjtcbn0pO1xuIiwiLypnbG9iYWwgZGVmaW5lKi9cbmRlZmluZSgnY29udHJvbGxlcnMvbWFwL2xheWVyL3RpbWVsaW5lJywgW1xuICAgICAgJ2pxdWVyeSdcbiAgICAsICd1bmRlcnNjb3JlJ1xuICAgICwgJ2JhY2tib25lJ1xuICAgICwgJ2NvbnRyb2xsZXJzL3Byb3RvdHlwZSdcbiAgICAsICd2aWV3cy9tYXAvbGF5ZXIvdGltZWxpbmUnXG4gICAgLCAnbW9kZWxzL21hcC9sYXllci90aW1lbGluZSdcbl0sIGZ1bmN0aW9uKCQsXyxCYWNrYm9uZSxDb250cm9sbGVyLFRpbWVsaW5lVmlldyxUaW1lbGluZU1vZGVsKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBNYXBUaW1lbGluZUNvbnRyb2xsZXIgPSBDb250cm9sbGVyLmV4dGVuZCh7XG4gICAgICAgICAgbWFwICAgIDogbnVsbFxuICAgICAgICAsIG1vZGVsICA6IG51bGxcbiAgICAgICAgLCB2aWV3ICAgOiBudWxsXG4gICAgICAgICwgc2l0ZWNvbmZpZzogbnVsbFxuICAgICAgICAsIG1hcmtlclZpZXdzOiBudWxsXG4gICAgICAgICwgaW5pdGlhbGl6ZTogZnVuY3Rpb24oYXJncykge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgdGhhdC52aWV3cyA9IGFyZ3Mudmlld3M7XG4gICAgICAgICAgICB0aGF0Lm1hcCA9IGFyZ3MubWFwO1xuICAgICAgICAgICAgdGhhdC5tYXJrZXJWaWV3cyA9IGFyZ3MubWFya2VyVmlld3M7XG4gICAgICAgICAgICB0aGF0Lm1vZGVsID0gbmV3IFRpbWVsaW5lTW9kZWwoe1xuICAgICAgICAgICAgICAgICAgc2l0ZWNvbmZpZyAgOiBhcmdzLnNpdGVjb25maWdcbiAgICAgICAgICAgICAgICAsIG1hcmtlclZpZXdzIDogYXJncy5tYXJrZXJWaWV3c1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGF0LnZpZXcgPSBuZXcgVGltZWxpbmVWaWV3KHtcbiAgICAgICAgICAgICAgICAgIG1vZGVsIDogdGhhdC5tb2RlbFxuICAgICAgICAgICAgICAgICwgbWFwICAgOiB0aGF0Lm1hcFxuICAgICAgICAgICAgICAgICwgbWFya2VyVmlld3MgOiBhcmdzLm1hcmtlclZpZXdzXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIHJlc3VsdHMuY2xlYXIgaXMgYSBmbGFnIHRoYXQgdGhlIGJydXNoIGlzIGVtcHR5XG4gICAgICAgICAgICAvLyByZXN1bHRzLmluY2wgaXMgYW4gYXJyYXkgb2YgTWFwVGltZWxpbmVJdGVtJ3NcbiAgICAgICAgICAgIC8vIHRyaWdnZXIgc2hvdy9oaWRlIG9uIGxpc3RzIG9mIEFydGljbGVNb2RlbCdzXG4gICAgICAgICAgICB0aGF0Lmxpc3RlblRvKHRoYXQudmlldywgJ2ZpbHRlcicsIHRoYXQuX2hhbmRsZUZpbHRlckV2ZW50KTtcbiAgICAgICAgICAgIHRoYXQudmlldy5yZW5kZXIoKTtcbiAgICAgICAgfVxuICAgICAgICAsIF9oYW5kbGVGaWx0ZXJFdmVudCA6IGZ1bmN0aW9uKHJlc3VsdHMpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIHZhciBzaG93TGF5ZXJzID0gW10sIGhpZGVMYXllcnMgPSBbXSwgc2hvd0lkcyA9IHt9O1xuICAgICAgICAgICAgaWYgKHJlc3VsdHMuY2xlYXIpIHtcbiAgICAgICAgICAgICAgICBzaG93TGF5ZXJzID0gXy5tYXAodGhhdC5tYXJrZXJWaWV3cywgZnVuY3Rpb24obWFya2VyVmlldykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWFya2VyVmlldy5tYXJrZXJMYXllcjtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc2hvd0xheWVycyA9IF8ubWFwKHJlc3VsdHMuc2VsZWN0ZWQsIGZ1bmN0aW9uKGl0ZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgc2hvd0lkc1tpdGVtLm1hcmtlclZpZXcubW9kZWwuY2lkXSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW0ubWFya2VyVmlldy5tYXJrZXJMYXllcjtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBoaWRlTGF5ZXJzID0gXy5tYXAoXy5maWx0ZXIodGhhdC5tYXJrZXJWaWV3cywgZnVuY3Rpb24obWFya2VyVmlldykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gIShtYXJrZXJWaWV3Lm1vZGVsLmNpZCBpbiBzaG93SWRzKTtcbiAgICAgICAgICAgICAgICB9KSwgZnVuY3Rpb24obWFya2VyVmlldykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWFya2VyVmlldy5tYXJrZXJMYXllcjtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoYXQuc2hvdyA9IHNob3dMYXllcnM7XG4gICAgICAgICAgICB0aGF0LmhpZGUgPSBoaWRlTGF5ZXJzO1xuICAgICAgICAgICAgdGhhdC50cmlnZ2VyKCdmaWx0ZXInKTtcbiAgICAgICAgfVxuICAgICAgICAsIGdldEZpbHRlclN0YXRlIDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgc2hvdzogKHRoaXMuc2hvdyB8fCBbXSlcbiAgICAgICAgICAgICAgICAsIGhpZGU6ICh0aGlzLmhpZGUgfHwgW10pXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIE1hcFRpbWVsaW5lQ29udHJvbGxlcjtcbn0pO1xuIiwiLypnbG9iYWwgZGVmaW5lICovXG5kZWZpbmUoJ21vZGVscy9tYXAvbGF5ZXIvdGltZWxpbmUnLCBbXG4gICAgICAnanF1ZXJ5J1xuICAgICwgJ3VuZGVyc2NvcmUnXG4gICAgLCAnYmFja2JvbmUnXG4gICAgLCAnY29sbGVjdGlvbnMvdGltZWxpbmUnXG4gICAgLCAnbW9kZWxzL21hcC9sYXllci90aW1lbGluZS9pdGVtJ1xuICAgICwgJ21peGlucy9hc3luY0luaXQnXG5dLCBmdW5jdGlvbigkLF8sQmFja2JvbmUsVGltZWxpbmVDb2xsZWN0aW9uLFRpbWVsaW5lSXRlbSxBc3luY0luaXQpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIFRpbWVsaW5lTW9kZWwgPSBCYWNrYm9uZS5Nb2RlbC5leHRlbmQoe1xuICAgICAgICAgIG1hcmtlclZpZXdzOiBudWxsXG4gICAgICAgICwgc3RhcnQ6IG51bGxcbiAgICAgICAgLCBlbmQ6IG51bGxcbiAgICAgICAgLCBzaXRlY29uZmlnIDogbnVsbFxuICAgICAgICAsIGJvb2tjb25maWcgOiBudWxsXG4gICAgICAgICwgaW5pdGlhbGl6ZTogZnVuY3Rpb24oYXJncykge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgdGhhdC5tYXJrZXJWaWV3cyA9IGFyZ3MubWFya2VyVmlld3M7XG4gICAgICAgICAgICB0aGF0LnNpdGVjb25maWcgPSBhcmdzLnNpdGVjb25maWc7XG4gICAgICAgICAgICB0aGF0LiRkZWYgPSAkLkRlZmVycmVkKCk7XG4gICAgICAgICAgICAkLmdldEpTT04odGhhdC5zaXRlY29uZmlnLmJvb2suZmlsZSwgZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgIHRoYXQuYm9va2NvbmZpZyA9IGRhdGEuYm9vaztcbiAgICAgICAgICAgICAgICB0aGF0Ll9pbml0aWFsaXplKCk7XG4gICAgICAgICAgICAgICAgdGhhdC4kZGVmLnJlc29sdmUodGhhdCk7XG4gICAgICAgICAgICB9KS5mYWlsKGZ1bmN0aW9uKGpxeGhyLCB0ZXh0U3RhdHVzLCBlcnJvcikge1xuICAgICAgICAgICAgICAgIHRoYXQuJGRlZi5yZWplY3QoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgICwgX2luaXRpYWxpemUgOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIHZhciBjb2wgPSBuZXcgVGltZWxpbmVDb2xsZWN0aW9uKCk7XG4gICAgICAgICAgICB0aGF0LnNldCgnY29sbGVjdGlvbicsIGNvbCk7XG4gICAgICAgICAgICBfLmZvckVhY2godGhhdC5tYXJrZXJWaWV3cywgZnVuY3Rpb24obWFya2VyVmlldykge1xuICAgICAgICAgICAgICAgIHZhciBtb2RlbCA9IG1hcmtlclZpZXcubW9kZWw7XG4gICAgICAgICAgICAgICAgdmFyIGJvb2tDaGFwdGVyID0gXy5maW5kV2hlcmUodGhhdC5ib29rY29uZmlnLmNoYXB0ZXJzLCB7XG4gICAgICAgICAgICAgICAgICAgICAgcGFydCAgICA6IG1vZGVsLmF0dHJpYnV0ZXMuY2l0ZWRSYW5nZS5wYXJ0XG4gICAgICAgICAgICAgICAgICAgICwgY2hhcHRlciA6IG1vZGVsLmF0dHJpYnV0ZXMuY2l0ZWRSYW5nZS5jaGFwdGVyXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWYgKCFib29rQ2hhcHRlcikgcmV0dXJuO1xuICAgICAgICAgICAgICAgIHZhciBzdGFydCA9IGJvb2tDaGFwdGVyLnBhcmFncmFwaHMuc3RhcnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgKyBtb2RlbC5hdHRyaWJ1dGVzLmNpdGVkUmFuZ2UucGFyYWdyYXBoO1xuICAgICAgICAgICAgICAgIHZhciBlbmQgPSBzdGFydCArIDE7XG4gICAgICAgICAgICAgICAgY29sLmFkZChuZXcgVGltZWxpbmVJdGVtKHtcbiAgICAgICAgICAgICAgICAgICAgICBzdGFydDogc3RhcnRcbiAgICAgICAgICAgICAgICAgICAgLCBlbmQ6IGVuZFxuICAgICAgICAgICAgICAgICAgICAsIG1hcmtlclZpZXc6IG1hcmtlclZpZXdcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoYXQuc3RhcnQgPSBfLm1pbih0aGF0LmJvb2tjb25maWcuY2hhcHRlcnMsIGZ1bmN0aW9uKGNoYXB0ZXIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2hhcHRlci5wYXJhZ3JhcGhzLnN0YXJ0O1xuICAgICAgICAgICAgfSkucGFyYWdyYXBocy5zdGFydDtcbiAgICAgICAgICAgIHRoYXQuZW5kID0gXy5tYXgodGhhdC5ib29rY29uZmlnLmNoYXB0ZXJzLCBmdW5jdGlvbihjaGFwdGVyKXtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2hhcHRlci5wYXJhZ3JhcGhzLmVuZDtcbiAgICAgICAgICAgIH0pLnBhcmFncmFwaHMuZW5kO1xuICAgICAgICB9XG4gICAgICAgICwgZ2V0SXRlbXMgOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldCgnY29sbGVjdGlvbicpLm1vZGVscztcbiAgICAgICAgfVxuICAgICAgICAsIHRpY2tWYWx1ZXMgOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciB2YWx1ZXMgPSBfLm1hcCh0aGlzLmJvb2tjb25maWcuY2hhcHRlcnMsIGZ1bmN0aW9uKGNoYXB0ZXIpe1xuICAgICAgICAgICAgICAgIHJldHVybiBjaGFwdGVyLnBhcmFncmFwaHMuc3RhcnQ7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHZhbHVlcy5zb3J0KGZ1bmN0aW9uKGEsYikgeyByZXR1cm4gYS1iOyB9KTtcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZXM7XG4gICAgICAgIH1cbiAgICAgICAgLCB0aWNrRm9ybWF0IDogZnVuY3Rpb24ocCkge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgICAgIHZhciBpLGNoYXB0ZXI7XG4gICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IHRoYXQuYm9va2NvbmZpZy5jaGFwdGVycy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgICAgICBjaGFwdGVyID0gdGhhdC5ib29rY29uZmlnLmNoYXB0ZXJzW2ldO1xuICAgICAgICAgICAgICAgICAgICBpZiAocCA8PSBjaGFwdGVyLnBhcmFncmFwaHMuZW5kKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwID0gY2hhcHRlci5jaGFwdGVyO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYmxhbmsgdGljayBmb3IgZW5kIG9mIGJvb2tcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwID09PSB0aGF0LmJvb2tjb25maWcuY2hhcHRlcnMubGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBcIlwiO1xuXG4gICAgICAgICAgICBfLmZpbmRJbmRleCh0aGlzLmdldCgnY29sbGVjdGlvbicpLm1vZGVscywgZnVuY3Rpb24oaXRlbSl7XG4gICAgICAgICAgICAgICAgcmV0dXJuIChpdGVtLmNpZCA9PT0gdGltZWxpbmVJdGVtLmNpZCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmICghaSkgcmV0dXJuO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0KCdjb2xsZWN0aW9uJykuZ2V0KGkpO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgXy5leHRlbmQoVGltZWxpbmVNb2RlbC5wcm90b3R5cGUsQXN5bmNJbml0KTtcbiAgICByZXR1cm4gVGltZWxpbmVNb2RlbDtcbn0pO1xuIiwiLypnbG9iYWwgZGVmaW5lKi9cbmRlZmluZSgndmlld3MvYXJ0aWNsZS9nYWxsZXJ5L2xpZ2h0Ym94JywgW1xuICAgICAgJ2pxdWVyeSdcbiAgICAsICd1bmRlcnNjb3JlJ1xuICAgICwgJ2JhY2tib25lJ1xuICAgICwgJ3RleHQhcGFydGlhbHMvbGlnaHRib3gtdGl0bGUuaHRtbCdcbiAgICAsICdsaWdodGJveCdcbl0sIGZ1bmN0aW9uKCQsXyxCYWNrYm9uZSxsaWdodGJveFRpdGxlVGVtcGwpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIEFydGljbGVHYWxsZXJ5TGlnaHRib3hWaWV3ID0gQmFja2JvbmUuVmlldy5leHRlbmQoe1xuICAgICAgICAgIGlkOiAnYXJ0aWNsZSdcbiAgICAgICAgLCBpbml0aWFsaXplOiBmdW5jdGlvbigpIHt9XG4gICAgICAgICwgcmVtb3ZlOiBmdW5jdGlvbigpIHsgLyogcmV0YWluICovfVxuICAgICAgICAsIHJlbmRlcjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgJCgnLmdhbGxlcnktaXRlbScpLm1hZ25pZmljUG9wdXAoe1xuICAgICAgICAgICAgICAgIHR5cGU6ICdpbWFnZScsXG4gICAgICAgICAgICAgICAgZ2FsbGVyeTp7XG4gICAgICAgICAgICAgICAgICAgIGVuYWJsZWQ6IHRydWVcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGltYWdlOiB7XG4gICAgICAgICAgICAgICAgICAgIHRpdGxlU3JjOiBmdW5jdGlvbigkaXRlbSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlkID0gJGl0ZW0uZWwuYXR0cignaWQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciAkcG8gPSAkKCcucG9wb3Zlci4nICsgaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBjdCA9IF8udGVtcGxhdGUobGlnaHRib3hUaXRsZVRlbXBsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb250ZW50ID0gcGN0KHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogJHBvLmZpbmQoJy5oZWFkJykudGV4dCgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHI6ICRwby5maW5kKCcuYXR0cicpLnRleHQoKVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29udGVudDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgJCgnLmdseXBoaWNvbi5nbHlwaGljb24tZXhwYW5kJykub24oJ2NsaWNrJywgZnVuY3Rpb24oZXZ0KXtcbiAgICAgICAgICAgICAgICAkKCcuZ2FsbGVyeS1pdGVtJykubWFnbmlmaWNQb3B1cCgnb3BlbicpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gdGhhdDtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBBcnRpY2xlR2FsbGVyeUxpZ2h0Ym94Vmlldztcbn0pO1xuIiwiLypnbG9iYWwgZGVmaW5lKi9cbmRlZmluZSgndmlld3MvYXJ0aWNsZS9nYWxsZXJ5L3BvcG92ZXInLCBbXG4gICAgICAnanF1ZXJ5J1xuICAgICwgJ3VuZGVyc2NvcmUnXG4gICAgLCAnYmFja2JvbmUnXG4gICAgLCAndGV4dCFwYXJ0aWFscy9pbWFnZS1wb3BvdmVyLmh0bWwnXG4gICAgLCAndGV4dCFwYXJ0aWFscy9pbWFnZS1wb3BvdmVyLWNvbnRlbnQuaHRtbCdcbl0sIGZ1bmN0aW9uKCQsXyxCYWNrYm9uZSxwb3BvdmVyVGVtcGwscG9wb3ZlckNvbnRlbnRUZW1wbCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgQXJ0aWNsZUdhbGxlcnlQb3BvdmVyVmlldyA9IEJhY2tib25lLlZpZXcuZXh0ZW5kKHtcbiAgICAgICAgICBpZDogJ2FydGljbGUnXG4gICAgICAgICwgaW5pdGlhbGl6ZTogZnVuY3Rpb24oKSB7fVxuICAgICAgICAsIHJlbW92ZTogZnVuY3Rpb24oKSB7IC8qIHJldGFpbiAqL31cbiAgICAgICAgLCByZW5kZXI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIC8vIGFkZCBwb3BvdmVycyB0byBpbWFnZXNcbiAgICAgICAgICAgIHZhciBwY3QgPSBfLnRlbXBsYXRlKHBvcG92ZXJDb250ZW50VGVtcGwpO1xuICAgICAgICAgICAgJCgnaW1nLnNsaWRlc2pzLXNsaWRlJykuZWFjaChmdW5jdGlvbihpLGVsdCkge1xuICAgICAgICAgICAgICAgIHZhciBpZCA9IGVsdC5nZXRBdHRyaWJ1dGUoJ2lkJyk7XG4gICAgICAgICAgICAgICAgdmFyICRwbyA9ICQoJy5wb3BvdmVyLicgKyBpZCk7XG4gICAgICAgICAgICAgICAgdmFyIHRpdGxlID0gJHBvLmZpbmQoJy5oZWFkJykudGV4dCgpO1xuICAgICAgICAgICAgICAgICQoZWx0KS5hdHRyKCdhbHQnLCAkcG8uZmluZCgnLmRlc2MnKS50ZXh0KCkpO1xuICAgICAgICAgICAgICAgIHZhciBjb250ZW50ID0gcGN0KHtcbiAgICAgICAgICAgICAgICAgICAgYXR0cjogJHBvLmZpbmQoJy5hdHRyJykudGV4dCgpXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgJChlbHQpLnBvcG92ZXIoe1xuICAgICAgICAgICAgICAgICAgICBjb250YWluZXI6IFwiYm9keVwiLFxuICAgICAgICAgICAgICAgICAgICBodG1sIDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgY29udGVudDogY29udGVudCxcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IHRpdGxlLFxuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogcG9wb3ZlclRlbXBsLFxuICAgICAgICAgICAgICAgICAgICB0cmlnZ2VyOiBcImhvdmVyXCIsXG4gICAgICAgICAgICAgICAgICAgIHBsYWNlbWVudDogXCJsZWZ0XCJcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAkKGVsdCkuY2xpY2soZnVuY3Rpb24oZXZ0KSB7XG4gICAgICAgICAgICAgICAgICAgICQoZWx0KS5wb3BvdmVyKCdoaWRlJyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiB0aGF0O1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIEFydGljbGVHYWxsZXJ5UG9wb3ZlclZpZXc7XG59KTtcbiIsIi8qZ2xvYmFsIGRlZmluZSovXG5kZWZpbmUoJ3ZpZXdzL2FydGljbGUvZ2FsbGVyeS9zbGlkZXMnLCBbXG4gICAgICAnanF1ZXJ5J1xuICAgICwgJ3VuZGVyc2NvcmUnXG4gICAgLCAnYmFja2JvbmUnXG4gICAgLCAndGV4dCFwYXJ0aWFscy9pbWFnZS1wb3BvdmVyLmh0bWwnXG4gICAgLCAndGV4dCFwYXJ0aWFscy9pbWFnZS1wb3BvdmVyLWNvbnRlbnQuaHRtbCdcbiAgICAsICd0ZXh0IXBhcnRpYWxzL2xpZ2h0Ym94LXRpdGxlLmh0bWwnXG4gICAgLCAnc2xpZGVzanMnXG4gICAgLCAnbGlnaHRib3gnXG5dLCBmdW5jdGlvbigkLF8sQmFja2JvbmUscG9wb3ZlclRlbXBsLHBvcG92ZXJDb250ZW50VGVtcGwsbGlnaHRib3hUaXRsZVRlbXBsKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBBcnRpY2xlR2FsbGVyeVNsaWRlc1ZpZXcgPSBCYWNrYm9uZS5WaWV3LmV4dGVuZCh7XG4gICAgICAgICAgaWQ6ICdhcnRpY2xlJ1xuICAgICAgICAsIGluaXRpYWxpemU6IGZ1bmN0aW9uKCkge31cbiAgICAgICAgLCByZW1vdmU6IGZ1bmN0aW9uKCkgeyAvKiByZXRhaW4gKi99XG4gICAgICAgICwgcmVuZGVyOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICAvLyBjb25maWd1cmUgc2xpZGVzanM7IHVwIHRvIG5vdywgJ2Rpc3BsYXk6bm9uZSdcbiAgICAgICAgICAgIC8vIGhhcyBhcHBsaWVkXG4gICAgICAgICAgICAkKFwiI3NsaWRlc1wiKS5zbGlkZXNqcyh7XG4gICAgICAgICAgICAgICAgbmF2aWdhdGlvbjoge1xuICAgICAgICAgICAgICAgICAgICBhY3RpdmU6ICgkKCdpbWcuc2xpZGVzanMtc2xpZGUnKS5sZW5ndGggPiAxKSxcbiAgICAgICAgICAgICAgICAgICAgZWZmZWN0OiBcImZhZGVcIlxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcGFnaW5hdGlvbjoge1xuICAgICAgICAgICAgICAgICAgICBhY3RpdmU6ICgkKCdpbWcuc2xpZGVzanMtc2xpZGUnKS5sZW5ndGggPiAxKSxcbiAgICAgICAgICAgICAgICAgICAgZWZmZWN0OiBcImZhZGVcIlxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZWZmZWN0OiB7XG4gICAgICAgICAgICAgICAgICAgIGZhZGU6IHtcbiAgICAgICAgICAgICAgICAgICAgICBzcGVlZDogMTAwLFxuICAgICAgICAgICAgICAgICAgICAgIGNyb3NzZmFkZTogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBjYWxsYmFjazoge1xuICAgICAgICAgICAgICAgICAgICAvLyBjYWxsZWQgb24gbG9hZCBvZiBmaXJzdCBwaWNcbiAgICAgICAgICAgICAgICAgICAgbG9hZGVkOiBmdW5jdGlvbihudW1iZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciAkaW1nID0gJChcIi5zbGlkZXNqcy1jb250cm9sXCIpLmNoaWxkcmVuKCc6ZXEoJysgKG51bWJlciAtIDEpICsgJyknKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICRpbWcuY3NzKHt2aXNpYmlsaXR5OiBcImhpZGRlblwifSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkaW1nLmNzcyh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6ICdhdXRvJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgd2lkdGg6ICAnYXV0bydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIG1heEhlaWdodDogJChcIi5zbGlkZXNqcy1jb250YWluZXJcIikuaGVpZ2h0KClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIG1heFdpZHRoOiAgJChcIi5zbGlkZXNqcy1jb250YWluZXJcIikud2lkdGgoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgcG9zaXRpb246ICBcInJlbGF0aXZlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2FsY3VsYXRlIGxlZnQgb2Zmc2V0IG9uY2UgdGhlIHByZXZpb3VzIHByb3BlcnRpZXMgaGF2ZSBiZWVuIHNldFxuICAgICAgICAgICAgICAgICAgICAgICAgJGltZy5jc3Moe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdCAgIDogKCQoXCIuc2xpZGVzanMtY29udGFpbmVyXCIpLndpZHRoKCkgLSAkaW1nLndpZHRoKCkpLzIgLSBwYXJzZUludCgkaW1nLmNzcygncGFkZGluZy1sZWZ0JyksIDEwKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgbWFyZ2luIDogMFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkaW1nLmNzcyh7IHZpc2liaWxpdHk6IFwidmlzaWJsZVwiIH0pO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAvLyBjYWxsZWQgc3RhcnQgb2YgY2hhbmdlIG9mIHBpYyAoYWZ0ZXIgZmlyc3QpXG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0OiBmdW5jdGlvbihudW1iZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoXCIuc2xpZGVzanMtY29udHJvbFwiKS5jaGlsZHJlbigpLmNzcyh7dmlzaWJpbGl0eTogXCJoaWRkZW5cIn0pO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAvLyBjYWxsZWQgZW5kIG9mIGNoYW5nZSBvZiBwaWMgKGFmdGVyIGZpcnN0KVxuICAgICAgICAgICAgICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24obnVtYmVyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbmV3SW1nID0gbnVtYmVyIC0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciAkaW1nID0gJChcIi5zbGlkZXNqcy1jb250cm9sXCIpLmNoaWxkcmVuKCc6ZXEoJysgbmV3SW1nICsgJyknKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICRpbWcuY3NzKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogJ2F1dG8nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLCB3aWR0aDogICdhdXRvJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgbWF4SGVpZ2h0OiAkKFwiLnNsaWRlc2pzLWNvbnRhaW5lclwiKS5oZWlnaHQoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgbWF4V2lkdGg6ICAkKFwiLnNsaWRlc2pzLWNvbnRhaW5lclwiKS53aWR0aCgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLCBwb3NpdGlvbjogIFwicmVsYXRpdmVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkaW1nLmNzcyh7IHZpc2liaWxpdHk6IFwidmlzaWJsZVwiIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gdGhhdDtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBBcnRpY2xlR2FsbGVyeVNsaWRlc1ZpZXc7XG59KTtcbiIsIi8qZ2xvYmFsIGRlZmluZSovXG5kZWZpbmUoJ3ZpZXdzL21hcC9sYXllci90aW1lbGluZScsIFtcbiAgICAgICdqcXVlcnknXG4gICAgLCAndW5kZXJzY29yZSdcbiAgICAsICdiYWNrYm9uZSdcbiAgICAsICdsZWFmbGV0J1xuICAgICwgJ3RleHQhcGFydGlhbHMvdGltZWxpbmUuaHRtbCdcbiAgICAsICdjb250cm9scy9MLkNvbnRyb2wuVGltZWxpbmUnXG5dLCBmdW5jdGlvbigkLF8sQmFja2JvbmUsTCx0aW1lbGluZUNvbnRyb2xQYXJ0aWFsKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBUaW1lbGluZVZpZXcgPSBCYWNrYm9uZS5WaWV3LmV4dGVuZCh7XG4gICAgICAgICAgaWQ6ICd0aW1lbGluZSdcbiAgICAgICAgLCBtYXA6IG51bGxcbiAgICAgICAgLCBpbml0aWFsaXplOiBmdW5jdGlvbihhcmdzKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICB0aGF0Lm1hcCA9IGFyZ3MubWFwO1xuICAgICAgICB9XG4gICAgICAgICwgX3RpbWVsaW5lQ29sbGFwc2UgOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIHRoYXQuX2hhbmRsZUZpbHRlcih7Y2xlYXI6dHJ1ZX0pO1xuICAgICAgICB9XG4gICAgICAgICwgX2hhbmRsZUZpbHRlciA6IGZ1bmN0aW9uKHNlbGVjdGVkKSB7XG4gICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ2ZpbHRlcicsIHNlbGVjdGVkKTtcbiAgICAgICAgfVxuICAgICAgICAsIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgcG9zaXRpb24sIGNvbnRyb2xoZWlnaHQsIG1hcGhlaWdodCwgZG9jdW1lbnRoZWlnaHQ7XG4gICAgICAgICAgICBtYXBoZWlnaHQgPSAkKCcjbWFwJykuaGVpZ2h0KCk7XG4gICAgICAgICAgICBkb2N1bWVudGhlaWdodCA9IGRvY3VtZW50LmJvZHkuY2xpZW50SGVpZ2h0O1xuICAgICAgICAgICAgaWYgKE1hdGguYWJzKGRvY3VtZW50aGVpZ2h0LzIgLSBtYXBoZWlnaHQpIDwgMikge1xuICAgICAgICAgICAgICAgIHBvc2l0aW9uID0gJ2JvdHRvbXJpZ2h0JztcbiAgICAgICAgICAgICAgICBjb250cm9saGVpZ2h0ID0gJCgnI21hcCcpLmhlaWdodCgpIC0gMTAwO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBwb3NpdGlvbiA9ICd0b3BsZWZ0JztcbiAgICAgICAgICAgICAgICBjb250cm9saGVpZ2h0ID0gNTAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhhdC5tb2RlbC5pbml0KCkuZG9uZShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB0aGF0LnRpbWVsaW5lID0gTC5jb250cm9sLnRpbWVsaW5lKHRoYXQubWFwLHRoYXQubW9kZWwsXG4gICAgICAgICAgICAgICAgICAgIHsgICAgIGhlaWdodCAgIDogY29udHJvbGhlaWdodFxuICAgICAgICAgICAgICAgICAgICAgICAgLCBwb3NpdGlvbiA6IHBvc2l0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAsIG9uOiB7IGJydXNoZW5kOiBmdW5jdGlvbihhKSB7IHRoYXQuX2hhbmRsZUZpbHRlcihhKTsgfX19XG4gICAgICAgICAgICAgICAgKS5hZGRUbyh0aGF0Lm1hcCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBUaW1lbGluZVZpZXc7XG59KTtcblxuIiwiLypnbG9iYWwgZGVmaW5lICovXG5kZWZpbmUoJ21vZGVscy9tYXAvbGF5ZXIvdGltZWxpbmUvaXRlbScsIFtcbiAgICAgICdqcXVlcnknXG4gICAgLCAndW5kZXJzY29yZSdcbiAgICAsICdiYWNrYm9uZSdcbl0sIGZ1bmN0aW9uKCQsXyxCYWNrYm9uZSkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgVGltZWxpbmVJdGVtTW9kZWwgPSBCYWNrYm9uZS5Nb2RlbC5leHRlbmQoe1xuICAgICAgICAgIG1hcmtlclZpZXc6IG51bGxcbiAgICAgICAgLCBzdGFydDogbnVsbCAgICAgICAvLyBcImFic29sdXRlXCIgc3RhcnQgKGllLCBwYXJhZ3JhcGggaW5kZXggdy9vIGNoYXB0ZXIpXG4gICAgICAgICwgZW5kOiBudWxsICAgICAgICAgLy8gXCJhYnNvbHV0ZVwiIGVuZFxuICAgICAgICAsIGluaXRpYWxpemU6IGZ1bmN0aW9uKGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIHRoYXQubWFya2VyVmlldyA9IGFyZ3MubWFya2VyVmlldztcbiAgICAgICAgICAgIHRoYXQuc3RhcnQgPSBhcmdzLnN0YXJ0O1xuICAgICAgICAgICAgdGhhdC5lbmQgPSBhcmdzLmVuZDtcbiAgICAgICAgfVxuICAgICAgICAsIGR1cmF0aW9uOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmVuZC10aGlzLnN0YXJ0O1xuICAgICAgICB9XG4gICAgICAgICwgY29tcGFyZVRvOiBmdW5jdGlvbihiKSB7XG4gICAgICAgICAgICByZXR1cm4gXG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gVGltZWxpbmVJdGVtTW9kZWw7XG59KTtcbiIsInJlcXVpcmUuY29uZmlnKHtcbiAgcGF0aHM6IHtcbiAgICAgIGJhY2tib25lICA6ICcvL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9iYWNrYm9uZS5qcy8xLjEuMi9iYWNrYm9uZS1taW4nXG4gICAgLCBib290c3RyYXAgOiAnLy9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvdHdpdHRlci1ib290c3RyYXAvMy4zLjUvanMvYm9vdHN0cmFwLm1pbidcbiAgICAsIGQzICAgICAgICA6ICcvL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9kMy8zLjUuNi9kMy5taW4nXG4gICAgLCBqcXVlcnkgICAgOiAnLy9jb2RlLmpxdWVyeS5jb20vanF1ZXJ5LTIuMS40Lm1pbidcbiAgICAsIGxlYWZsZXQgICA6ICcvL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9sZWFmbGV0LzAuNy4zL2xlYWZsZXQnXG4gICAgLCBsaWdodGJveCAgOiAnLy9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvbWFnbmlmaWMtcG9wdXAuanMvMS4wLjAvanF1ZXJ5Lm1hZ25pZmljLXBvcHVwLm1pbidcbiAgICAsIHNsaWRlc2pzICA6ICcvL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9zbGlkZXNqcy8zLjAvanF1ZXJ5LnNsaWRlcy5taW4nXG4gICAgLCB0ZXh0ICAgICAgOiAnLy9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvcmVxdWlyZS10ZXh0LzIuMC4xMi90ZXh0Lm1pbidcbiAgICAsIHVuZGVyc2NvcmU6ICcvL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy91bmRlcnNjb3JlLmpzLzEuOC4zL3VuZGVyc2NvcmUtbWluJ1xuICAgICwgcGFydGlhbHMgIDogJy4uL3BhcnRpYWxzJ1xuICAgICwgeHNsICAgICAgIDogJy4uL3NjcmlwdC94c2wnXG4gICAgLCBwYWdlcyAgICAgOiAnLi4vcGFnZXMnXG4gIH0sXG4gIHNoaW06IHtcbiAgICBib290c3RyYXA6IHtcbiAgICAgIGRlcHM6IFsnanF1ZXJ5J11cbiAgICB9LFxuICAgIGJhY2tib25lOiB7XG4gICAgICAgICdkZXBzJzogWydqcXVlcnknLCAndW5kZXJzY29yZSddLFxuICAgICAgICAnZXhwb3J0cyc6ICdCYWNrYm9uZSdcbiAgICB9LFxuICAgIHVuZGVyc2NvcmU6IHtcbiAgICAgICAgJ2V4cG9ydHMnOiAnXydcbiAgICB9LFxuICAgIHRleHQ6IHtcbiAgICAgICAgJ2RlcHMnOiBbXVxuICAgIH0sXG4gICAgc2xpZGVzanM6IHtcbiAgICAgICAgZGVwczogWydqcXVlcnknXVxuICAgIH0sXG4gICAgbGlnaHRib3g6IHtcbiAgICAgIGRlcHM6IFsnanF1ZXJ5J11cbiAgICB9XG4gIH1cbn0pO1xucmVxdWlyZShbXG4gICAgJ2pxdWVyeScsXG4gICAgJ21vZGVscy9lcnJvci91c2VyJyxcbiAgICAndmlld3MvZXJyb3IvdXNlcicsXG4gICAgJ3JvdXRlcy9yb3V0ZXInLFxuICAgICd2aWV3cy9hcHAnLFxuICAgICdib290c3RyYXAnXG5dLCBmdW5jdGlvbigkLFVzZXJFcnJvck1vZGVsLFVzZXJFcnJvclZpZXcsUm91dGVyLEFwcFZpZXcpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIGNvbmZpZ2ZpbGUgPSAkKCcjbWFpbicpLmF0dHIoJ2RhdGEtY29uZmlnJyk7XG4gICAgaWYgKGNvbmZpZ2ZpbGUpIHtcbiAgICAgICAgJC5nZXRKU09OKGNvbmZpZ2ZpbGUsIGZ1bmN0aW9uKHNpdGVjb25maWcpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgbmV3IEFwcFZpZXcoKTtcbiAgICAgICAgICAgICAgICBuZXcgUm91dGVyKHtcbiAgICAgICAgICAgICAgICAgICAgICByb3V0ZXM6IHNpdGVjb25maWcucGFnZXMucm91dGVzXG4gICAgICAgICAgICAgICAgICAgICwgY29uZmlnOiBzaXRlY29uZmlnXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFzaXRlY29uZmlnLmRlYnVnKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBVc2VyRXJyb3JWaWV3KHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGVsOiBuZXcgVXNlckVycm9yTW9kZWwoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1zZzogZS50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pLmZhaWwoZnVuY3Rpb24oanF4aHIsIHRleHRTdGF0dXMsIGVycm9yKSB7XG4gICAgICAgICAgICBuZXcgVXNlckVycm9yVmlldyh7XG4gICAgICAgICAgICAgICAgbW9kZWw6IG5ldyBVc2VyRXJyb3JNb2RlbCh7XG4gICAgICAgICAgICAgICAgICAgIG1zZzogXCJGYWlsZWQgdG8gbG9hZCBzaXRlIGNvbmZpZyBmaWxlICdcIiArIGNvbmZpZ2ZpbGUgKyBcIicgXCIgKyBlcnJvclxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgbmV3IFVzZXJFcnJvclZpZXcoe1xuICAgICAgICAgICAgbW9kZWw6IG5ldyBVc2VyRXJyb3JNb2RlbCh7XG4gICAgICAgICAgICAgICAgbXNnOiBcIk5vIGNvbmZpZ3VyYXRpb24gZmlsZW5hbWUgc3BlY2lmaWVkIGluIGhvbWUgcGFnZS5cIlxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSk7XG4gICAgfVxufSk7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=