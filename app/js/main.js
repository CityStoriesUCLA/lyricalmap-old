define("collections/articles",["jquery","underscore","backbone","models/article"],function(e,c,n,o){"use strict";var r=n.Collection.extend({model:o});return r});
define("collections/timeline",["jquery","underscore","backbone","models/map/layer/timeline/item"],function(e,n,i,t){"use strict";var l=i.Collection.extend({model:t});return l});
define("controllers/issue",["jquery","underscore","backbone","controllers/prototype","mixins/asyncInit","views/issue","models/issue"],function(e,n,i,o,r,t,l){"use strict";var c=o.extend({model:null,view:null,router:null,initialize:function(i){var o=this;o.$def=e.Deferred(),o.router=i.router,o.model=new l({config:i.config}),o.view=new t({model:o.model,config:i.config}),o.view.render(),o.model.init().done(function(){n.forEach(o.model.get("collection").models,function(e){o.listenTo(e,"active",function(e){var n="article/"+e.get("articleid");o.router.navigate(n,{trigger:!0}),o.view.renderArticle(e)})}),o.$def.resolve(o)}).always(function(){o.$def.reject()})}});return n.extend(c.prototype,r),c});
define("controllers/map",["jquery","underscore","backbone","controllers/prototype","models/map","views/map","mixins/asyncInit","controllers/map/pan","controllers/map/layer"],function(e,o,r,n,a,p,i,t,l,u){"use strict";var s=n.extend({model:null,view:null,issue:null,config:null,mapPanController:null,MapLayerController:null,mapTimelineController:null,initialize:function(o){var r=this;r.$def=e.Deferred(),r.config=o.config,r.router=o.router,r.issue=o.issue,r.model=new a(o),r.view=new p({model:r.model,router:r.router,issue:r.issue}),r.view.init().done(function(){r.mapPanController=new t({map:r.view.map}),r.mapLayerController=new l({view:r.view,map:r.view.map,model:r.model,mapconfig:r.model.attributes.mapconfig,controlsconfig:r.config.controls}),r.listenTo(r.view,"markers",function(e){r._registerMarkers(e),r.mapPanController.fitMarkerBounds(r.view.markerViews)}),r.view.render()}),e.when.apply(null,[r.model.init(),r.view.init()]).done(function(){r.$def.resolve(r)})},_registerMarkers:function(e){var r=this;o.forEach(e,function(e){r.listenTo(e.model,"active",function(o){r.mapPopupOpen(e.markerLayer);var n=r._getMarkerLayer(e.markerLayer,"getPopup");null!==n&&r.mapPanController.handlePopupPosition(n.getPopup())}),r.listenTo(e.model,"toggle",function(o){r.mapPopupToggle(e.markerLayer);var n=r._getMarkerLayer(e.markerLayer,"getPopup");null!==n&&r.mapPanController.handlePopupPosition(n.getPopup())}),r.listenTo(e,"click",function(o){r.mapPopupOpen(o),e.model.trigger("active",e.model)}),r.listenTo(e,"mouseover",function(e){r.view.map.hoverPopup&&(openpopup[popupid(mapMarker.getLatLng())]||mapMarker.openPopup())})})},_getMarkerLayer:function(e,r){var n,a;if(e instanceof L.LayerGroup){if(r in e)n=e;else for(a=e.getLayers();e=a.pop();)if(r in e){n=e;break}}else o.has(e,"originalEvent")&&(n=e.target);return n},mapPopupOpen:function(e){var o=this._getMarkerLayer(e,"openPopup");o&&o.openPopup()},mapPopupToggle:function(e){var o=this._getMarkerLayer(e,"togglePopup");o&&o.togglePopup()},mapPopupClose:function(e){var o=this._getMarkerLayer(e,"closePopup");o&&o.closePopup()}});return o.extend(s.prototype,i),s});
define("controllers/prototype",["underscore","backbone"],function(e,t){"use strict";var n=function(){this.cid=e.uniqueId("controller"),this.initialize.apply(this,arguments)};return n.extend=t.Router.extend,e.extend(n.prototype,t.Events),e.extend(n.prototype,{initialize:function(){throw new Error("unimplemented initialize()")}}),n});
define("controls/L.Control.Timeline",["leaflet","d3"],function(t,i){return t.Control.Timeline?t:(t.Control.Timeline=t.Control.extend({options:{orientation:"left",height:500,width:100,margin:{left:3,right:3,top:10,bottom:5},collapsed:!0,item:{minHeight:1},on:null,title:"Timeline",position:"topleft"},initialize:function(i,e,n){var o=this;t.Util.setOptions(this,n),this._map=i,this._source=e;var l=this._container=t.DomUtil.create("div","leaflet-control-timeline leaflet-control");if(this.options.collapsed){t.DomUtil.addClass(l,"leaflet-control-timeline-collapsed");var s=this._toggle=t.DomUtil.create("a","leaflet-control-timeline-toggle",l);s.title=this.options.title,s.link="#";var a=function(){o._expand()};t.Browser.touch?t.DomEvent.on(s,"click",t.DomEvent.stop).on(s,"click",a,this):t.DomEvent.on(s,"click",a)}else t.DomUtil.addClass(l,"leaflet-control-timeline-expanded");return t.Browser.touch?t.DomEvent.on(this._container,"click",t.DomEvent.stopPropagation):t.DomEvent.disableClickPropagation(this._container),l},onRemove:function(){},onAdd:function(t){return this._container},_expand:function(){var e=this;if(!e._expanded&&(e._expanded=!0,this._map.on("click",this._collapse,this),t.DomUtil.removeClass(this._container,"leaflet-control-timeline-collapsed"),t.DomUtil.addClass(this._container,"leaflet-control-timeline-expanded"),!this._timeline)){var n=this.options.height-this.options.margin.top-this.options.margin.bottom,o=this.options.width-this.options.margin.right-this.options.margin.left,l=(this._xScale=i.scale.linear().range([0,o]),this._yScale=i.scale.linear().domain([this._source.start,this._source.end]).range([0,n])),s=this._timeline=i.select(".leaflet-control-timeline").append("svg").attr("id","timeline").attr("height",this.options.height).attr("width",this.options.width),a=s.append("g").attr("id","band").attr("width",o/2-this.options.margin.right).attr("height",n).attr("transform","translate("+.25*o+","+this.options.margin.top+") scale(.75 1.0)"),r=(a.selectAll("g").data(this._source.getItems()).enter().append("rect").attr("class","timeline-item").attr("height",function(t){return i.max([e.options.item.minHeight,l(t.duration())])}).attr("width",o).attr("transform",function(t){return"translate(0, "+l(t.start)+")"}),this._brush=i.svg.brush().y(l).on("brushend",function(){var t=l(r.extent()[0]),n=l(r.extent()[1]),o={clear:!1,selected:[]};t!==n?i.select("#band").selectAll("rect.timeline-item").each(function(i){l(i.start)<=n&&l(i.end)>=t&&o.selected.push(i)}):o.clear=!0,e.options.on.brushend(o)})),c=a.append("svg").attr("id","brush").call(r);c.selectAll("rect").attr("width",o);var h=s.append("g").attr("id","axis").attr("transform","translate("+(.25*o-this.options.margin.left)+","+this.options.margin.top+")"),p=i.svg.axis().scale(l).orient(this.options.orientation).tickSize(6,0).tickValues(this._source.tickValues()).tickFormat(function(t){return e._source.tickFormat(t)});h.call(p)}},_collapse:function(){this._expanded&&((this.options.on.collapse||"function"==typeof this.options.on.collapse)&&this.options.on.collapse(),this._expanded=!1,t.DomUtil.addClass(this._container,"leaflet-control-timeline-collapsed"),t.DomUtil.removeClass(this._container,"leaflet-control-timeline-expanded"),this._map.off("click",this._collapse,this))}}),void(t.control.timeline=function(i,e,n){return new t.Control.Timeline(i,e,n)}))});
define("mixins/asyncInit",["jquery","underscore"],function(n,e){"use strict";var i={$def:null,init:function(){return this.$def.promise()}};return i});
define("mixins/domwatcher",["jquery"],function(e){"use strict";var t={watchDOM:function(t,o,n){if(!o)throw"Empty selector in watchDOM()";if(0===e(o).length){var d=function(){e(o).length>0&&(e(document.body).off("DOMNodeInserted",d),n.resolve())};e(document.body).on("DOMNodeInserted",d),window.setTimeout(function(){e(document.body).off("DOMNodeInserted",d),n.reject()},t)}else n.resolve()}};return t});
define("mixins/fetchxml",["jquery"],function(e){"use strict";var r={fetchXML:function(r){var t=e.Deferred();return e.ajax({type:"GET",url:r,dataType:"xml",success:function(e){t.resolve(e)},error:function(e,r,n){t.reject()}}),t.promise()}};return r});
define("mixins/xml2html",["jquery","underscore"],function(e,t){"use strict";var r={_doc:function(e){var t;if("string"==typeof e)t=(new DOMParser).parseFromString(e,"text/xml");else{if(!(e instanceof Document))throw new Error("Unrecognized document input in XML2HTML");t=e}if(null==t||!t.hasOwnProperty("getElementsByTagName")&&t.getElementsByTagName("parsererror").length>0)throw new Error("Failed to parse document in xml2html");return t},xml2html:function(e,r,n,o){var i=this._doc(e),m=this._doc(r),a=new XSLTProcessor;a.importStylesheet(m),"object"==typeof n&&t.each(t.keys(n),function(e){a.setParameter(null,e,n[e])});var s;try{var c=a.transformToDocument(i);s=-1!=navigator.userAgent.indexOf("Firefox")?"text"===o?c.documentElement.textContent:c.documentElement:"text"===o?c.documentElement.textContent:s=c.body.innerHTML}catch(u){throw new Error("Error in XSLT transform: "+u.toString())}return s}};return r});
define("views/app",["jquery","underscore","backbone"],function(e,n,i){"use strict";var o=i.View.extend({el:"body",initialize:function(){e(window).resize(function(){document.location.reload()})}});return o});
define("views/article",["jquery","underscore","backbone","views/article/gallery","mixins/xml2html","text!xsl/article.xsl"],function(e,i,t,r,l,o){"use strict";var n=t.View.extend({id:"article",initialize:function(e){var i=this;i.config=e.config},render:function(){var i=this;if(i.$el=e("#"+i.id),0===i.$el.find("#"+i.model.cid).length){var t=this.xml2html(this.model.get("xml"),o,{"article-dir":i.config.articles.pathBase,iconUrl:i.model.get("iconUrl"),cid:i.model.cid});try{e(".article-content").remove(),e("#"+this.id).append(t)}catch(l){console.log("article load error: "+l.toString())}return e("img.slidesjs-slide").length>0?(new r).render():(e("#footer").remove(),e("article").removeClass("before-footer").addClass("no-footer")),i.$el.find(".article-marker").click(function(e,t){i.model.trigger("toggle",i.model)}),i}},remove:function(){}});return i.extend(n.prototype,l),n});
define("views/clear",["jquery","underscore","backbone"],function(e,n,r,t){"use strict";var c=r.View.extend({el:"body",render:function(){e("body").empty()}});return c});
define("views/issue",["jquery","underscore","backbone","text!partials/issue.html","views/article"],function(e,i,t,n,r){"use strict";var s=t.View.extend({el:"#issue",template:i.template(n),initialize:function(e){var i=this;i.config=e.config},render:function(){this.$el.remove(),e("body").append(n)},renderArticle:function(e){new r({model:e,config:this.model.config,issue:this,router:this.model.router}).render()}});return s});
define("views/map",["jquery","underscore","backbone","leaflet","text!partials/map.html","views/marker","mixins/asyncInit"],function(e,i,n,a,r,t,m){"use strict";var o=n.View.extend({id:"map",tagName:"div",markerViews:[],mapconfig:{},initialize:function(i){var n=this;n.$def=e.Deferred(),n.model=i.model,n.issue=i.issue,e.when.apply({},[n.issue.init(),n.model.init()]).done(function(){n.mapconfig=n.model.get("mapconfig"),e("#"+this.id).length>0||e("#"+this.id).children().length>0||(n._initMap(),n.$def.resolve(n))})},_initMap:function(){var n=this;0===e("#"+this.id).length&&(e("body").append(r),n.map=new a.Map(n.mapconfig.id,n.mapconfig.map),new a.TileLayer(n.mapconfig.tileLayer.url,n.mapconfig.tileLayer.opts).addTo(n.map),new a.control.scale(n.mapconfig.scale).addTo(n.map),n.markerViews=i.map(n.issue.get("collection").models,function(e){return new t({model:e,map:n.map,mapconfig:n.mapconfig})}))},renewViews:function(){var e=this;e.markerViews=i.map(e.issue.get("collection").models,function(i){return i.markerView||(i.markerView=new t({model:i,map:e.map,mapconfig:e.mapconfig})),i.markerView}),i.forEach(e.markerViews,function(e){e.render()}),e.trigger("markers",e.markerViews)},render:function(){var e=this;e._initMap(),i.forEach(e.markerViews,function(e){e.render()}),e.trigger("markers",e.markerViews)}});return i.extend(o.prototype,m),o});
define("views/marker",["jquery","underscore","backbone","text!partials/marker.html","text!partials/marker-legend.html"],function(e,r,t,i,n){"use strict";var o=t.View.extend({template:r.template(i),el:"",markerLayer:null,map:null,mapconfig:null,initialize:function(e){var r=this;r.map=e.map,r.mapconfig=e.mapconfig,r.initMarkerLayer()},initMarkerLayer:function(){var e=this,r=this.model.getGeojson(),t=e.mapconfig.features.icon;t.iconUrl=this.model.get("iconUrl")||"";var i=L.icon(t);e.markerLayer=L.geoJson(r,{onEachFeature:function(r,t){var i=L.popup(e.mapconfig.features.popup);i.setContent(e.template({articleid:e.model.get("articleid"),geojson:e.model.getGeojson()})),t.bindPopup(i),t.removeEventListener("click"),t.on("click",function(r){e.trigger("click",r)}),t.on("mouseover",function(r){e.trigger("mouseover",r)})},pointToLayer:function(r,t){return L.marker(t,{icon:i,clickable:!!r.properties.text,title:r.properties.markername||"",opacity:e.mapconfig.features.opacity,riseOnHover:e.mapconfig.features.riseOnHover})}})},render:function(){this.markerLayer.addTo(this.map)}});return o});
define("views/menu",["jquery","underscore","backbone","text!partials/menu.html","mixins/domwatcher","views/article/menu"],function(e,t,n,i,r,o){"use strict";var a=n.View.extend({template:t.template(i),id:"menu",tagName:"div",issue:null,config:{},initialize:function(e){this.config=e.config,this.issue=e.issue},render:function(){var n=this;if(0===e("#"+n.id).children().length){var i=this.config.menu,r=[],a={},c={};t.each(i,function(e){if(a[e.partial]="","menu"===e.type){if("collections/articles"!==e.collection)throw new Error("Unhandled collection type requested: "+e.collection);c[e.collection]=n.issue.get("collection")}}),t.each(t.keys(a),function(n){var i=e.Deferred();require(["text!"+n],function(e){a[n]=t.template(e),i.resolve()}),r.push(i.promise())});var l="";e.when.apply(e,r).done(function(){t.forEach(i,function(n,i){var r=n.partial,u={},s="",f=[];"page"===n.type||"sep"===n.type?l+=a[r](n):"menu"===n.type&&(c[n.collection].models.forEach(function(t,i){var r,a=n.item.href.replace(":i",i),c=new o({model:t}),l=c.render({href:"#"+a});if("string"==typeof l)r=e(l);else{if(!(l instanceof Element))throw new Error("Unsupported result type for submenu: "+l.toString());if("BODY"===l.nodeName)r=e(l.innerHTML);else{if("LI"!==l.nodeName)throw new Error("Unsupported document element for submenu: "+l.toString());r=e(l.outerHTML)}}r.attr("data-sort-key")?u[r.attr("data-sort-key")]=r.clone():u[r.find("a").text()]=r.clone()}),f=t.keys(u),f.sort(function(e,t){return e.localeCompare(t)}),t.each(f,function(e){s+=u[e][0].outerHTML}),l+=a[r]({label:n.label,items:s}))})}).then(function(){e("#"+n.id).empty().append(n.template({content:l}));var t=e.Deferred();t.fail(function(){n.render()}),n.watchDOM(500,"#"+n.id,t)}).fail(function(){throw new Error("Failed to build menu.")})}}});return t.extend(a.prototype,r),a});
define("views/page",["jquery","underscore","backbone","mixins/domwatcher","text!partials/page.html"],function(e,t,n,r,i){"use strict";var a=n.View.extend({el:"body",render:function(){var t=this,n=e.Deferred();n.then(function(){e(t.el).append(i)}),this.watchDOM(1e3,t.el,n)}});return t.extend(a.prototype,r),a});
define("views/partial",["jquery","underscore","backbone","mixins/domwatcher","mixins/asyncInit"],function(e,t,n,i,r){"use strict";var a=n.View.extend({el:"",page:"",initialize:function(t){var n=this;n.el=t.el,n.$def=e.Deferred(),require(["text!"+t.page],function(e){n.page=e,n.$def.resolve(n)})},render:function(){var t=this,n=e.Deferred();t.init().then(function(){e(t.el).append(t.page)}),this.watchDOM(1e3,t.el,n)}});return t.extend(a.prototype,i),t.extend(a.prototype,r),a});
define("models/article",["jquery","underscore","backbone","mixins/fetchxml","mixins/asyncInit","mixins/xml2html","text!xsl/geojson.xsl","text!xsl/cited-range.xsl"],function(e,t,n,o,s,i,r,l){"use strict";var a=n.Model.extend({initialize:function(){var t=this;t.$def=e.Deferred();var n=t.fetchXML(t.get("path"));e.when(n).done(function(e){t.set("xml",e),t._mkGeojson(),t._mkCitedRange(),null!==t.geojson&&t.set("placeType",t.geojson.properties.layer),t.$def.resolve(t)}).fail(function(){t.$def.reject()})},defaults:{xml:null,placeType:null,iconUrl:"",citedRange:{}},geojson:null,getGeojson:function(){return null===this.geojson&&this._mkGeojson(),this.geojson},_mkGeojson:function(){try{var e=this.xml2html(this.get("xml"),r,{},"text");this.geojson=JSON.parse(e)}catch(t){throw new Error("Failed to parse geojson: "+t.toString())}},_mkCitedRange:function(){try{var e=this.xml2html(this.get("xml"),l,{},"text");this.set("citedRange",JSON.parse(e))}catch(t){throw new Error("Failed to parse cited range json: "+t.toString())}}});return t.extend(a.prototype,o),t.extend(a.prototype,s),t.extend(a.prototype,i),a});
define("models/issue",["jquery","underscore","backbone","models/article","collections/articles","mixins/asyncInit"],function(e,t,n,i,r,o){"use strict";var c=n.Model.extend({initialize:function(n){var o=this;o.$def=e.Deferred();var c=n.config.articles.pathBase;c.match(/\/$/)||(c+="/");var a=n.config.articles.files,s=new r;o.config=n.config,o.set("collection",s);var f=t.map(t.range(a.length),function(){return void 0});t.each(a,function(e,t){f[t]=new i({articleid:t,articledir:c,path:c+e})});var l=t.map(f,function(e){return e.init()});e.when.apply(null,l).done(function(){s.add(f),o.setIcons(),o.$def.resolve(o)}).always(function(){t.forEach(l,function(e){"rejected"===e.state()&&o.$def.reject()}),o.$def.reject()})},setIcons:function(){var e=this,n=e.config.markers.icons,i=t.shuffle(t.flatten(t.map(n,function(e){return t.map(e.files,function(t){return e.dir.concat(t)})}))),r=i.pop(),o=[];e.get("collection").forEach(function(e,t){var n=e.getGeojson()||{properties:{}},c=n.properties.layer;o[c]=o[c]||i.pop()||r,e.set("iconUrl",o[c])})},getArticle:function(e){var t,n=this.get("collection");return"object"==typeof e?t=e:("number"==typeof e||"string"==typeof e)&&(t=n.at(e)),t}});return t.extend(c.prototype,o),c});
define("models/map",["jquery","underscore","backbone","mixins/asyncInit"],function(e,n,i,o){"use strict";var t=i.Model.extend({initialize:function(n){var i=this;i.$def=e.Deferred(),e.getJSON(n.config.map.config,function(e){i.set("mapconfig",e),i.$def.resolve(i)}).fail(function(e,n,o){console.log("Failed to load map config file: "+o),i.$def.reject()})},defaults:{mapconfig:{}}});return n.extend(t.prototype,o),t});
define("routes/router",["jquery","underscore","backbone","models/error/user","views/error/user","views/clear","controllers/issue","controllers/map","views/menu"],function(e,r,i,t,n,o,s,a,l){"use strict";var u=i.Router.extend({pages:{},config:{},issueController:null,mapController:null,initialize:function(e){var t=this;this.config=e.config,this.pages=e.config.pages,this.issueController=new s({router:this,config:this.config}),this.issueController.init().done(function(){r.has(t.pages.router,"history")&&t.pages.router.history&&i.history.start()})},navigate:function(e,r){i.history.fragment!==e&&i.history.navigate(e,r)},page:function(e){var i,t=this,n=!1;try{if(e||(e=this.pages.home),i=this.pages.pages[e],void 0===i)throw new Error("Missing config in router/page")}catch(s){return this.page("404")}(new o).render(),r.each(i,function(i){var o,s={config:t.config,issue:t.issueController.model,router:t},l=JSON.parse(JSON.stringify(i));if(r.has(l,"view"))o=l.view;else{if(!r.has(l,"partial")){if(r.has(confg,"full"))return void(window.location.href=l.full.page);throw new Error("Unsupported page type in router: "+e)}o="views/partial",l.partial.page=t.pages.pathBase+l.partial.page,s=r.extend(s,l.partial)}"views/map"===o?(t.mapController=new a(s),n=!0):require([o],function(e){var r=new e(s);r.render()})}),n||(t.mapController=null)},article:function(r){var i=this,t={config:i.config,issue:i.issueController.model,router:i};e("#titlepage").length>0&&e("#titlepage").remove(),e("#page").length>0&&e("#page").remove(),null===i.mapController&&(i.mapController=new a(t)),0===e("#menu").children().length&&new l(t).render(),i.mapController.init().done(function(){var e=i.issueController.model.getArticle(r);e.trigger("active",e)})}});return u});
define("controllers/map/layer",["jquery","underscore","backbone","controllers/prototype","controllers/map/layer/placetype","controllers/map/layer/timeline"],function(e,r,o,n,t,i){"use strict";var a=n.extend({view:null,router:null,map:null,controlsconfig:null,initialize:function(e){var o=this;o.map=e.map,o.view=e.view,o.model=e.model,o.controlsconfig=e.controlsconfig,o.subControllers=[],r.has(o.controlsconfig,"placetype")&&o.controlsconfig.placetype.enable&&o.subControllers.push(new t({views:o.view.markerViews,map:o.view.map,mapconfig:o.model.attributes.mapconfig})),r.has(o.controlsconfig,"timeline")&&o.controlsconfig.timeline.enable&&o.subControllers.push(new i({markerViews:o.view.markerViews,map:o.view.map,siteconfig:o.model.attributes.config})),r.forEach(o.subControllers,function(e){o.listenTo(e,"filter",function(){o._updateMarkers()})})},_updateMarkers:function(){var e=this,o=[],n=[];r.forEach(e.subControllers,function(e){var o=e.getFilterState();n.push(o.hide),n=r.flatten(n)}),r.forEach(e.view.markerViews,function(e){var t=r.find(n,function(r){r===e.markerLayer});t||o.push(e.markerLayer)}),r.forEach(o,function(r){e.view.map.addLayer(r)}),r.forEach(n,function(r){e.view.map.removeLayer(r)})}});return a});
define("controllers/map/pan",["jquery","underscore","backbone","controllers/prototype","mixins/domwatcher"],function(t,e,n,o,i){"use strict";var a=o.extend({map:null,initialize:function(t){if(this.map=t.map,!this.map)throw new Error("Uninitialized map")},_fitMarkerBounds:function(t){var n=this,o=document.getElementById("article");if(o){var i=L.DomUtil.getViewportOffset(o).x,a=L.latLngBounds(e.map(t,function(t){var e=t.model.getGeojson().geometry.coordinates.slice(0);return L.latLng(e.reverse())}));0===i?n.map.fitBounds(a):i!=n.map.getSize().x?n.map.fitBounds(a,{paddingBottomRight:[document.body.clientWidth-i,0]}):n.map.fitBounds(a),n.map.invalidateSize()}},fitMarkerBounds:function(e){var n=this,o=t.Deferred();o.then(function(){n._fitMarkerBounds(e)}),this.watchDOM(1e3,"#article",o)},handlePopupPosition:function(e){var n,o,i,a,r,p=this,d=p.map,s=t(e.getContent()).attr("id");i=e.getLatLng(),void 0!==i&&(n=L.DomUtil.getViewportOffset(document.getElementById("article")).x,o=t("#"+s).closest(".leaflet-popup-content-wrapper").first(),r=L.point(e.options.autoPanPaddingBottomRight||e.options.autoPanPadding),r=r?r.x:0,a=o.length>0?o.offset().left+o.width()+r:0,0!=n&&a>n&&n!=d.getSize().x?d.panBy([a-n,0]):d.getBounds().contains(e.getLatLng())||(d.closePopup(e),d.openPopup(e)))}});return e.extend(a.prototype,i),a});
define("views/article/gallery",["jquery","underscore","backbone","views/article/gallery/popover","views/article/gallery/lightbox","views/article/gallery/slides"],function(e,i,r,n,l,a){"use strict";var o=r.View.extend({id:"article",initialize:function(){},remove:function(){},render:function(){var i=e("#article article").height()-e("#header").outerHeight(!0);e("#body").css({height:i});var r=[];e("img.slidesjs-slide").each(function(i,n){var l=e.Deferred();e(n).load(function(){e(n).removeClass("remove"),l.resolve()}),e(n).error(function(){window.setTimeout(function(){l.reject()},500)}),r.push(l)}),e.when.apply({},r).always(function(){e("img.slidesjs-slide.remove").remove(),e(".image-loading").removeClass("image-loading"),(new n).render(),(new l).render(),(new a).render()})}});return o});
define("views/article/menu",["jquery","underscore","backbone","mixins/xml2html","text!xsl/article-menu.xsl"],function(e,t,i,n,r){"use strict";var l=i.View.extend({render:function(e){var t=this;if("resolved"!==this.model.init().state())throw"Uninitialized article in ArticleMenuView";var i=t.xml2html(t.model.get("xml"),r,e);return i}});return t.extend(l.prototype,n),l});
define("views/error/user",["jquery","backbone","text!partials/error/user.html"],function(e,t,r){"use strict";var i=t.View.extend({template:_.template(r),el:e("#errorDialog"),initialize:function(){this.render()},render:function(){return this.$el.html(this.template(this.model.attributes)),this.$el.modal({keyboard:!0,show:!0}),this}});return i});
define("models/error/user",["backbone"],function(e){"use strict";var s=e.Model.extend({defaults:{msg:""},initialize:function(e){this.set("msg",e.message)}});return s});
define("controllers/map/layer/placetype",["jquery","underscore","backbone","controllers/prototype","text!partials/marker-legend.html"],function(e,r,t,n,o){"use strict";var l=n.extend({views:null,router:null,map:null,control:null,initialize:function(t){var n=this;n.views=t.views,n.map=t.map,n.mapconfig=t.mapconfig;var l=r.template(o),a=r.groupBy(n.views,function(e){return e.model.getGeojson().properties.layer}),i=n.control=L.control.layers(null,null,n.mapconfig.control.layers.options).addTo(n.map),c=i.getContainer();r.forEach(Object.keys(c),function(e){e.match("mouseover")&&c.removeEventListener("mouseover",c[e]),e.match("mouseout")&&c.removeEventListener("mouseout",c[e])}),L.DomEvent.on(e(".leaflet-control-layers-toggle")[0],"click",i._expand,i),r.each(r.keys(a),function(e){var t=e.replace(/\s+/g,"-"),n=l({iconUrl:a[e][0].model.get("iconUrl"),title:e,klass:t}),o=r.map(a[e],function(e){return e.markerLayer}),c=L.layerGroup(o);i.addOverlay(c,n)}),e("input.leaflet-control-layers-selector").each(function(r,t){e(t).click()}),i.mapLayerController=n,i._onInputClick=n._onInputClick},getFilterState:function(){return{show:this.show||[],hide:this.hide||[]}},_onInputClick:function(){var e,r,t,n=this,o=[],l=[],a=n._form.getElementsByTagName("input"),i=a.length;for(n._handlingClick=!0,e=0;i>e;e++)r=a[e],t=n._layers[r.layerId],t.layer.getLayers().forEach(r.checked?function(e){o.push(e)}:function(e){l.push(e)});n._handlingClick=!1,n._refocusOnMap(),n.mapLayerController.show=o,n.mapLayerController.hide=l,n.mapLayerController.trigger("filter")}});return l});
define("controllers/map/layer/timeline",["jquery","underscore","backbone","controllers/prototype","views/map/layer/timeline","models/map/layer/timeline"],function(e,r,i,n,t,a){"use strict";var l=n.extend({map:null,model:null,view:null,siteconfig:null,markerViews:null,initialize:function(e){var r=this;r.views=e.views,r.map=e.map,r.markerViews=e.markerViews,r.model=new a({siteconfig:e.siteconfig,markerViews:e.markerViews}),r.view=new t({model:r.model,map:r.map,markerViews:e.markerViews}),r.listenTo(r.view,"filter",r._handleFilterEvent),r.view.render()},_handleFilterEvent:function(e){var i=this,n=[],t=[],a={};e.clear?n=r.map(i.markerViews,function(e){return e.markerLayer}):(n=r.map(e.selected,function(e){return a[e.markerView.model.cid]=void 0,e.markerView.markerLayer}),t=r.map(r.filter(i.markerViews,function(e){return!(e.model.cid in a)}),function(e){return e.markerLayer})),i.show=n,i.hide=t,i.trigger("filter")},getFilterState:function(){return{show:this.show||[],hide:this.hide||[]}}});return l});
define("views/article/gallery/lightbox",["jquery","underscore","backbone","text!partials/lightbox-title.html","lightbox"],function(e,t,i,n){"use strict";var r=i.View.extend({id:"article",initialize:function(){},remove:function(){},render:function(){var i=this;return e(".gallery-item").magnificPopup({type:"image",gallery:{enabled:!0},image:{titleSrc:function(i){var r=i.el.attr("id"),l=e(".popover."+r),a=t.template(n),o=a({title:l.find(".head").text(),attr:l.find(".attr").text()});return o}}}),e(".glyphicon.glyphicon-expand").on("click",function(t){e(".gallery-item").magnificPopup("open")}),i}});return r});
define("views/article/gallery/popover",["jquery","underscore","backbone","text!partials/image-popover.html","text!partials/image-popover-content.html"],function(e,t,i,r,n){"use strict";var o=i.View.extend({id:"article",initialize:function(){},remove:function(){},render:function(){var i=this,o=t.template(n);return e("img.slidesjs-slide").each(function(t,i){var n=i.getAttribute("id"),a=e(".popover."+n),c=a.find(".head").text();e(i).attr("alt",a.find(".desc").text());var l=o({attr:a.find(".attr").text()});e(i).popover({container:"body",html:!0,content:l,title:c,template:r,trigger:"hover",placement:"left"}),e(i).click(function(t){e(i).popover("hide")})}),i}});return o});
define("views/article/gallery/slides",["jquery","underscore","backbone","text!partials/image-popover.html","text!partials/image-popover-content.html","text!partials/lightbox-title.html","slidesjs","lightbox"],function(i,e,t,s,l,n){"use strict";var a=t.View.extend({id:"article",initialize:function(){},remove:function(){},render:function(){var e=this;return i("#slides").slidesjs({navigation:{active:i("img.slidesjs-slide").length>1,effect:"fade"},pagination:{active:i("img.slidesjs-slide").length>1,effect:"fade"},effect:{fade:{speed:100,crossfade:!0}},callback:{loaded:function(e){var t=i(".slidesjs-control").children(":eq("+(e-1)+")");t.css({visibility:"hidden"}),t.css({height:"auto",width:"auto",maxHeight:i(".slidesjs-container").height(),maxWidth:i(".slidesjs-container").width(),position:"relative"});var s=(i(".slidesjs-container").width()-t.width())/2;s-=parseInt(t.css("padding-left"),10),t.css({left:s}),t.css({visibility:"visible"})},start:function(e){i(".slidesjs-control").children().css({visibility:"hidden"})},complete:function(e){var t=e-1,s=i(".slidesjs-control").children(":eq("+t+")");s.css({height:"auto",width:"auto",maxHeight:i(".slidesjs-container").height(),maxWidth:i(".slidesjs-container").width(),position:"relative"}),s.css({visibility:"visible"})}}}),e}});return a});
define("views/map/layer/timeline",["jquery","underscore","backbone","leaflet","text!partials/timeline.html","controls/L.Control.Timeline"],function(e,i,t,n,l){"use strict";var o=t.View.extend({id:"timeline",map:null,initialize:function(e){var i=this;i.map=e.map},_timelineCollapse:function(){var e=this;e._handleFilter({clear:!0})},_handleFilter:function(e){this.trigger("filter",e)},render:function(){var i,t,l,o,a=this;l=e("#map").height(),o=document.body.clientHeight,Math.abs(o/2-l)<2?(i="bottomright",t=e("#map").height()-100):(i="topleft",t=500),a.model.init().done(function(){a.timeline=n.control.timeline(a.map,a.model,{height:t,position:i,on:{brushend:function(e){a._handleFilter(e)}}}).addTo(a.map)})}});return o});
define("models/map/layer/timeline",["jquery","underscore","backbone","collections/timeline","models/map/layer/timeline/item","mixins/asyncInit"],function(e,t,r,n,i,a){"use strict";var o=r.Model.extend({markerViews:null,start:null,end:null,siteconfig:null,bookconfig:null,initialize:function(t){var r=this;r.markerViews=t.markerViews,r.siteconfig=t.siteconfig,r.$def=e.Deferred(),e.getJSON(r.siteconfig.book.file,function(e){r.bookconfig=e.book,r._initialize(),r.$def.resolve(r)}).fail(function(e,t,n){r.$def.reject()})},_initialize:function(){var e=this,r=new n;e.set("collection",r),t.forEach(e.markerViews,function(n){var a=n.model,o=t.findWhere(e.bookconfig.chapters,{part:a.attributes.citedRange.part,chapter:a.attributes.citedRange.chapter});if(o){var c=o.paragraphs.start+a.attributes.citedRange.paragraph,s=c+1;r.add(new i({start:c,end:s,markerView:n}))}}),e.start=t.min(e.bookconfig.chapters,function(e){return e.paragraphs.start}).paragraphs.start,e.end=t.max(e.bookconfig.chapters,function(e){return e.paragraphs.end}).paragraphs.end},getItems:function(){return this.get("collection").models},tickValues:function(){var e=t.map(this.bookconfig.chapters,function(e){return e.paragraphs.start});return e.sort(function(e,t){return e-t}),e},tickFormat:function(e){var t,r,n=this;for(t=0;t<n.bookconfig.chapters.length;++t)if(r=n.bookconfig.chapters[t],e<=r.paragraphs.end)return e=r.chapter,e===n.bookconfig.chapters.length-1?"":e;return""}});return t.extend(o.prototype,a),o});
define("models/map/layer/timeline/item",["jquery","underscore","backbone"],function(e,n,t){"use strict";var r=t.Model.extend({markerView:null,start:null,end:null,initialize:function(e){var n=this;n.markerView=e.markerView,n.start=e.start,n.end=e.end},duration:function(){return this.end-this.start},compareTo:function(e){}});return r});
require.config({paths:{backbone:"//cdnjs.cloudflare.com/ajax/libs/backbone.js/1.1.2/backbone-min",bootstrap:"//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.5/js/bootstrap.min",d3:"//cdnjs.cloudflare.com/ajax/libs/d3/3.5.6/d3.min",jquery:"//code.jquery.com/jquery-2.1.4.min",leaflet:"//cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.3/leaflet",lightbox:"//cdnjs.cloudflare.com/ajax/libs/magnific-popup.js/1.0.0/jquery.magnific-popup.min",slidesjs:"//cdnjs.cloudflare.com/ajax/libs/slidesjs/3.0/jquery.slides.min",text:"//cdnjs.cloudflare.com/ajax/libs/require-text/2.0.12/text.min",underscore:"//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min",partials:"../partials",xsl:"../script/xsl",pages:"../pages"},shim:{bootstrap:{deps:["jquery"]},backbone:{deps:["jquery","underscore"],exports:"Backbone"},underscore:{exports:"_"},text:{deps:[]},slidesjs:{deps:["jquery"]},lightbox:{deps:["jquery"]}}}),require(["jquery","models/error/user","views/error/user","routes/router","views/app","bootstrap"],function(e,s,o,r,a){"use strict";var i=e("#main").attr("data-config");i?e.getJSON(i,function(e){try{new a,new r({routes:e.pages.routes,config:e})}catch(i){e.debug||new o({model:new s({msg:i.toString()})})}}).fail(function(e,r,a){new o({model:new s({msg:"Failed to load site config file '"+i+"' "+a})})}):new o({model:new s({msg:"No configuration filename specified in home page."})})});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbGxlY3Rpb25zL2FydGljbGVzLmpzIiwiY29sbGVjdGlvbnMvdGltZWxpbmUuanMiLCJjb250cm9sbGVycy9pc3N1ZS5qcyIsImNvbnRyb2xsZXJzL21hcC5qcyIsImNvbnRyb2xsZXJzL3Byb3RvdHlwZS5qcyIsImNvbnRyb2xzL0wuQ29udHJvbC5UaW1lbGluZS5qcyIsIm1peGlucy9hc3luY0luaXQuanMiLCJtaXhpbnMvZG9td2F0Y2hlci5qcyIsIm1peGlucy9mZXRjaHhtbC5qcyIsIm1peGlucy94bWwyaHRtbC5qcyIsInZpZXdzL2FwcC5qcyIsInZpZXdzL2FydGljbGUuanMiLCJ2aWV3cy9jbGVhci5qcyIsInZpZXdzL2lzc3VlLmpzIiwidmlld3MvbWFwLmpzIiwidmlld3MvbWFya2VyLmpzIiwidmlld3MvbWVudS5qcyIsInZpZXdzL3BhZ2UuanMiLCJ2aWV3cy9wYXJ0aWFsLmpzIiwibW9kZWxzL2FydGljbGUuanMiLCJtb2RlbHMvaXNzdWUuanMiLCJtb2RlbHMvbWFwLmpzIiwicm91dGVzL3JvdXRlci5qcyIsImNvbnRyb2xsZXJzL21hcC9sYXllci5qcyIsImNvbnRyb2xsZXJzL21hcC9wYW4uanMiLCJ2aWV3cy9hcnRpY2xlL2dhbGxlcnkuanMiLCJ2aWV3cy9hcnRpY2xlL21lbnUuanMiLCJ2aWV3cy9lcnJvci91c2VyLmpzIiwibW9kZWxzL2Vycm9yL3VzZXIuanMiLCJjb250cm9sbGVycy9tYXAvbGF5ZXIvcGxhY2V0eXBlLmpzIiwiY29udHJvbGxlcnMvbWFwL2xheWVyL3RpbWVsaW5lLmpzIiwidmlld3MvYXJ0aWNsZS9nYWxsZXJ5L2xpZ2h0Ym94LmpzIiwidmlld3MvYXJ0aWNsZS9nYWxsZXJ5L3BvcG92ZXIuanMiLCJ2aWV3cy9hcnRpY2xlL2dhbGxlcnkvc2xpZGVzLmpzIiwidmlld3MvbWFwL2xheWVyL3RpbWVsaW5lLmpzIiwibW9kZWxzL21hcC9sYXllci90aW1lbGluZS5qcyIsIm1vZGVscy9tYXAvbGF5ZXIvdGltZWxpbmUvaXRlbS5qcyIsIm1haW4uanMiXSwibmFtZXMiOlsiZGVmaW5lIiwiJCIsIl8iLCJCYWNrYm9uZSIsIkFydGljbGVNb2RlbCIsIkFydGljbGVzQ29sbGVjdGlvbiIsIkNvbGxlY3Rpb24iLCJleHRlbmQiLCJtb2RlbCIsIlRpbWVsaW5lSXRlbU1vZGVsIiwiVGltZWxpbmVDb2xsZWN0aW9uIiwiQ29udHJvbGxlciIsIkFzeW5jSW5pdCIsIklzc3VlVmlldyIsIklzc3VlTW9kZWwiLCJJc3N1ZUNvbnRyb2xsZXIiLCJ2aWV3Iiwicm91dGVyIiwiaW5pdGlhbGl6ZSIsImFyZ3MiLCJ0aGF0IiwidGhpcyIsIiRkZWYiLCJEZWZlcnJlZCIsImNvbmZpZyIsInJlbmRlciIsImluaXQiLCJkb25lIiwiZm9yRWFjaCIsImdldCIsIm1vZGVscyIsImFydGljbGUiLCJsaXN0ZW5UbyIsInVybCIsIm5hdmlnYXRlIiwidHJpZ2dlciIsInJlbmRlckFydGljbGUiLCJyZXNvbHZlIiwiYWx3YXlzIiwicmVqZWN0IiwicHJvdG90eXBlIiwiTWFwTW9kZWwiLCJNYXBWaWV3IiwiTWFwUGFuQ29udHJvbGxlciIsIk1hcExheWVyQ29udHJvbGxlciIsIk1hcFRpbWVsaW5lQ29udHJvbGxlciIsIk1hcENvbnRyb2xsZXIiLCJpc3N1ZSIsIm1hcFBhbkNvbnRyb2xsZXIiLCJtYXBUaW1lbGluZUNvbnRyb2xsZXIiLCJtYXAiLCJtYXBMYXllckNvbnRyb2xsZXIiLCJtYXBjb25maWciLCJhdHRyaWJ1dGVzIiwiY29udHJvbHNjb25maWciLCJjb250cm9scyIsIm1hcmtlclZpZXdzIiwiX3JlZ2lzdGVyTWFya2VycyIsImZpdE1hcmtlckJvdW5kcyIsIndoZW4iLCJhcHBseSIsIm1hcmtlclZpZXciLCJtYXBQb3B1cE9wZW4iLCJtYXJrZXJMYXllciIsIm1hcmtlciIsIl9nZXRNYXJrZXJMYXllciIsImhhbmRsZVBvcHVwUG9zaXRpb24iLCJnZXRQb3B1cCIsIm1hcFBvcHVwVG9nZ2xlIiwiZXZ0IiwiaG92ZXJQb3B1cCIsIm9wZW5wb3B1cCIsInBvcHVwaWQiLCJtYXBNYXJrZXIiLCJnZXRMYXRMbmciLCJvcGVuUG9wdXAiLCJvYmoiLCJtZXRob2QiLCJtYXBNYXJrZXJMYXllciIsImxheWVycyIsIkwiLCJMYXllckdyb3VwIiwiZ2V0TGF5ZXJzIiwicG9wIiwiaGFzIiwidGFyZ2V0IiwidG9nZ2xlUG9wdXAiLCJtYXBQb3B1cENsb3NlIiwiY2xvc2VQb3B1cCIsImNpZCIsInVuaXF1ZUlkIiwiYXJndW1lbnRzIiwiUm91dGVyIiwiRXZlbnRzIiwiRXJyb3IiLCJkMyIsIkNvbnRyb2wiLCJUaW1lbGluZSIsIm9wdGlvbnMiLCJvcmllbnRhdGlvbiIsImhlaWdodCIsIndpZHRoIiwibWFyZ2luIiwibGVmdCIsInJpZ2h0IiwidG9wIiwiYm90dG9tIiwiY29sbGFwc2VkIiwiaXRlbSIsIm1pbkhlaWdodCIsIm9uIiwidGl0bGUiLCJwb3NpdGlvbiIsInNvdXJjZSIsIlV0aWwiLCJzZXRPcHRpb25zIiwiX21hcCIsIl9zb3VyY2UiLCJjb250YWluZXIiLCJfY29udGFpbmVyIiwiRG9tVXRpbCIsImNyZWF0ZSIsImFkZENsYXNzIiwidG9nZ2xlIiwiX3RvZ2dsZSIsImxpbmsiLCJleHBhbmQiLCJfZXhwYW5kIiwiQnJvd3NlciIsInRvdWNoIiwiRG9tRXZlbnQiLCJzdG9wIiwic3RvcFByb3BhZ2F0aW9uIiwiZGlzYWJsZUNsaWNrUHJvcGFnYXRpb24iLCJvblJlbW92ZSIsIm9uQWRkIiwiX2V4cGFuZGVkIiwiX2NvbGxhcHNlIiwicmVtb3ZlQ2xhc3MiLCJfdGltZWxpbmUiLCJpbm5lckhlaWdodCIsImlubmVyV2lkdGgiLCJ5U2NhbGUiLCJfeFNjYWxlIiwic2NhbGUiLCJsaW5lYXIiLCJyYW5nZSIsIl95U2NhbGUiLCJkb21haW4iLCJzdGFydCIsImVuZCIsInRpbWVsaW5lIiwic2VsZWN0IiwiYXBwZW5kIiwiYXR0ciIsImJhbmQiLCJicnVzaCIsInNlbGVjdEFsbCIsImRhdGEiLCJnZXRJdGVtcyIsImVudGVyIiwiZCIsIm1heCIsImR1cmF0aW9uIiwiX2JydXNoIiwic3ZnIiwieSIsImV4dFN0YXJ0IiwiZXh0ZW50IiwiZXh0RW5kIiwicmVzdWx0cyIsImNsZWFyIiwic2VsZWN0ZWQiLCJlYWNoIiwiaSIsInB1c2giLCJicnVzaGVuZCIsInlCcnVzaCIsImNhbGwiLCJ5QXhpcyIsImF4aXMiLCJvcmllbnQiLCJ0aWNrU2l6ZSIsInRpY2tWYWx1ZXMiLCJ0aWNrRm9ybWF0IiwiY29sbGFwc2UiLCJvZmYiLCJjb250cm9sIiwicHJvbWlzZSIsIkRPTVdhdGNoZXIiLCJ3YXRjaERPTSIsIm1zIiwic2VsIiwibGVuZ3RoIiwiZiIsImRvY3VtZW50IiwiYm9keSIsIndpbmRvdyIsInNldFRpbWVvdXQiLCJGZXRjaFhNTCIsImZldGNoWE1MIiwiJGdldCIsImFqYXgiLCJ0eXBlIiwiZGF0YVR5cGUiLCJzdWNjZXNzIiwiZXJyb3IiLCJqcVhIUiIsInRleHRTdGF0dXMiLCJlcnJvclRocm93biIsIlhNTDJIVE1MIiwiX2RvYyIsInhtbCIsInhtbERvYyIsIkRPTVBhcnNlciIsInBhcnNlRnJvbVN0cmluZyIsIkRvY3VtZW50IiwiaGFzT3duUHJvcGVydHkiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsInhtbDJodG1sIiwieHNsIiwicGFyYW1zIiwibW9kZSIsInhzbERvYyIsInhzbHRQcm9jZXNzb3IiLCJYU0xUUHJvY2Vzc29yIiwiaW1wb3J0U3R5bGVzaGVldCIsImtleXMiLCJrZXkiLCJzZXRQYXJhbWV0ZXIiLCJyZXN1bHQiLCJkb2MiLCJ0cmFuc2Zvcm1Ub0RvY3VtZW50IiwibmF2aWdhdG9yIiwidXNlckFnZW50IiwiaW5kZXhPZiIsImRvY3VtZW50RWxlbWVudCIsInRleHRDb250ZW50IiwiaW5uZXJIVE1MIiwiZSIsInRvU3RyaW5nIiwiQXBwVmlldyIsIlZpZXciLCJlbCIsInJlc2l6ZSIsImxvY2F0aW9uIiwicmVsb2FkIiwiR2FsbGVyeVZpZXciLCJBcnRpY2xlVmlldyIsImlkIiwiJGVsIiwiZmluZCIsImh0bWwiLCJhcnRpY2xlLWRpciIsImFydGljbGVzIiwicGF0aEJhc2UiLCJpY29uVXJsIiwicmVtb3ZlIiwiY29uc29sZSIsImxvZyIsImNsaWNrIiwiZWx0IiwidG1wbCIsIkNsZWFyVmlldyIsImVtcHR5IiwidGVtcGxhdGUiLCJtYXBQYXJ0aWFsIiwiTWFya2VyVmlldyIsInRhZ05hbWUiLCJjaGlsZHJlbiIsIl9pbml0TWFwIiwiTWFwIiwiVGlsZUxheWVyIiwidGlsZUxheWVyIiwib3B0cyIsImFkZFRvIiwicmVuZXdWaWV3cyIsIm12IiwibGVnZW5kUGFydGlhbCIsImluaXRNYXJrZXJMYXllciIsImdlb2pzb24iLCJnZXRHZW9qc29uIiwiaWNvbkNvbmZpZyIsImZlYXR1cmVzIiwiaWNvbiIsImdlb0pzb24iLCJvbkVhY2hGZWF0dXJlIiwiZmVhdHVyZSIsInBvcHVwIiwic2V0Q29udGVudCIsImFydGljbGVpZCIsImJpbmRQb3B1cCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJwb2ludFRvTGF5ZXIiLCJsYXRsbmciLCJjbGlja2FibGUiLCJwcm9wZXJ0aWVzIiwidGV4dCIsIm1hcmtlcm5hbWUiLCJvcGFjaXR5IiwicmlzZU9uSG92ZXIiLCJtZW51VG1wbCIsIkFydGljbGVNZW51VmlldyIsIk1lbnVWaWV3IiwiaXRlbXMiLCJtZW51IiwicHJvbWlzZXMiLCJ0ZW1wbGF0ZXMiLCJjb2xsZWN0aW9ucyIsInBhcnRpYWwiLCJjb2xsZWN0aW9uIiwicmVxdWlyZSIsInRlbXBsIiwiY29udGVudCIsInNvcnRlciIsInN1YkNvbnRlbnQiLCJzb3J0S2V5cyIsImoiLCIkbGkiLCJocmVmIiwicmVwbGFjZSIsImFtdiIsIkVsZW1lbnQiLCJub2RlTmFtZSIsIm91dGVySFRNTCIsImNsb25lIiwic29ydCIsImEiLCJiIiwibG9jYWxlQ29tcGFyZSIsImxhYmVsIiwidGhlbiIsIiRmYWlsRGVmIiwiZmFpbCIsInBhZ2UiLCJQYWdlVmlldyIsIlBhcnRpYWxWaWV3IiwiJHdhdGNoRGVmIiwiZ2VvSnNvblhzbCIsImNpdGVkUmFuZ2VYc2wiLCJNb2RlbCIsInNldCIsIl9ta0dlb2pzb24iLCJfbWtDaXRlZFJhbmdlIiwibGF5ZXIiLCJkZWZhdWx0cyIsInBsYWNlVHlwZSIsImNpdGVkUmFuZ2UiLCJqc29uU3RyaW5nIiwiSlNPTiIsInBhcnNlIiwiQXJ0aWNsZUNvbGxlY3Rpb24iLCJhcnRkaXIiLCJtYXRjaCIsImZpbGVzIiwiY29sIiwidW5kZWZpbmVkIiwiZmlsZSIsImFydGljbGVkaXIiLCJwYXRoIiwiaW5pdHMiLCJhZGQiLCJzZXRJY29ucyIsIiRwcm9taXNlIiwic3RhdGUiLCJpY2NvbmZpZyIsIm1hcmtlcnMiLCJpY29ucyIsImljb25GaWxlcyIsInNodWZmbGUiLCJmbGF0dGVuIiwiZW50cnkiLCJkaXIiLCJjb25jYXQiLCJkZWZhdWx0SWNvbkZpbGUiLCJnZXRBcnRpY2xlIiwiYXJ0IiwiYXQiLCJnZXRKU09OIiwianF4aHIiLCJVc2VyRXJyb3JNb2RlbCIsIlVzZXJFcnJvclZpZXciLCJwYWdlcyIsImlzc3VlQ29udHJvbGxlciIsIm1hcENvbnRyb2xsZXIiLCJoaXN0b3J5IiwiZnJhZ21lbnQiLCJwYWdlQ29uZmlnIiwibWFwUGFnZSIsImhvbWUiLCJwYyIsInZpZXdOYW1lIiwic3RyaW5naWZ5IiwiY29uZmciLCJmdWxsIiwidiIsIlBsYWNlVHlwZUNvbnRyb2xsZXIiLCJUaW1lbGluZUNvbnRyb2xsZXIiLCJzdWJDb250cm9sbGVycyIsInBsYWNldHlwZSIsImVuYWJsZSIsInZpZXdzIiwic2l0ZWNvbmZpZyIsInN1YkNvbnRyb2xsZXIiLCJfdXBkYXRlTWFya2VycyIsInNob3ciLCJoaWRlIiwicmVzIiwiZ2V0RmlsdGVyU3RhdGUiLCJmb3VuZCIsImhpZGRlbkxheWVyIiwiYWRkTGF5ZXIiLCJyZW1vdmVMYXllciIsIl9maXRNYXJrZXJCb3VuZHMiLCJnZXRFbGVtZW50QnlJZCIsImVkZ2VQdFgiLCJnZXRWaWV3cG9ydE9mZnNldCIsIngiLCJib3VuZHMiLCJsYXRMbmdCb3VuZHMiLCJsbmdMYXQiLCJnZW9tZXRyeSIsImNvb3JkaW5hdGVzIiwic2xpY2UiLCJsYXRMbmciLCJyZXZlcnNlIiwiZml0Qm91bmRzIiwiZ2V0U2l6ZSIsInBhZGRpbmdCb3R0b21SaWdodCIsImNsaWVudFdpZHRoIiwiaW52YWxpZGF0ZVNpemUiLCIkcG9wdXBXcmFwIiwicG9wdXBMYXRMbmciLCJwb3B1cFJpZ2h0WCIsInBhZCIsImdldENvbnRlbnQiLCJjbG9zZXN0IiwiZmlyc3QiLCJwb2ludCIsImF1dG9QYW5QYWRkaW5nQm90dG9tUmlnaHQiLCJhdXRvUGFuUGFkZGluZyIsIm9mZnNldCIsInBhbkJ5IiwiZ2V0Qm91bmRzIiwiY29udGFpbnMiLCJBcnRpY2xlR2FsbGVyeVBvcG92ZXJWaWV3IiwiQXJ0aWNsZUdhbGxlcnlMaWdodGJveFZpZXciLCJBcnRpY2xlR2FsbGVyeVNsaWRlc1ZpZXciLCJBcnRpY2xlR2FsbGVyeVZpZXciLCJvdXRlckhlaWdodCIsImNzcyIsImRlZnMiLCJpbWciLCJsb2FkIiwiYW1Yc2wiLCJtZW51aXRlbSIsIm1vZGFsIiwia2V5Ym9hcmQiLCJtc2ciLCJtZXNzYWdlIiwiUGxhY2V0eXBlQ29udHJvbGxlciIsImxlZ2VuZFRlbXBsIiwibGF5ZXJNYXJrZXJzIiwiZ3JvdXBCeSIsImdldENvbnRhaW5lciIsIk9iamVjdCIsImxheWVyTmFtZSIsImtsYXNzIiwibGF5ZXJMZWdlbmQiLCJtYXJrZXJMYXllcnMiLCJsYXllckdyb3VwIiwiYWRkT3ZlcmxheSIsIl9vbklucHV0Q2xpY2siLCJpbnB1dCIsImlucHV0cyIsIl9mb3JtIiwiaW5wdXRzTGVuIiwiX2hhbmRsaW5nQ2xpY2siLCJfbGF5ZXJzIiwibGF5ZXJJZCIsImNoZWNrZWQiLCJfcmVmb2N1c09uTWFwIiwiVGltZWxpbmVWaWV3IiwiVGltZWxpbmVNb2RlbCIsIl9oYW5kbGVGaWx0ZXJFdmVudCIsInNob3dMYXllcnMiLCJoaWRlTGF5ZXJzIiwic2hvd0lkcyIsImZpbHRlciIsImxpZ2h0Ym94VGl0bGVUZW1wbCIsIm1hZ25pZmljUG9wdXAiLCJnYWxsZXJ5IiwiZW5hYmxlZCIsImltYWdlIiwidGl0bGVTcmMiLCIkaXRlbSIsIiRwbyIsInBjdCIsInBvcG92ZXJUZW1wbCIsInBvcG92ZXJDb250ZW50VGVtcGwiLCJnZXRBdHRyaWJ1dGUiLCJwb3BvdmVyIiwicGxhY2VtZW50Iiwic2xpZGVzanMiLCJuYXZpZ2F0aW9uIiwiYWN0aXZlIiwiZWZmZWN0IiwicGFnaW5hdGlvbiIsImZhZGUiLCJzcGVlZCIsImNyb3NzZmFkZSIsImNhbGxiYWNrIiwibG9hZGVkIiwibnVtYmVyIiwiJGltZyIsInZpc2liaWxpdHkiLCJtYXhIZWlnaHQiLCJtYXhXaWR0aCIsInBhcnNlSW50IiwiY29tcGxldGUiLCJuZXdJbWciLCJ0aW1lbGluZUNvbnRyb2xQYXJ0aWFsIiwiX3RpbWVsaW5lQ29sbGFwc2UiLCJfaGFuZGxlRmlsdGVyIiwiY29udHJvbGhlaWdodCIsIm1hcGhlaWdodCIsImRvY3VtZW50aGVpZ2h0IiwiY2xpZW50SGVpZ2h0IiwiTWF0aCIsImFicyIsIlRpbWVsaW5lSXRlbSIsImJvb2tjb25maWciLCJib29rIiwiX2luaXRpYWxpemUiLCJib29rQ2hhcHRlciIsImZpbmRXaGVyZSIsImNoYXB0ZXJzIiwicGFydCIsImNoYXB0ZXIiLCJwYXJhZ3JhcGhzIiwicGFyYWdyYXBoIiwibWluIiwidmFsdWVzIiwicCIsImNvbXBhcmVUbyIsInBhdGhzIiwiYmFja2JvbmUiLCJib290c3RyYXAiLCJqcXVlcnkiLCJsZWFmbGV0IiwibGlnaHRib3giLCJ1bmRlcnNjb3JlIiwicGFydGlhbHMiLCJzaGltIiwiZGVwcyIsImV4cG9ydHMiLCJjb25maWdmaWxlIiwicm91dGVzIiwiZGVidWciXSwibWFwcGluZ3MiOiJBQUNBQSxPQUFPLHdCQUNILFNBQ0EsYUFDQSxXQUNBLGtCQUNELFNBQVNDLEVBQUVDLEVBQUVDLEVBQVNDLEdBQ3JCLFlBQ0EsSUFBSUMsR0FBcUJGLEVBQVNHLFdBQVdDLFFBQ3pDQyxNQUFPSixHQUVYLE9BQU9DO0FD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aW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKmdsb2JhbCBkZWZpbmUgKi9cbmRlZmluZSgnY29sbGVjdGlvbnMvYXJ0aWNsZXMnLCBbXG4gICAgJ2pxdWVyeScsIFxuICAgICd1bmRlcnNjb3JlJywgXG4gICAgJ2JhY2tib25lJyxcbiAgICAnbW9kZWxzL2FydGljbGUnXG5dLCBmdW5jdGlvbigkLF8sQmFja2JvbmUsQXJ0aWNsZU1vZGVsKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBBcnRpY2xlc0NvbGxlY3Rpb24gPSBCYWNrYm9uZS5Db2xsZWN0aW9uLmV4dGVuZCh7XG4gICAgICAgIG1vZGVsOiBBcnRpY2xlTW9kZWxcbiAgICB9KTsgICAgXG4gICAgcmV0dXJuIEFydGljbGVzQ29sbGVjdGlvbjtcbn0pO1xuIiwiLypnbG9iYWwgZGVmaW5lICovXG5kZWZpbmUoJ2NvbGxlY3Rpb25zL3RpbWVsaW5lJywgW1xuICAgICdqcXVlcnknLCBcbiAgICAndW5kZXJzY29yZScsIFxuICAgICdiYWNrYm9uZScsXG4gICAgJ21vZGVscy9tYXAvbGF5ZXIvdGltZWxpbmUvaXRlbSdcbl0sIGZ1bmN0aW9uKCQsXyxCYWNrYm9uZSxUaW1lbGluZUl0ZW1Nb2RlbCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgVGltZWxpbmVDb2xsZWN0aW9uID0gQmFja2JvbmUuQ29sbGVjdGlvbi5leHRlbmQoe1xuICAgICAgICBtb2RlbDogVGltZWxpbmVJdGVtTW9kZWxcbiAgICB9KTsgICAgXG4gICAgcmV0dXJuIFRpbWVsaW5lQ29sbGVjdGlvbjtcbn0pO1xuIiwiLypnbG9iYWwgZGVmaW5lKi9cbmRlZmluZSgnY29udHJvbGxlcnMvaXNzdWUnLCBbXG4gICAgICAnanF1ZXJ5J1xuICAgICwgJ3VuZGVyc2NvcmUnXG4gICAgLCAnYmFja2JvbmUnXG4gICAgLCAnY29udHJvbGxlcnMvcHJvdG90eXBlJ1xuICAgICwgJ21peGlucy9hc3luY0luaXQnXG4gICAgLCAndmlld3MvaXNzdWUnXG4gICAgLCAnbW9kZWxzL2lzc3VlJ1xuXSwgZnVuY3Rpb24oJCxfLEJhY2tib25lLENvbnRyb2xsZXIsQXN5bmNJbml0LElzc3VlVmlldyxJc3N1ZU1vZGVsKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBJc3N1ZUNvbnRyb2xsZXIgPSBDb250cm9sbGVyLmV4dGVuZCh7XG4gICAgICAgICAgbW9kZWw6IG51bGxcbiAgICAgICAgLCB2aWV3IDogbnVsbFxuICAgICAgICAsIHJvdXRlcjogbnVsbFxuICAgICAgICAsIGluaXRpYWxpemU6IGZ1bmN0aW9uKGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIHRoYXQuJGRlZiA9ICQuRGVmZXJyZWQoKTtcbiAgICAgICAgICAgIHRoYXQucm91dGVyID0gYXJncy5yb3V0ZXI7XG4gICAgICAgICAgICB0aGF0Lm1vZGVsID0gbmV3IElzc3VlTW9kZWwoeyBjb25maWc6IGFyZ3MuY29uZmlnIH0pO1xuICAgICAgICAgICAgdGhhdC52aWV3ID0gbmV3IElzc3VlVmlldyh7XG4gICAgICAgICAgICAgICAgICBtb2RlbDogdGhhdC5tb2RlbFxuICAgICAgICAgICAgICAgICwgY29uZmlnOiBhcmdzLmNvbmZpZ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGF0LnZpZXcucmVuZGVyKCk7XG4gICAgICAgICAgICB0aGF0Lm1vZGVsLmluaXQoKS5kb25lKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIF8uZm9yRWFjaCh0aGF0Lm1vZGVsLmdldCgnY29sbGVjdGlvbicpLm1vZGVscywgZnVuY3Rpb24oYXJ0aWNsZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGF0Lmxpc3RlblRvKGFydGljbGUsICdhY3RpdmUnLCBmdW5jdGlvbihhcnRpY2xlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdXJsID0gJ2FydGljbGUvJyArIGFydGljbGUuZ2V0KCdhcnRpY2xlaWQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQucm91dGVyLm5hdmlnYXRlKHVybCwge3RyaWdnZXI6IHRydWV9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQudmlldy5yZW5kZXJBcnRpY2xlKGFydGljbGUpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGF0LiRkZWYucmVzb2x2ZSh0aGF0KTtcbiAgICAgICAgICAgIH0pLmFsd2F5cyhmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB0aGF0LiRkZWYucmVqZWN0KCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIF8uZXh0ZW5kKElzc3VlQ29udHJvbGxlci5wcm90b3R5cGUsQXN5bmNJbml0KTtcbiAgICByZXR1cm4gSXNzdWVDb250cm9sbGVyO1xufSk7XG4iLCIvKmdsb2JhbCBkZWZpbmUqL1xuZGVmaW5lKCdjb250cm9sbGVycy9tYXAnLCBbXG4gICAgICAnanF1ZXJ5J1xuICAgICwgJ3VuZGVyc2NvcmUnXG4gICAgLCAnYmFja2JvbmUnXG4gICAgLCAnY29udHJvbGxlcnMvcHJvdG90eXBlJ1xuICAgICwgJ21vZGVscy9tYXAnXG4gICAgLCAndmlld3MvbWFwJ1xuICAgICwgJ21peGlucy9hc3luY0luaXQnXG4gICAgLCAnY29udHJvbGxlcnMvbWFwL3BhbidcbiAgICAsICdjb250cm9sbGVycy9tYXAvbGF5ZXInXG5dLCBmdW5jdGlvbigkLF8sQmFja2JvbmUsQ29udHJvbGxlcixNYXBNb2RlbCxNYXBWaWV3LEFzeW5jSW5pdCxNYXBQYW5Db250cm9sbGVyLE1hcExheWVyQ29udHJvbGxlcixNYXBUaW1lbGluZUNvbnRyb2xsZXIpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIE1hcENvbnRyb2xsZXIgPSBDb250cm9sbGVyLmV4dGVuZCh7XG4gICAgICAgICAgbW9kZWw6IG51bGxcbiAgICAgICAgLCB2aWV3OiAgbnVsbFxuICAgICAgICAsIGlzc3VlOiBudWxsXG4gICAgICAgICwgY29uZmlnOiBudWxsXG4gICAgICAgICwgbWFwUGFuQ29udHJvbGxlciA6IG51bGxcbiAgICAgICAgLCBNYXBMYXllckNvbnRyb2xsZXIgOiBudWxsXG4gICAgICAgICwgbWFwVGltZWxpbmVDb250cm9sbGVyIDogbnVsbFxuICAgICAgICAsIGluaXRpYWxpemU6IGZ1bmN0aW9uKGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIHRoYXQuJGRlZiA9ICQuRGVmZXJyZWQoKTtcbiAgICAgICAgICAgIHRoYXQuY29uZmlnID0gYXJncy5jb25maWc7XG4gICAgICAgICAgICB0aGF0LnJvdXRlciA9IGFyZ3Mucm91dGVyO1xuICAgICAgICAgICAgdGhhdC5pc3N1ZSA9IGFyZ3MuaXNzdWU7XG4gICAgICAgICAgICB0aGF0Lm1vZGVsID0gbmV3IE1hcE1vZGVsKGFyZ3MpO1xuICAgICAgICAgICAgdGhhdC52aWV3ID0gbmV3IE1hcFZpZXcoe1xuICAgICAgICAgICAgICAgICAgbW9kZWw6ICB0aGF0Lm1vZGVsXG4gICAgICAgICAgICAgICAgLCByb3V0ZXI6IHRoYXQucm91dGVyXG4gICAgICAgICAgICAgICAgLCBpc3N1ZTogdGhhdC5pc3N1ZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGF0LnZpZXcuaW5pdCgpLmRvbmUoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdGhhdC5tYXBQYW5Db250cm9sbGVyID0gbmV3IE1hcFBhbkNvbnRyb2xsZXIoe1xuICAgICAgICAgICAgICAgICAgICBtYXA6IHRoYXQudmlldy5tYXBcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGF0Lm1hcExheWVyQ29udHJvbGxlciA9IG5ldyBNYXBMYXllckNvbnRyb2xsZXIoe1xuICAgICAgICAgICAgICAgICAgICAgIHZpZXcgIDogdGhhdC52aWV3XG4gICAgICAgICAgICAgICAgICAgICwgbWFwICAgOiB0aGF0LnZpZXcubWFwXG4gICAgICAgICAgICAgICAgICAgICwgbW9kZWwgOiB0aGF0Lm1vZGVsXG4gICAgICAgICAgICAgICAgICAgICwgbWFwY29uZmlnOiB0aGF0Lm1vZGVsLmF0dHJpYnV0ZXMubWFwY29uZmlnXG4gICAgICAgICAgICAgICAgICAgICwgY29udHJvbHNjb25maWc6IHRoYXQuY29uZmlnLmNvbnRyb2xzXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhhdC5saXN0ZW5Ubyh0aGF0LnZpZXcsICdtYXJrZXJzJywgZnVuY3Rpb24obWFya2VyVmlld3Mpe1xuICAgICAgICAgICAgICAgICAgICB0aGF0Ll9yZWdpc3Rlck1hcmtlcnMobWFya2VyVmlld3MpO1xuICAgICAgICAgICAgICAgICAgICB0aGF0Lm1hcFBhbkNvbnRyb2xsZXIuZml0TWFya2VyQm91bmRzKHRoYXQudmlldy5tYXJrZXJWaWV3cyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhhdC52aWV3LnJlbmRlcigpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAkLndoZW4uYXBwbHkobnVsbCxbdGhhdC5tb2RlbC5pbml0KCksIHRoYXQudmlldy5pbml0KCldKS5kb25lKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHRoYXQuJGRlZi5yZXNvbHZlKHRoYXQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgLCBfcmVnaXN0ZXJNYXJrZXJzIDogZnVuY3Rpb24obWFya2VyVmlld3MpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIF8uZm9yRWFjaChtYXJrZXJWaWV3cywgZnVuY3Rpb24obWFya2VyVmlldykge1xuICAgICAgICAgICAgICAgIHRoYXQubGlzdGVuVG8obWFya2VyVmlldy5tb2RlbCwgJ2FjdGl2ZScsIGZ1bmN0aW9uKGFydGljbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5tYXBQb3B1cE9wZW4obWFya2VyVmlldy5tYXJrZXJMYXllcik7XG4gICAgICAgICAgICAgICAgICAgIHZhciBtYXJrZXIgPSB0aGF0Ll9nZXRNYXJrZXJMYXllcihtYXJrZXJWaWV3Lm1hcmtlckxheWVyLCAnZ2V0UG9wdXAnKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1hcmtlciAhPT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQubWFwUGFuQ29udHJvbGxlci5oYW5kbGVQb3B1cFBvc2l0aW9uKG1hcmtlci5nZXRQb3B1cCgpKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGF0Lmxpc3RlblRvKG1hcmtlclZpZXcubW9kZWwsICd0b2dnbGUnLCBmdW5jdGlvbihhcnRpY2xlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoYXQubWFwUG9wdXBUb2dnbGUobWFya2VyVmlldy5tYXJrZXJMYXllcik7XG4gICAgICAgICAgICAgICAgICAgIHZhciBtYXJrZXIgPSB0aGF0Ll9nZXRNYXJrZXJMYXllcihtYXJrZXJWaWV3Lm1hcmtlckxheWVyLCAnZ2V0UG9wdXAnKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1hcmtlciAhPT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQubWFwUGFuQ29udHJvbGxlci5oYW5kbGVQb3B1cFBvc2l0aW9uKG1hcmtlci5nZXRQb3B1cCgpKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGF0Lmxpc3RlblRvKG1hcmtlclZpZXcsICdjbGljaycsIGZ1bmN0aW9uKGV2dCkge1xuICAgICAgICAgICAgICAgICAgICB0aGF0Lm1hcFBvcHVwT3BlbihldnQpO1xuICAgICAgICAgICAgICAgICAgICBtYXJrZXJWaWV3Lm1vZGVsLnRyaWdnZXIoJ2FjdGl2ZScsIG1hcmtlclZpZXcubW9kZWwpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoYXQubGlzdGVuVG8obWFya2VyVmlldywnbW91c2VvdmVyJywgZnVuY3Rpb24oZXZ0KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhhdC52aWV3Lm1hcC5ob3ZlclBvcHVwKSByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIGlmIChvcGVucG9wdXBbcG9wdXBpZChtYXBNYXJrZXIuZ2V0TGF0TG5nKCkpXSkgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICBtYXBNYXJrZXIub3BlblBvcHVwKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICAsIF9nZXRNYXJrZXJMYXllciA6IGZ1bmN0aW9uKG9iaixtZXRob2QpIHtcbiAgICAgICAgICAgIHZhciBtYXBNYXJrZXJMYXllciwgbGF5ZXJzO1xuICAgICAgICAgICAgaWYgKG9iaiBpbnN0YW5jZW9mIEwuTGF5ZXJHcm91cCkge1xuICAgICAgICAgICAgICAgIGlmIChtZXRob2QgaW4gb2JqKSB7XG4gICAgICAgICAgICAgICAgICAgIG1hcE1hcmtlckxheWVyID0gb2JqO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGxheWVycyA9IG9iai5nZXRMYXllcnMoKTtcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKG9iaiA9IGxheWVycy5wb3AoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1ldGhvZCBpbiBvYmopIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXBNYXJrZXJMYXllciA9IG9iajtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoXy5oYXMob2JqLCAnb3JpZ2luYWxFdmVudCcpKSB7XG4gICAgICAgICAgICAgICAgbWFwTWFya2VyTGF5ZXIgPSBvYmoudGFyZ2V0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG1hcE1hcmtlckxheWVyO1xuICAgICAgICB9XG4gICAgICAgICwgbWFwUG9wdXBPcGVuOiBmdW5jdGlvbihvYmopIHtcbiAgICAgICAgICAgIHZhciBtYXBNYXJrZXJMYXllciA9IHRoaXMuX2dldE1hcmtlckxheWVyKG9iaiwgJ29wZW5Qb3B1cCcpO1xuICAgICAgICAgICAgaWYgKCFtYXBNYXJrZXJMYXllcikgcmV0dXJuO1xuICAgICAgICAgICAgbWFwTWFya2VyTGF5ZXIub3BlblBvcHVwKCk7XG4gICAgICAgIH1cbiAgICAgICAgLCBtYXBQb3B1cFRvZ2dsZTogZnVuY3Rpb24ob2JqKSB7XG4gICAgICAgICAgICB2YXIgbWFwTWFya2VyTGF5ZXIgPSB0aGlzLl9nZXRNYXJrZXJMYXllcihvYmosICd0b2dnbGVQb3B1cCcpO1xuICAgICAgICAgICAgaWYgKCFtYXBNYXJrZXJMYXllcikgcmV0dXJuO1xuICAgICAgICAgICAgbWFwTWFya2VyTGF5ZXIudG9nZ2xlUG9wdXAoKTtcbiAgICAgICAgfVxuICAgICAgICAsIG1hcFBvcHVwQ2xvc2U6IGZ1bmN0aW9uKG9iaikge1xuICAgICAgICAgICAgdmFyIG1hcE1hcmtlckxheWVyID0gdGhpcy5fZ2V0TWFya2VyTGF5ZXIob2JqLCAnY2xvc2VQb3B1cCcpO1xuICAgICAgICAgICAgaWYgKCFtYXBNYXJrZXJMYXllcikgcmV0dXJuO1xuICAgICAgICAgICAgbWFwTWFya2VyTGF5ZXIuY2xvc2VQb3B1cCgpO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgXy5leHRlbmQoTWFwQ29udHJvbGxlci5wcm90b3R5cGUsQXN5bmNJbml0KTtcbiAgICByZXR1cm4gTWFwQ29udHJvbGxlcjtcbn0pO1xuIiwiLypnbG9iYWwgZGVmaW5lKi9cbmRlZmluZSgnY29udHJvbGxlcnMvcHJvdG90eXBlJywgW1xuICAgICAgJ3VuZGVyc2NvcmUnXG4gICAgLCAnYmFja2JvbmUnXG5dLCBmdW5jdGlvbihfLEJhY2tib25lKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBDb250cm9sbGVyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMuY2lkID0gXy51bmlxdWVJZCgnY29udHJvbGxlcicpO1xuICAgICAgICB0aGlzLmluaXRpYWxpemUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9O1xuICAgIENvbnRyb2xsZXIuZXh0ZW5kID0gQmFja2JvbmUuUm91dGVyLmV4dGVuZDtcbiAgICBfLmV4dGVuZChDb250cm9sbGVyLnByb3RvdHlwZSwgQmFja2JvbmUuRXZlbnRzKTtcbiAgICBfLmV4dGVuZChDb250cm9sbGVyLnByb3RvdHlwZSwgeyBcbiAgICAgICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3VuaW1wbGVtZW50ZWQgaW5pdGlhbGl6ZSgpJyk7XG4gICAgICAgIH0gXG4gICAgfSk7XG4gICAgcmV0dXJuIENvbnRyb2xsZXI7XG59KTsiLCJkZWZpbmUoJ2NvbnRyb2xzL0wuQ29udHJvbC5UaW1lbGluZScsIFtcbiAgICAgICdsZWFmbGV0J1xuICAgICwgJ2QzJ1xuXSwgZnVuY3Rpb24gKEwsZDMpIHtcbiAgICBpZiAoTC5Db250cm9sLlRpbWVsaW5lKSByZXR1cm4gTDtcbiAgICBMLkNvbnRyb2wuVGltZWxpbmUgPSBMLkNvbnRyb2wuZXh0ZW5kKHtcbiAgICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgICAgICAgb3JpZW50YXRpb24gOiAnbGVmdCdcbiAgICAgICAgICAgICAgLCBoZWlnaHQgICAgICA6IDUwMFxuICAgICAgICAgICAgICAsIHdpZHRoICAgICAgIDogMTAwXG4gICAgICAgICAgICAgICwgbWFyZ2luICAgICAgOiB7IGxlZnQ6IDMsIHJpZ2h0OiAzLCB0b3A6IDEwLCBib3R0b206IDUgfVxuICAgICAgICAgICAgICAsIGNvbGxhcHNlZCAgIDogdHJ1ZVxuICAgICAgICAgICAgICAsIGl0ZW0gICAgICAgIDoge21pbkhlaWdodDoxfVxuICAgICAgICAgICAgICAsIG9uICAgICAgICAgIDogbnVsbFxuICAgICAgICAgICAgICAsIHRpdGxlICAgICAgIDogJ1RpbWVsaW5lJ1xuICAgICAgICAgICAgICAsIHBvc2l0aW9uICAgIDogJ3RvcGxlZnQnXG4gICAgICAgIH1cbiAgICAgICAgLCBpbml0aWFsaXplIDogZnVuY3Rpb24obWFwLCBzb3VyY2UsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIEwuVXRpbC5zZXRPcHRpb25zKHRoaXMsIG9wdGlvbnMpO1xuICAgICAgICAgICAgdGhpcy5fbWFwID0gbWFwO1xuICAgICAgICAgICAgdGhpcy5fc291cmNlID0gc291cmNlO1xuICAgICAgICAgICAgdmFyIGNvbnRhaW5lciA9IHRoaXMuX2NvbnRhaW5lciA9IEwuRG9tVXRpbC5jcmVhdGUoJ2RpdicsJ2xlYWZsZXQtY29udHJvbC10aW1lbGluZSBsZWFmbGV0LWNvbnRyb2wnKTtcbiAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMuY29sbGFwc2VkKSB7XG4gICAgICAgICAgICAgICAgTC5Eb21VdGlsLmFkZENsYXNzKGNvbnRhaW5lciwgJ2xlYWZsZXQtY29udHJvbC10aW1lbGluZS1jb2xsYXBzZWQnKTtcbiAgICAgICAgICAgICAgICB2YXIgdG9nZ2xlID0gdGhpcy5fdG9nZ2xlID0gTC5Eb21VdGlsLmNyZWF0ZSgnYScsICdsZWFmbGV0LWNvbnRyb2wtdGltZWxpbmUtdG9nZ2xlJywgY29udGFpbmVyKTtcbiAgICAgICAgICAgICAgICB0b2dnbGUudGl0bGUgPSB0aGlzLm9wdGlvbnMudGl0bGU7XG4gICAgICAgICAgICAgICAgdG9nZ2xlLmxpbmsgPSAnIyc7XG4gICAgICAgICAgICAgICAgdmFyIGV4cGFuZCA9IGZ1bmN0aW9uKCkgeyB0aGF0Ll9leHBhbmQoKTsgfTtcbiAgICAgICAgICAgICAgICBpZiAoTC5Ccm93c2VyLnRvdWNoKSB7XG4gICAgICAgICAgICAgICAgICAgIEwuRG9tRXZlbnRcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbih0b2dnbGUsICdjbGljaycsIEwuRG9tRXZlbnQuc3RvcClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbih0b2dnbGUsICdjbGljaycsIGV4cGFuZCwgdGhpcyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgTC5Eb21FdmVudC5vbih0b2dnbGUsICdjbGljaycsIGV4cGFuZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBMLkRvbVV0aWwuYWRkQ2xhc3MoY29udGFpbmVyLCAnbGVhZmxldC1jb250cm9sLXRpbWVsaW5lLWV4cGFuZGVkJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIUwuQnJvd3Nlci50b3VjaCkge1xuICAgICAgICAgICAgICAgIEwuRG9tRXZlbnQuZGlzYWJsZUNsaWNrUHJvcGFnYXRpb24odGhpcy5fY29udGFpbmVyKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgTC5Eb21FdmVudC5vbih0aGlzLl9jb250YWluZXIsICdjbGljaycsIEwuRG9tRXZlbnQuc3RvcFByb3BhZ2F0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjb250YWluZXI7XG4gICAgICAgIH1cbiAgICAgICAgLCBvblJlbW92ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAvLyBkbyBhbnkgY2xlYW51cCBoZXJlXG4gICAgICAgIH1cbiAgICAgICAgLCBvbkFkZDogZnVuY3Rpb24obWFwKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fY29udGFpbmVyO1xuICAgICAgICB9XG4gICAgICAgICwgX2V4cGFuZDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICBpZiAodGhhdC5fZXhwYW5kZWQpIHJldHVybjtcbiAgICAgICAgICAgIHRoYXQuX2V4cGFuZGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuX21hcC5vbignY2xpY2snLCB0aGlzLl9jb2xsYXBzZSwgdGhpcyk7XG5cbiAgICAgICAgICAgIEwuRG9tVXRpbC5yZW1vdmVDbGFzcyh0aGlzLl9jb250YWluZXIsICdsZWFmbGV0LWNvbnRyb2wtdGltZWxpbmUtY29sbGFwc2VkJyk7XG4gICAgICAgICAgICBMLkRvbVV0aWwuYWRkQ2xhc3ModGhpcy5fY29udGFpbmVyLCAnbGVhZmxldC1jb250cm9sLXRpbWVsaW5lLWV4cGFuZGVkJyk7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLl90aW1lbGluZSkgcmV0dXJuO1xuXG4gICAgICAgICAgICB2YXIgaW5uZXJIZWlnaHQgPSB0aGlzLm9wdGlvbnMuaGVpZ2h0IC0gdGhpcy5vcHRpb25zLm1hcmdpbi50b3AgICAtIHRoaXMub3B0aW9ucy5tYXJnaW4uYm90dG9tO1xuICAgICAgICAgICAgdmFyIGlubmVyV2lkdGggID0gdGhpcy5vcHRpb25zLndpZHRoICAtIHRoaXMub3B0aW9ucy5tYXJnaW4ucmlnaHQgLSB0aGlzLm9wdGlvbnMubWFyZ2luLmxlZnQ7XG5cbiAgICAgICAgICAgIHZhciB4U2NhbGUgPSB0aGlzLl94U2NhbGUgPSBkMy5zY2FsZS5saW5lYXIoKVxuICAgICAgICAgICAgICAgIC5yYW5nZShbMCxpbm5lcldpZHRoXSk7XG5cbiAgICAgICAgICAgIHZhciB5U2NhbGUgPSB0aGlzLl95U2NhbGUgPSBkMy5zY2FsZS5saW5lYXIoKVxuICAgICAgICAgICAgICAgIC5kb21haW4oW3RoaXMuX3NvdXJjZS5zdGFydCx0aGlzLl9zb3VyY2UuZW5kXSlcbiAgICAgICAgICAgICAgICAucmFuZ2UoWzAsaW5uZXJIZWlnaHRdKTtcblxuICAgICAgICAgICAgdmFyIHRpbWVsaW5lID0gdGhpcy5fdGltZWxpbmUgPSBkMy5zZWxlY3QoJy5sZWFmbGV0LWNvbnRyb2wtdGltZWxpbmUnKVxuICAgICAgICAgICAgICAgIC5hcHBlbmQoJ3N2ZycpXG4gICAgICAgICAgICAgICAgLmF0dHIoJ2lkJywgJ3RpbWVsaW5lJylcbiAgICAgICAgICAgICAgICAuYXR0cignaGVpZ2h0JywgdGhpcy5vcHRpb25zLmhlaWdodClcbiAgICAgICAgICAgICAgICAuYXR0cignd2lkdGgnLCB0aGlzLm9wdGlvbnMud2lkdGgpO1xuXG4gICAgICAgICAgICB2YXIgYmFuZCA9IHRpbWVsaW5lLmFwcGVuZCgnZycpXG4gICAgICAgICAgICAgICAgLmF0dHIoJ2lkJywnYmFuZCcpXG4gICAgICAgICAgICAgICAgLmF0dHIoJ3dpZHRoJywgKGlubmVyV2lkdGgvMiAtIHRoaXMub3B0aW9ucy5tYXJnaW4ucmlnaHQpKVxuICAgICAgICAgICAgICAgIC5hdHRyKCdoZWlnaHQnLCBpbm5lckhlaWdodClcbiAgICAgICAgICAgICAgICAuYXR0cigndHJhbnNmb3JtJyxcbiAgICAgICAgICAgICAgICAgICAgICAndHJhbnNsYXRlKCcgKyAuMjUqaW5uZXJXaWR0aCArICcsJyArIHRoaXMub3B0aW9ucy5tYXJnaW4udG9wICsgICcpJ1xuICAgICAgICAgICAgICAgICAgICArICcgc2NhbGUoLjc1IDEuMCknXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgdmFyIGl0ZW1zID0gYmFuZC5zZWxlY3RBbGwoJ2cnKVxuICAgICAgICAgICAgICAgIC5kYXRhKHRoaXMuX3NvdXJjZS5nZXRJdGVtcygpKVxuICAgICAgICAgICAgICAgIC5lbnRlcigpLmFwcGVuZCgncmVjdCcpXG4gICAgICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywndGltZWxpbmUtaXRlbScpXG4gICAgICAgICAgICAgICAgLmF0dHIoJ2hlaWdodCcsIGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQzLm1heChbXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQub3B0aW9ucy5pdGVtLm1pbkhlaWdodFxuICAgICAgICAgICAgICAgICAgICAgICAgLCB5U2NhbGUoZC5kdXJhdGlvbigpKVxuICAgICAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5hdHRyKCd3aWR0aCcsaW5uZXJXaWR0aClcbiAgICAgICAgICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ3RyYW5zbGF0ZSgwLCAnICsgeVNjYWxlKGQuc3RhcnQpICsgJyknO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB2YXIgYnJ1c2ggPSB0aGlzLl9icnVzaCA9IGQzLnN2Zy5icnVzaCgpXG4gICAgICAgICAgICAgICAgLnkoeVNjYWxlKVxuICAgICAgICAgICAgICAgIC5vbignYnJ1c2hlbmQnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGV4dFN0YXJ0ID0geVNjYWxlKGJydXNoLmV4dGVudCgpWzBdKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGV4dEVuZCAgID0geVNjYWxlKGJydXNoLmV4dGVudCgpWzFdKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdHMgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFyOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgLCBzZWxlY3RlZCA6IFtdXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIGlmIChleHRTdGFydCAhPT0gZXh0RW5kKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3QoJyNiYW5kJykuc2VsZWN0QWxsKCdyZWN0LnRpbWVsaW5lLWl0ZW0nKS5lYWNoKGZ1bmN0aW9uKGkpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoeVNjYWxlKGkuc3RhcnQpIDw9IGV4dEVuZCkgJiYgKHlTY2FsZShpLmVuZCkgICA+PSBleHRTdGFydCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdHMuc2VsZWN0ZWQucHVzaChpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0cy5jbGVhciA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhhdC5vcHRpb25zLm9uLmJydXNoZW5kKHJlc3VsdHMpO1xuICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHZhciB5QnJ1c2ggPSBiYW5kLmFwcGVuZCgnc3ZnJylcbiAgICAgICAgICAgICAgICAuYXR0cignaWQnLCdicnVzaCcpXG4gICAgICAgICAgICAgICAgLmNhbGwoYnJ1c2gpO1xuICAgICAgICAgICAgeUJydXNoLnNlbGVjdEFsbCgncmVjdCcpXG4gICAgICAgICAgICAgICAgLmF0dHIoJ3dpZHRoJyxpbm5lcldpZHRoKTtcblxuICAgICAgICAgICAgdmFyIHlBeGlzID0gdGltZWxpbmUuYXBwZW5kKCdnJylcbiAgICAgICAgICAgICAgICAuYXR0cignaWQnLCdheGlzJylcbiAgICAgICAgICAgICAgICAuYXR0cigndHJhbnNmb3JtJywndHJhbnNsYXRlKCcgKyAoKC4yNSppbm5lcldpZHRoKSAtIHRoaXMub3B0aW9ucy5tYXJnaW4ubGVmdCkgKyAnLCcgKyB0aGlzLm9wdGlvbnMubWFyZ2luLnRvcCArICAnKScpO1xuXG4gICAgICAgICAgICB2YXIgYXhpcyA9IGQzLnN2Zy5heGlzKClcbiAgICAgICAgICAgICAgICAuc2NhbGUoeVNjYWxlKVxuICAgICAgICAgICAgICAgIC5vcmllbnQodGhpcy5vcHRpb25zLm9yaWVudGF0aW9uKVxuICAgICAgICAgICAgICAgIC50aWNrU2l6ZSg2LCAwKVxuICAgICAgICAgICAgICAgIC50aWNrVmFsdWVzKHRoaXMuX3NvdXJjZS50aWNrVmFsdWVzKCkpXG4gICAgICAgICAgICAgICAgLnRpY2tGb3JtYXQoZnVuY3Rpb24oaXRlbSl7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGF0Ll9zb3VyY2UudGlja0Zvcm1hdChpdGVtKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHlBeGlzLmNhbGwoYXhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgLCBfY29sbGFwc2UgOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5fZXhwYW5kZWQpIHJldHVybjtcbiAgICAgICAgICAgIGlmICAodGhpcy5vcHRpb25zLm9uLmNvbGxhcHNlIHx8IHR5cGVvZiB0aGlzLm9wdGlvbnMub24uY29sbGFwc2UgPT09ICdmdW5jdGlvbicpIFxuICAgICAgICAgICAgICAgIHRoaXMub3B0aW9ucy5vbi5jb2xsYXBzZSgpO1xuICAgICAgICAgICAgLy9kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGltZWxpbmUnKS5yZW1vdmUoKTtcbiAgICAgICAgICAgIHRoaXMuX2V4cGFuZGVkID0gZmFsc2U7XG4gICAgICAgICAgICBMLkRvbVV0aWwuYWRkQ2xhc3ModGhpcy5fY29udGFpbmVyLCAnbGVhZmxldC1jb250cm9sLXRpbWVsaW5lLWNvbGxhcHNlZCcpO1xuICAgICAgICAgICAgTC5Eb21VdGlsLnJlbW92ZUNsYXNzKHRoaXMuX2NvbnRhaW5lciwgJ2xlYWZsZXQtY29udHJvbC10aW1lbGluZS1leHBhbmRlZCcpO1xuICAgICAgICAgICAgdGhpcy5fbWFwLm9mZignY2xpY2snLCB0aGlzLl9jb2xsYXBzZSwgdGhpcyk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBMLmNvbnRyb2wudGltZWxpbmUgPSBmdW5jdGlvbihtYXAsc291cmNlLG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBMLkNvbnRyb2wuVGltZWxpbmUobWFwLHNvdXJjZSxvcHRpb25zKTtcbiAgICB9O1xufSk7XG4iLCIvKmdsb2JhbCBkZWZpbmUgKi9cbmRlZmluZSgnbWl4aW5zL2FzeW5jSW5pdCcsIFtcbiAgICAnanF1ZXJ5JyxcbiAgICAndW5kZXJzY29yZSdcbl0sIGZ1bmN0aW9uKCQsXykge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgQXN5bmNJbml0ID0ge1xuICAgICAgICAgICRkZWY6IG51bGxcbiAgICAgICAgLCBpbml0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLiRkZWYucHJvbWlzZSgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gQXN5bmNJbml0O1xufSk7XG4iLCIvKmdsb2JhbCBkZWZpbmUgKi9cbmRlZmluZSgnbWl4aW5zL2RvbXdhdGNoZXInLCBbXG4gICAgJ2pxdWVyeScgXG5dLCBmdW5jdGlvbigkKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBET01XYXRjaGVyID0ge1xuICAgICAgICB3YXRjaERPTSA6IGZ1bmN0aW9uKG1zLHNlbCwkZGVmKSB7XG4gICAgICAgICAgICBpZiAoIXNlbCkgdGhyb3cgXCJFbXB0eSBzZWxlY3RvciBpbiB3YXRjaERPTSgpXCI7XG4gICAgICAgICAgICBpZiAoJChzZWwpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHZhciBmID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICgkKHNlbCkubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJChkb2N1bWVudC5ib2R5KS5vZmYoJ0RPTU5vZGVJbnNlcnRlZCcsIGYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJGRlZi5yZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICQoZG9jdW1lbnQuYm9keSkub24oJ0RPTU5vZGVJbnNlcnRlZCcsIGYpO1xuICAgICAgICAgICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAkKGRvY3VtZW50LmJvZHkpLm9mZignRE9NTm9kZUluc2VydGVkJywgZik7XG4gICAgICAgICAgICAgICAgICAgICRkZWYucmVqZWN0KCk7XG4gICAgICAgICAgICAgICAgfSwgbXMpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAkZGVmLnJlc29sdmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIERPTVdhdGNoZXI7XG59KTtcbiIsIi8qZ2xvYmFsIGRlZmluZSAqL1xuZGVmaW5lKCdtaXhpbnMvZmV0Y2h4bWwnLCBbXG4gICAgJ2pxdWVyeSdcbl0sIGZ1bmN0aW9uKCQpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIEZldGNoWE1MID0ge1xuICAgICAgICAvLyByZXR1cm4gYW4gb2JqZWN0IGltcGxlbWVudGluZyB0aGUgUHJvbWlzZSBpbnRlcmZhY2VcbiAgICAgICAgLy8gd2hlbiBzdWNjZXNzZnVsLCB0aGUgUHJvbWlzZSByZXR1cm5zIHRoZSBkYXRhIGZldGNoZWRcbiAgICAgICAgLy8gYnkgdGhlIGFqYXggcmVxdWVzdFxuICAgICAgICAvLyBkYXRhIHJldHVybmVkIGJ5IHRoZSBwcm9taXNlIGlzIGEgRG9jdW1lbnRcbiAgICAgICAgZmV0Y2hYTUwgOiBmdW5jdGlvbih1cmwpIHtcbiAgICAgICAgICAgIHZhciAkZ2V0ID0gJC5EZWZlcnJlZCgpO1xuICAgICAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgICAgICB0eXBlOiAgICAgJ0dFVCcsXG4gICAgICAgICAgICAgICAgdXJsOiAgICAgIHVybCxcbiAgICAgICAgICAgICAgICBkYXRhVHlwZTogJ3htbCcsXG4gICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgJGdldC5yZXNvbHZlKGRhdGEpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uKGpxWEhSLCB0ZXh0U3RhdHVzLCBlcnJvclRocm93bikge1xuICAgICAgICAgICAgICAgICAgICAkZ2V0LnJlamVjdCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuICRnZXQucHJvbWlzZSgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gRmV0Y2hYTUw7XG59KTtcbiIsIi8qZ2xvYmFsIGRlZmluZSAqL1xuZGVmaW5lKCdtaXhpbnMveG1sMmh0bWwnLCBbXG4gICAgJ2pxdWVyeScsXG4gICAgJ3VuZGVyc2NvcmUnXG5dLCBmdW5jdGlvbigkLF8pIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIFhNTDJIVE1MID0ge1xuICAgICAgICBfZG9jOiBmdW5jdGlvbih4bWwpIHtcbiAgICAgICAgICAgIHZhciB4bWxEb2M7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHhtbCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICB4bWxEb2MgPSBuZXcgRE9NUGFyc2VyKCkucGFyc2VGcm9tU3RyaW5nKHhtbCwndGV4dC94bWwnKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoeG1sIGluc3RhbmNlb2YgRG9jdW1lbnQpIHtcbiAgICAgICAgICAgICAgICB4bWxEb2MgPSB4bWw7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVucmVjb2duaXplZCBkb2N1bWVudCBpbnB1dCBpbiBYTUwySFRNTFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh4bWxEb2MgPT0gbnVsbCB8fCAoIXhtbERvYy5oYXNPd25Qcm9wZXJ0eSgnZ2V0RWxlbWVudHNCeVRhZ05hbWUnKSAmJiB4bWxEb2MuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3BhcnNlcmVycm9yJykubGVuZ3RoID4gMCkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJGYWlsZWQgdG8gcGFyc2UgZG9jdW1lbnQgaW4geG1sMmh0bWxcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4geG1sRG9jO1xuICAgICAgICB9LFxuICAgICAgICAvLyByZXR1cm4gSFRNTCBvciBKU09OIHN0cmluZyBmcm9tIFhTTFQgdHJhbnNmb3JtYXRpb25cbiAgICAgICAgeG1sMmh0bWw6IGZ1bmN0aW9uKHhtbCx4c2wscGFyYW1zLG1vZGUpIHtcbiAgICAgICAgICAgIHZhciB4bWxEb2MgPSB0aGlzLl9kb2MoeG1sKSxcbiAgICAgICAgICAgICAgICB4c2xEb2MgPSB0aGlzLl9kb2MoeHNsKTtcbiAgICAgICAgICAgIHZhciB4c2x0UHJvY2Vzc29yID0gbmV3IFhTTFRQcm9jZXNzb3IoKTtcbiAgICAgICAgICAgIHhzbHRQcm9jZXNzb3IuaW1wb3J0U3R5bGVzaGVldCh4c2xEb2MpO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBwYXJhbXMgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAgICAgXy5lYWNoKF8ua2V5cyhwYXJhbXMpLCBmdW5jdGlvbihrZXkpe1xuICAgICAgICAgICAgICAgICAgICB4c2x0UHJvY2Vzc29yLnNldFBhcmFtZXRlcihudWxsLGtleSxwYXJhbXNba2V5XSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgcmVzdWx0O1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB2YXIgZG9jID0geHNsdFByb2Nlc3Nvci50cmFuc2Zvcm1Ub0RvY3VtZW50KHhtbERvYyk7XG4gICAgICAgICAgICAgICAgaWYgKG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZignRmlyZWZveCcpICE9IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vPHRyYW5zZm9ybWlpeDpyZXN1bHQ+Li4uPC90cmFuc2Zvcm1paXg6cmVzdWx0PlxuICAgICAgICAgICAgICAgICAgICBpZiAobW9kZSA9PT0gJ3RleHQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBkb2MuZG9jdW1lbnRFbGVtZW50LnRleHRDb250ZW50O1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gZG9jLmRvY3VtZW50RWxlbWVudDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtb2RlID09PSAndGV4dCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IGRvYy5kb2N1bWVudEVsZW1lbnQudGV4dENvbnRlbnQ7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSByZXN1bHQgPSBkb2MuYm9keS5pbm5lckhUTUw7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdFcnJvciBpbiBYU0xUIHRyYW5zZm9ybTogJyArIGUudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gWE1MMkhUTUw7XG59KTtcbiIsIi8qZ2xvYmFsIGRlZmluZSAqL1xuZGVmaW5lKCd2aWV3cy9hcHAnLCBbXG4gICAgJ2pxdWVyeScsXG4gICAgJ3VuZGVyc2NvcmUnLFxuICAgICdiYWNrYm9uZSdcbl0sIGZ1bmN0aW9uKCQsXyxCYWNrYm9uZSkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgc2lnbmFsID0ge307XG4gICAgdmFyIEFwcFZpZXcgPSBCYWNrYm9uZS5WaWV3LmV4dGVuZCh7XG4gICAgICAgIGVsOiAnYm9keScsXG4gICAgICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgJCh3aW5kb3cpLnJlc2l6ZShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5sb2NhdGlvbi5yZWxvYWQoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIEFwcFZpZXc7XG59KTtcbiIsIi8qZ2xvYmFsIGRlZmluZSovXG5kZWZpbmUoJ3ZpZXdzL2FydGljbGUnLCBbXG4gICAgICAnanF1ZXJ5J1xuICAgICwgJ3VuZGVyc2NvcmUnXG4gICAgLCAnYmFja2JvbmUnXG4gICAgLCAndmlld3MvYXJ0aWNsZS9nYWxsZXJ5J1xuICAgICwgJ21peGlucy94bWwyaHRtbCdcbiAgICAsICd0ZXh0IXhzbC9hcnRpY2xlLnhzbCdcbl0sIGZ1bmN0aW9uKCQsXyxCYWNrYm9uZSxHYWxsZXJ5VmlldyxYTUwySFRNTCx4c2wpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIEFydGljbGVWaWV3ID0gQmFja2JvbmUuVmlldy5leHRlbmQoe1xuICAgICAgICBpZDogJ2FydGljbGUnLFxuICAgICAgICBpbml0aWFsaXplOiBmdW5jdGlvbihhcmdzKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICB0aGF0LmNvbmZpZyA9IGFyZ3MuY29uZmlnO1xuICAgICAgICB9LFxuICAgICAgICByZW5kZXI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIHRoYXQuJGVsID0gJCgnIycgKyB0aGF0LmlkKTtcbiAgICAgICAgICAgIGlmICh0aGF0LiRlbC5maW5kKCcjJyArIHRoYXQubW9kZWwuY2lkKS5sZW5ndGggIT09IDApXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgdmFyIGh0bWwgPSB0aGlzLnhtbDJodG1sKFxuICAgICAgICAgICAgICAgIHRoaXMubW9kZWwuZ2V0KCd4bWwnKSwgeHNsLCBcbiAgICAgICAgICAgICAgICB7XCJhcnRpY2xlLWRpclwiOiB0aGF0LmNvbmZpZy5hcnRpY2xlcy5wYXRoQmFzZVxuICAgICAgICAgICAgICAgICwgXCJpY29uVXJsXCIgICAgOiB0aGF0Lm1vZGVsLmdldCgnaWNvblVybCcpXG4gICAgICAgICAgICAgICAgLCBcImNpZFwiICAgICAgICA6IHRoYXQubW9kZWwuY2lkXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgJCgnLmFydGljbGUtY29udGVudCcpLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICQoJyMnK3RoaXMuaWQpLmFwcGVuZChodG1sKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImFydGljbGUgbG9hZCBlcnJvcjogXCIgKyBlLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCAkKCdpbWcuc2xpZGVzanMtc2xpZGUnKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgbmV3IEdhbGxlcnlWaWV3KCkucmVuZGVyKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICQoJyNmb290ZXInKS5yZW1vdmUoKVxuICAgICAgICAgICAgICAgICQoJ2FydGljbGUnKS5yZW1vdmVDbGFzcygnYmVmb3JlLWZvb3RlcicpLmFkZENsYXNzKCduby1mb290ZXInKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoYXQuJGVsLmZpbmQoJy5hcnRpY2xlLW1hcmtlcicpLmNsaWNrKGZ1bmN0aW9uKGksZWx0KSB7XG4gICAgICAgICAgICAgICAgdGhhdC5tb2RlbC50cmlnZ2VyKCd0b2dnbGUnLCB0aGF0Lm1vZGVsKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHRoYXQ7XG4gICAgICAgIH0sXG4gICAgICAgIHJlbW92ZTogZnVuY3Rpb24oKSB7IC8qIHJldGFpbiAqL30sXG4gICAgfSk7XG4gICAgXy5leHRlbmQoQXJ0aWNsZVZpZXcucHJvdG90eXBlLFhNTDJIVE1MKTtcbiAgICByZXR1cm4gQXJ0aWNsZVZpZXc7XG59KTtcbiIsIi8qZ2xvYmFsIGRlZmluZSovXG5kZWZpbmUoJ3ZpZXdzL2NsZWFyJywgW1xuICAgICdqcXVlcnknLFxuICAgICd1bmRlcnNjb3JlJyxcbiAgICAnYmFja2JvbmUnXG5dLCBmdW5jdGlvbigkLF8sQmFja2JvbmUsdG1wbCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgQ2xlYXJWaWV3ID0gQmFja2JvbmUuVmlldy5leHRlbmQoe1xuICAgICAgICBlbDogJ2JvZHknLFxuICAgICAgICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJCgnYm9keScpLmVtcHR5KCk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gQ2xlYXJWaWV3O1xufSk7XG4iLCIvKmdsb2JhbCBkZWZpbmUqL1xuZGVmaW5lKCd2aWV3cy9pc3N1ZScsIFtcbiAgICAgICdqcXVlcnknXG4gICAgLCAndW5kZXJzY29yZSdcbiAgICAsICdiYWNrYm9uZSdcbiAgICAsICd0ZXh0IXBhcnRpYWxzL2lzc3VlLmh0bWwnXG4gICAgLCAndmlld3MvYXJ0aWNsZSdcbl0sIGZ1bmN0aW9uKCQsXyxCYWNrYm9uZSx0bXBsLEFydGljbGVWaWV3KSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBJc3N1ZVZpZXcgPSBCYWNrYm9uZS5WaWV3LmV4dGVuZCh7XG4gICAgICAgIGVsOiAgICAgICAgICcjaXNzdWUnLFxuICAgICAgICB0ZW1wbGF0ZTogICBfLnRlbXBsYXRlKHRtcGwpLFxuICAgICAgICBpbml0aWFsaXplOiBmdW5jdGlvbihhcmdzKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICB0aGF0LmNvbmZpZyA9IGFyZ3MuY29uZmlnO1xuICAgICAgICB9LFxuICAgICAgICByZW5kZXI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuJGVsLnJlbW92ZSgpO1xuICAgICAgICAgICAgJCgnYm9keScpLmFwcGVuZCh0bXBsKTtcbiAgICAgICAgfSxcbiAgICAgICAgcmVuZGVyQXJ0aWNsZTogZnVuY3Rpb24oYXJ0aWNsZSkge1xuICAgICAgICAgICAgbmV3IEFydGljbGVWaWV3KHtcbiAgICAgICAgICAgICAgICAgIG1vZGVsOiAgYXJ0aWNsZVxuICAgICAgICAgICAgICAgICwgY29uZmlnOiB0aGlzLm1vZGVsLmNvbmZpZ1xuICAgICAgICAgICAgICAgICwgaXNzdWU6ICB0aGlzXG4gICAgICAgICAgICAgICAgLCByb3V0ZXI6IHRoaXMubW9kZWwucm91dGVyXG4gICAgICAgICAgICB9KS5yZW5kZXIoKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBJc3N1ZVZpZXc7XG59KTtcbiIsIi8qZ2xvYmFsIGRlZmluZSovXG5kZWZpbmUoJ3ZpZXdzL21hcCcsIFtcbiAgICAgICdqcXVlcnknXG4gICAgLCAndW5kZXJzY29yZSdcbiAgICAsICdiYWNrYm9uZSdcbiAgICAsICdsZWFmbGV0J1xuICAgICwgJ3RleHQhcGFydGlhbHMvbWFwLmh0bWwnXG4gICAgLCAndmlld3MvbWFya2VyJ1xuICAgICwgJ21peGlucy9hc3luY0luaXQnXG5dLCBmdW5jdGlvbigkLF8sQmFja2JvbmUsTCxtYXBQYXJ0aWFsLE1hcmtlclZpZXcsQXN5bmNJbml0KSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBNYXBWaWV3ID0gQmFja2JvbmUuVmlldy5leHRlbmQoe1xuICAgICAgICAgIGlkOiAgICAgICdtYXAnXG4gICAgICAgICwgdGFnTmFtZTogJ2RpdidcbiAgICAgICAgLCBtYXJrZXJWaWV3czogW10gLy8gc3Vidmlld3NcbiAgICAgICAgLCBtYXBjb25maWc6IHt9XG4gICAgICAgICwgaW5pdGlhbGl6ZTogZnVuY3Rpb24oYXJncykge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgdGhhdC4kZGVmID0gJC5EZWZlcnJlZCgpO1xuICAgICAgICAgICAgdGhhdC5tb2RlbCA9IGFyZ3MubW9kZWw7XG4gICAgICAgICAgICB0aGF0Lmlzc3VlID0gYXJncy5pc3N1ZTtcbiAgICAgICAgICAgICQud2hlbi5hcHBseSh7fSxbdGhhdC5pc3N1ZS5pbml0KCksIHRoYXQubW9kZWwuaW5pdCgpXSkuZG9uZShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB0aGF0Lm1hcGNvbmZpZyA9IHRoYXQubW9kZWwuZ2V0KCdtYXBjb25maWcnKTtcbiAgICAgICAgICAgICAgICBpZiAoJCgnIycgKyB0aGlzLmlkKS5sZW5ndGggPiAwKSByZXR1cm47XG4gICAgICAgICAgICAgICAgaWYgKCQoJyMnICsgdGhpcy5pZCkuY2hpbGRyZW4oKS5sZW5ndGggPiAwKSByZXR1cm47XG4gICAgICAgICAgICAgICAgdGhhdC5faW5pdE1hcCgpOyAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB0aGF0LiRkZWYucmVzb2x2ZSh0aGF0KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgICwgX2luaXRNYXAgOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIGlmICgkKCcjJyArIHRoaXMuaWQpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICQoJ2JvZHknKS5hcHBlbmQobWFwUGFydGlhbCk7XG4gICAgICAgICAgICAgICAgdGhhdC5tYXAgPSBuZXcgTC5NYXAodGhhdC5tYXBjb25maWcuaWQsIHRoYXQubWFwY29uZmlnLm1hcCk7XG4gICAgICAgICAgICAgICAgbmV3IEwuVGlsZUxheWVyKHRoYXQubWFwY29uZmlnLnRpbGVMYXllci51cmwsIHRoYXQubWFwY29uZmlnLnRpbGVMYXllci5vcHRzKS5hZGRUbyh0aGF0Lm1hcCk7XG4gICAgICAgICAgICAgICAgbmV3IEwuY29udHJvbC5zY2FsZSh0aGF0Lm1hcGNvbmZpZy5zY2FsZSkuYWRkVG8odGhhdC5tYXApOyAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB0aGF0Lm1hcmtlclZpZXdzID0gXy5tYXAodGhhdC5pc3N1ZS5nZXQoJ2NvbGxlY3Rpb24nKS5tb2RlbHMsIGZ1bmN0aW9uKGFydGljbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBNYXJrZXJWaWV3KHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kZWwgICAgIDogYXJ0aWNsZVxuICAgICAgICAgICAgICAgICAgICAgICAgLCBtYXAgICAgICAgOiB0aGF0Lm1hcFxuICAgICAgICAgICAgICAgICAgICAgICAgLCBtYXBjb25maWcgOiB0aGF0Lm1hcGNvbmZpZ1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAsIHJlbmV3Vmlld3MgOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIHRoYXQubWFya2VyVmlld3MgPSBfLm1hcCh0aGF0Lmlzc3VlLmdldCgnY29sbGVjdGlvbicpLm1vZGVscywgZnVuY3Rpb24oYXJ0aWNsZSkge1xuICAgICAgICAgICAgICAgIGlmICghYXJ0aWNsZS5tYXJrZXJWaWV3KSB7XG4gICAgICAgICAgICAgICAgICAgIGFydGljbGUubWFya2VyVmlldyA9IG5ldyBNYXJrZXJWaWV3KHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kZWwgICAgIDogYXJ0aWNsZVxuICAgICAgICAgICAgICAgICAgICAgICAgLCBtYXAgICAgICAgOiB0aGF0Lm1hcFxuICAgICAgICAgICAgICAgICAgICAgICAgLCBtYXBjb25maWcgOiB0aGF0Lm1hcGNvbmZpZ1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFydGljbGUubWFya2VyVmlldztcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXy5mb3JFYWNoKHRoYXQubWFya2VyVmlld3MsIGZ1bmN0aW9uKG12KSB7IG12LnJlbmRlcigpOyB9KTtcbiAgICAgICAgICAgIHRoYXQudHJpZ2dlcignbWFya2VycycsIHRoYXQubWFya2VyVmlld3MpO1xuICAgICAgICB9XG4gICAgICAgICwgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIHRoYXQuX2luaXRNYXAoKTtcbiAgICAgICAgICAgIF8uZm9yRWFjaCh0aGF0Lm1hcmtlclZpZXdzLCBmdW5jdGlvbihtdikgeyBtdi5yZW5kZXIoKSB9KTtcbiAgICAgICAgICAgIHRoYXQudHJpZ2dlcignbWFya2VycycsIHRoYXQubWFya2VyVmlld3MpO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgXy5leHRlbmQoTWFwVmlldy5wcm90b3R5cGUsQXN5bmNJbml0KTtcbiAgICByZXR1cm4gTWFwVmlldztcbn0pO1xuIiwiLypnbG9iYWwgZGVmaW5lKi9cbmRlZmluZSgndmlld3MvbWFya2VyJywgW1xuICAgICAgJ2pxdWVyeSdcbiAgICAsICd1bmRlcnNjb3JlJ1xuICAgICwgJ2JhY2tib25lJ1xuICAgICwgJ3RleHQhcGFydGlhbHMvbWFya2VyLmh0bWwnXG4gICAgLCAndGV4dCFwYXJ0aWFscy9tYXJrZXItbGVnZW5kLmh0bWwnXG5dLCBmdW5jdGlvbigkLF8sQmFja2JvbmUsdG1wbCxsZWdlbmRQYXJ0aWFsKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBNYXJrZXJWaWV3ID0gQmFja2JvbmUuVmlldy5leHRlbmQoe1xuICAgICAgICAgIHRlbXBsYXRlOiBfLnRlbXBsYXRlKHRtcGwpXG4gICAgICAgICwgZWw6ICcnXG4gICAgICAgICwgbWFya2VyTGF5ZXI6IG51bGxcbiAgICAgICAgLCBtYXA6IG51bGxcbiAgICAgICAgLCBtYXBjb25maWc6IG51bGxcbiAgICAgICAgLCBpbml0aWFsaXplOiBmdW5jdGlvbihhcmdzKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICB0aGF0Lm1hcCA9IGFyZ3MubWFwO1xuICAgICAgICAgICAgdGhhdC5tYXBjb25maWcgPSBhcmdzLm1hcGNvbmZpZztcbiAgICAgICAgICAgIHRoYXQuaW5pdE1hcmtlckxheWVyKCk7XG4gICAgICAgIH1cbiAgICAgICAgLCBpbml0TWFya2VyTGF5ZXIgOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ICAgID0gdGhpcztcbiAgICAgICAgICAgIHZhciBnZW9qc29uID0gdGhpcy5tb2RlbC5nZXRHZW9qc29uKCk7XG4gICAgICAgICAgICB2YXIgaWNvbkNvbmZpZyA9IHRoYXQubWFwY29uZmlnLmZlYXR1cmVzLmljb247XG4gICAgICAgICAgICBpY29uQ29uZmlnLmljb25VcmwgPSAodGhpcy5tb2RlbC5nZXQoJ2ljb25VcmwnKSB8fCAnJyk7XG4gICAgICAgICAgICB2YXIgaWNvbiA9IEwuaWNvbihpY29uQ29uZmlnKTtcbiAgICAgICAgICAgIHRoYXQubWFya2VyTGF5ZXIgPSBMLmdlb0pzb24oZ2VvanNvbiwge1xuICAgICAgICAgICAgICAgIG9uRWFjaEZlYXR1cmU6IGZ1bmN0aW9uIChmZWF0dXJlLCBtYXBNYXJrZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gYWRkIHRoZSBwb3B1cCB0byB0aGlzIG1hcmtlclxuICAgICAgICAgICAgICAgICAgICB2YXIgcG9wdXAgPSBMLnBvcHVwKHRoYXQubWFwY29uZmlnLmZlYXR1cmVzLnBvcHVwKTtcbiAgICAgICAgICAgICAgICAgICAgcG9wdXAuc2V0Q29udGVudChcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQudGVtcGxhdGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFydGljbGVpZDogIHRoYXQubW9kZWwuZ2V0KCdhcnRpY2xlaWQnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZW9qc29uOiAgICB0aGF0Lm1vZGVsLmdldEdlb2pzb24oKVxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgbWFwTWFya2VyLmJpbmRQb3B1cChwb3B1cCk7XG4gICAgICAgICAgICAgICAgICAgIC8vIG92ZXJyaWRlIHRoZSBkZWZhdWx0IGNsaWNrIGhhbmRsZXIgZm9yIHRoZVxuICAgICAgICAgICAgICAgICAgICAvLyBtYXJrZXIsIHdoaWNoIHdvdWxkIGNsb3NlIHRoZSBwb3B1cCBpZiBpdFxuICAgICAgICAgICAgICAgICAgICAvLyB3ZXJlIGFscmVhZHkgb3BlblxuICAgICAgICAgICAgICAgICAgICBtYXBNYXJrZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snKTtcbiAgICAgICAgICAgICAgICAgICAgbWFwTWFya2VyLm9uKCdjbGljaycsIGZ1bmN0aW9uKGV2dCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC50cmlnZ2VyKCdjbGljaycsIGV2dCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBtYXBNYXJrZXIub24oJ21vdXNlb3ZlcicsIGZ1bmN0aW9uKGV2dCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC50cmlnZ2VyKCdtb3VzZW92ZXInLCBldnQpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHBvaW50VG9MYXllcjogZnVuY3Rpb24gKGZlYXR1cmUsIGxhdGxuZykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gTC5tYXJrZXIobGF0bG5nLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGljb24gICAgICAgIDogaWNvblxuICAgICAgICAgICAgICAgICAgICAgICAgLCBjbGlja2FibGUgICA6ICEhZmVhdHVyZS5wcm9wZXJ0aWVzLnRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgICwgdGl0bGUgICAgICAgOiAoZmVhdHVyZS5wcm9wZXJ0aWVzLm1hcmtlcm5hbWUgfHwgJycpXG4gICAgICAgICAgICAgICAgICAgICAgICAsIG9wYWNpdHkgICAgIDogdGhhdC5tYXBjb25maWcuZmVhdHVyZXMub3BhY2l0eVxuICAgICAgICAgICAgICAgICAgICAgICAgLCByaXNlT25Ib3ZlciA6IHRoYXQubWFwY29uZmlnLmZlYXR1cmVzLnJpc2VPbkhvdmVyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgICwgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHRoaXMubWFya2VyTGF5ZXIuYWRkVG8odGhpcy5tYXApO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIE1hcmtlclZpZXc7XG59KTtcbiIsIi8qZ2xvYmFsIGRlZmluZSovXG5kZWZpbmUoJ3ZpZXdzL21lbnUnLCBbXG4gICAgICAnanF1ZXJ5J1xuICAgICwgJ3VuZGVyc2NvcmUnXG4gICAgLCAnYmFja2JvbmUnXG4gICAgLCAndGV4dCFwYXJ0aWFscy9tZW51Lmh0bWwnXG4gICAgLCAnbWl4aW5zL2RvbXdhdGNoZXInXG4gICAgLCAndmlld3MvYXJ0aWNsZS9tZW51J1xuXSwgZnVuY3Rpb24oJCxfLEJhY2tib25lLG1lbnVUbXBsLERPTVdhdGNoZXIsQXJ0aWNsZU1lbnVWaWV3KSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBNZW51VmlldyA9IEJhY2tib25lLlZpZXcuZXh0ZW5kKHtcbiAgICAgICAgdGVtcGxhdGU6IF8udGVtcGxhdGUobWVudVRtcGwpLFxuICAgICAgICAgIGlkOiAgICAgICdtZW51J1xuICAgICAgICAsIHRhZ05hbWU6ICdkaXYnXG4gICAgICAgICwgaXNzdWU6ICAgbnVsbFxuICAgICAgICAsIGNvbmZpZzogIHt9XG4gICAgICAgICwgaW5pdGlhbGl6ZTogZnVuY3Rpb24oYXJncykge1xuICAgICAgICAgICAgdGhpcy5jb25maWcgPSBhcmdzLmNvbmZpZztcbiAgICAgICAgICAgIHRoaXMuaXNzdWUgID0gYXJncy5pc3N1ZTtcbiAgICAgICAgfSxcbiAgICAgICAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIGlmICgkKCcjJyArIHRoYXQuaWQpLmNoaWxkcmVuKCkubGVuZ3RoICE9PSAwKSByZXR1cm47XG4gICAgICAgICAgICB2YXIgaXRlbXMgPSB0aGlzLmNvbmZpZy5tZW51O1xuICAgICAgICAgICAgLy8gcmVuZGVyIGVhY2ggaXRlbSBmcm9tIHRoZSBjb25maWcgZmlsZSB0byBhIDxsaT5cbiAgICAgICAgICAgIC8vIG11c3QgYmUgZG9uZSBhc3luYyBkdWUgdG8gcmV0cmlldmFsIG9mIHBhcnRpYWwgZmlsZXNcbiAgICAgICAgICAgIHZhciBwcm9taXNlcyA9IFtdO1xuICAgICAgICAgICAgIC8vIGNhY2hlIG9mIHRlbXBsYXRlIHN0cmluZ3M6IHVybCA9PiB0ZW1wbFxuICAgICAgICAgICAgdmFyIHRlbXBsYXRlcyA9IHt9O1xuICAgICAgICAgICAgdmFyIGNvbGxlY3Rpb25zID0ge307XG4gICAgICAgICAgICBfLmVhY2goaXRlbXMsIGZ1bmN0aW9uKGl0ZW0pe1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlc1tpdGVtLnBhcnRpYWxdID0gJyc7XG4gICAgICAgICAgICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gJ21lbnUnKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICggaXRlbS5jb2xsZWN0aW9uID09PSBcImNvbGxlY3Rpb25zL2FydGljbGVzXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbGxlY3Rpb25zW2l0ZW0uY29sbGVjdGlvbl0gPSB0aGF0Lmlzc3VlLmdldCgnY29sbGVjdGlvbicpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVW5oYW5kbGVkIGNvbGxlY3Rpb24gdHlwZSByZXF1ZXN0ZWQ6IFwiICsgaXRlbS5jb2xsZWN0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXy5lYWNoKF8ua2V5cyh0ZW1wbGF0ZXMpLCBmdW5jdGlvbih1cmwpIHtcbiAgICAgICAgICAgICAgICB2YXIgJGRlZiA9ICQuRGVmZXJyZWQoKTtcbiAgICAgICAgICAgICAgICByZXF1aXJlKFsndGV4dCEnICsgdXJsXSwgZnVuY3Rpb24odGVtcGwpIHtcbiAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVzW3VybF0gPSBfLnRlbXBsYXRlKHRlbXBsKTtcbiAgICAgICAgICAgICAgICAgICAgJGRlZi5yZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcHJvbWlzZXMucHVzaCgkZGVmLnByb21pc2UoKSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIHJlbmRlciB0aGUgbWVudSBhcyBhIDxkaXY+XG4gICAgICAgICAgICB2YXIgY29udGVudCA9ICcnO1xuICAgICAgICAgICAgJC53aGVuLmFwcGx5KCQsIHByb21pc2VzKS5kb25lKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIF8uZm9yRWFjaChpdGVtcywgZnVuY3Rpb24oaXRlbSxpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB1cmwgPSBpdGVtLnBhcnRpYWw7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzb3J0ZXIgPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN1YkNvbnRlbnQgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNvcnRLZXlzID0gW107XG4gICAgICAgICAgICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdwYWdlJyB8fCBpdGVtLnR5cGUgPT09ICdzZXAnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50ICs9ICh0ZW1wbGF0ZXNbdXJsXSkoaXRlbSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaXRlbS50eXBlID09PSAnbWVudScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbGxlY3Rpb25zW2l0ZW0uY29sbGVjdGlvbl0ubW9kZWxzLmZvckVhY2goZnVuY3Rpb24obW9kZWwsaikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBocmVmICAgID0gaXRlbS5pdGVtLmhyZWYucmVwbGFjZSgnOmknLCBqKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYW12ICAgICA9IG5ldyBBcnRpY2xlTWVudVZpZXcoe21vZGVsOm1vZGVsfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdCAgPSBhbXYucmVuZGVyKHtocmVmOiAnIycgKyBocmVmfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyICRsaTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBuZWVkIGFuIDxsaT4gZWxlbWVudCBoZXJlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiByZXN1bHQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRsaSA9ICQocmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3VsdCBpbnN0YW5jZW9mIEVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5ub2RlTmFtZSA9PT0gJ0JPRFknKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkbGkgPSAkKHJlc3VsdC5pbm5lckhUTUwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3VsdC5ub2RlTmFtZSA9PT0gJ0xJJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGxpID0gJChyZXN1bHQub3V0ZXJIVE1MKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVW5zdXBwb3J0ZWQgZG9jdW1lbnQgZWxlbWVudCBmb3Igc3VibWVudTogJyArIHJlc3VsdC50b1N0cmluZygpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVW5zdXBwb3J0ZWQgcmVzdWx0IHR5cGUgZm9yIHN1Ym1lbnU6ICcgKyByZXN1bHQudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkbGkuYXR0cignZGF0YS1zb3J0LWtleScpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNvcnRlclskbGkuYXR0cignZGF0YS1zb3J0LWtleScpXSA9ICRsaS5jbG9uZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNvcnRlclskbGkuZmluZCgnYScpLnRleHQoKV0gPSAkbGkuY2xvbmUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNvcnRLZXlzID0gXy5rZXlzKHNvcnRlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICBzb3J0S2V5cy5zb3J0KGZ1bmN0aW9uKGEsYikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhLmxvY2FsZUNvbXBhcmUoYik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF8uZWFjaChzb3J0S2V5cywgZnVuY3Rpb24oa2V5KXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJDb250ZW50ICs9IHNvcnRlcltrZXldWzBdLm91dGVySFRNTDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudCArPSAodGVtcGxhdGVzW3VybF0pKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogaXRlbS5sYWJlbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtczogc3ViQ29udGVudFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgJCgnIycgKyB0aGF0LmlkKS5lbXB0eSgpLmFwcGVuZCh0aGF0LnRlbXBsYXRlKHtjb250ZW50OiBjb250ZW50fSkpO1xuICAgICAgICAgICAgICAgIC8vIGNvbmZpcm0gdGhhdCB0aGUgbWVudSBoYXMgbG9hZGVkXG4gICAgICAgICAgICAgICAgdmFyICRmYWlsRGVmID0gJC5EZWZlcnJlZCgpO1xuICAgICAgICAgICAgICAgICRmYWlsRGVmLmZhaWwoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5yZW5kZXIoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGF0LndhdGNoRE9NKDUwMCwgJyMnICsgdGhhdC5pZCwgJGZhaWxEZWYpO1xuICAgICAgICAgICAgfSkuZmFpbChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJGYWlsZWQgdG8gYnVpbGQgbWVudS5cIik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIF8uZXh0ZW5kKE1lbnVWaWV3LnByb3RvdHlwZSxET01XYXRjaGVyKTtcbiAgICByZXR1cm4gTWVudVZpZXc7XG59KTtcbiIsIi8qZ2xvYmFsIGRlZmluZSovXG5kZWZpbmUoJ3ZpZXdzL3BhZ2UnLCBbXG4gICAgJ2pxdWVyeScsIFxuICAgICd1bmRlcnNjb3JlJywgXG4gICAgJ2JhY2tib25lJyxcbiAgICAnbWl4aW5zL2RvbXdhdGNoZXInLFxuICAgICd0ZXh0IXBhcnRpYWxzL3BhZ2UuaHRtbCdcbl0sIGZ1bmN0aW9uKCQsXyxCYWNrYm9uZSxET01XYXRjaGVyLHBhZ2UpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIFBhZ2VWaWV3ID0gQmFja2JvbmUuVmlldy5leHRlbmQoe1xuICAgICAgICBlbDogJ2JvZHknLFxuICAgICAgICByZW5kZXI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIHZhciAkZGVmID0gJC5EZWZlcnJlZCgpO1xuICAgICAgICAgICAgJGRlZi50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICQodGhhdC5lbCkuYXBwZW5kKHBhZ2UpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLndhdGNoRE9NKDEwMDAsdGhhdC5lbCwkZGVmKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIF8uZXh0ZW5kKFBhZ2VWaWV3LnByb3RvdHlwZSxET01XYXRjaGVyKTtcbiAgICByZXR1cm4gUGFnZVZpZXc7XG59KTtcbiIsIi8qZ2xvYmFsIGRlZmluZSovXG5kZWZpbmUoJ3ZpZXdzL3BhcnRpYWwnLCBbXG4gICAgICAnanF1ZXJ5J1xuICAgICwgJ3VuZGVyc2NvcmUnXG4gICAgLCAnYmFja2JvbmUnXG4gICAgLCAnbWl4aW5zL2RvbXdhdGNoZXInXG4gICAgLCAnbWl4aW5zL2FzeW5jSW5pdCdcbl0sIGZ1bmN0aW9uKCQsXyxCYWNrYm9uZSxET01XYXRjaGVyLEFzeW5jSW5pdCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgUGFydGlhbFZpZXcgPSBCYWNrYm9uZS5WaWV3LmV4dGVuZCh7XG4gICAgICAgIGVsOiAnJyxcbiAgICAgICAgcGFnZTogJycsXG4gICAgICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uKG9wdHMpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ICA9IHRoaXM7XG4gICAgICAgICAgICB0aGF0LmVsICAgPSBvcHRzLmVsO1xuICAgICAgICAgICAgdGhhdC4kZGVmID0gJC5EZWZlcnJlZCgpO1xuICAgICAgICAgICAgcmVxdWlyZShbJ3RleHQhJyArIG9wdHMucGFnZV0sIGZ1bmN0aW9uKGh0bWwpIHtcbiAgICAgICAgICAgICAgICB0aGF0LnBhZ2UgPSBodG1sO1xuICAgICAgICAgICAgICAgIHRoYXQuJGRlZi5yZXNvbHZlKHRoYXQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIHJlbmRlcjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgdmFyICR3YXRjaERlZiA9ICQuRGVmZXJyZWQoKTtcbiAgICAgICAgICAgIHRoYXQuaW5pdCgpLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgJCh0aGF0LmVsKS5hcHBlbmQodGhhdC5wYWdlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy53YXRjaERPTSgxMDAwLHRoYXQuZWwsJHdhdGNoRGVmKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIF8uZXh0ZW5kKFBhcnRpYWxWaWV3LnByb3RvdHlwZSxET01XYXRjaGVyKTtcbiAgICBfLmV4dGVuZChQYXJ0aWFsVmlldy5wcm90b3R5cGUsQXN5bmNJbml0KTtcbiAgICByZXR1cm4gUGFydGlhbFZpZXc7XG59KTtcbiIsIi8qZ2xvYmFsIGRlZmluZSAqL1xuZGVmaW5lKCdtb2RlbHMvYXJ0aWNsZScsIFtcbiAgICAgICdqcXVlcnknXG4gICAgLCAndW5kZXJzY29yZSdcbiAgICAsICdiYWNrYm9uZSdcbiAgICAsICdtaXhpbnMvZmV0Y2h4bWwnXG4gICAgLCAnbWl4aW5zL2FzeW5jSW5pdCdcbiAgICAsICdtaXhpbnMveG1sMmh0bWwnXG4gICAgLCAndGV4dCF4c2wvZ2VvanNvbi54c2wnXG4gICAgLCAndGV4dCF4c2wvY2l0ZWQtcmFuZ2UueHNsJ1xuXSwgZnVuY3Rpb24oJCxfLEJhY2tib25lLEZldGNoWE1MLEFzeW5jSW5pdCxYTUwySFRNTCxnZW9Kc29uWHNsLGNpdGVkUmFuZ2VYc2wpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIEFydGljbGVNb2RlbCA9IEJhY2tib25lLk1vZGVsLmV4dGVuZCh7XG4gICAgICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgdGhhdC4kZGVmID0gJC5EZWZlcnJlZCgpO1xuICAgICAgICAgICAgdmFyICRnZXQgPSB0aGF0LmZldGNoWE1MKHRoYXQuZ2V0KCdwYXRoJykpO1xuICAgICAgICAgICAgJC53aGVuKCRnZXQpLmRvbmUoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgIHRoYXQuc2V0KCd4bWwnLCBkYXRhKTtcbiAgICAgICAgICAgICAgICB0aGF0Ll9ta0dlb2pzb24oKTtcbiAgICAgICAgICAgICAgICB0aGF0Ll9ta0NpdGVkUmFuZ2UoKTtcbiAgICAgICAgICAgICAgICBpZiAodGhhdC5nZW9qc29uICE9PSBudWxsKVxuICAgICAgICAgICAgICAgICAgICB0aGF0LnNldCgncGxhY2VUeXBlJywgdGhhdC5nZW9qc29uLnByb3BlcnRpZXMubGF5ZXIpO1xuICAgICAgICAgICAgICAgIHRoYXQuJGRlZi5yZXNvbHZlKHRoYXQpO1xuICAgICAgICAgICAgfSkuZmFpbChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB0aGF0LiRkZWYucmVqZWN0KCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgZGVmYXVsdHM6IHtcbiAgICAgICAgICAgIC8vVE9ETzogJ3htbCc6IHNlcmlhbGl6ZT8gYW5kIGNhY2hlIHRvIGxvY2Fsc3RvcmFnZVxuICAgICAgICAgICAgLy8gYWRkIGFkYXB0ZXIgZm9yIGFjY2VzcyB0aHJvdWdoIC5hdHRyaWJ1dGVzXG4gICAgICAgICAgICAgIFwieG1sXCIgICAgICAgOiBudWxsICAgIC8vIERvY3VtZW50XG4gICAgICAgICAgICAsIFwicGxhY2VUeXBlXCIgOiBudWxsXG4gICAgICAgICAgICAsIFwiaWNvblVybFwiICAgOiAnJ1xuICAgICAgICAgICAgLCBcImNpdGVkUmFuZ2VcIjoge31cbiAgICAgICAgfSxcbiAgICAgICAgZ2VvanNvbjogbnVsbCxcbiAgICAgICAgZ2V0R2VvanNvbjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5nZW9qc29uID09PSBudWxsKVxuICAgICAgICAgICAgICAgIHRoaXMuX21rR2VvanNvbigpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2VvanNvbjtcbiAgICAgICAgfSxcbiAgICAgICAgX21rR2VvanNvbjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHZhciBqc29uU3RyaW5nID0gdGhpcy54bWwyaHRtbCh0aGlzLmdldCgneG1sJyksIGdlb0pzb25Yc2wsIHt9LCAndGV4dCcpO1xuICAgICAgICAgICAgICAgIHRoaXMuZ2VvanNvbiA9IEpTT04ucGFyc2UoanNvblN0cmluZyk7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIHBhcnNlIGdlb2pzb246IFwiICsgZS50b1N0cmluZygpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgX21rQ2l0ZWRSYW5nZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHZhciBqc29uU3RyaW5nID0gdGhpcy54bWwyaHRtbCh0aGlzLmdldCgneG1sJyksIGNpdGVkUmFuZ2VYc2wsIHt9LCAndGV4dCcpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0KCdjaXRlZFJhbmdlJywgSlNPTi5wYXJzZShqc29uU3RyaW5nKSk7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIHBhcnNlIGNpdGVkIHJhbmdlIGpzb246IFwiICsgZS50b1N0cmluZygpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuICAgIF8uZXh0ZW5kKEFydGljbGVNb2RlbC5wcm90b3R5cGUsRmV0Y2hYTUwpO1xuICAgIF8uZXh0ZW5kKEFydGljbGVNb2RlbC5wcm90b3R5cGUsQXN5bmNJbml0KTtcbiAgICBfLmV4dGVuZChBcnRpY2xlTW9kZWwucHJvdG90eXBlLFhNTDJIVE1MKTtcbiAgICByZXR1cm4gQXJ0aWNsZU1vZGVsO1xufSk7XG4iLCIvKmdsb2JhbCBkZWZpbmUgKi9cbmRlZmluZSgnbW9kZWxzL2lzc3VlJywgW1xuICAgICAgJ2pxdWVyeSdcbiAgICAsICd1bmRlcnNjb3JlJ1xuICAgICwgJ2JhY2tib25lJ1xuICAgICwgJ21vZGVscy9hcnRpY2xlJ1xuICAgICwgJ2NvbGxlY3Rpb25zL2FydGljbGVzJ1xuICAgICwgJ21peGlucy9hc3luY0luaXQnXG5dLCBmdW5jdGlvbigkLF8sQmFja2JvbmUsQXJ0aWNsZU1vZGVsLEFydGljbGVDb2xsZWN0aW9uLEFzeW5jSW5pdCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgSXNzdWVNb2RlbCA9IEJhY2tib25lLk1vZGVsLmV4dGVuZCh7XG4gICAgICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uKGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ICAgID0gdGhpcztcbiAgICAgICAgICAgIHRoYXQuJGRlZiAgID0gJC5EZWZlcnJlZCgpO1xuICAgICAgICAgICAgdmFyIGFydGRpciAgPSBhcmdzLmNvbmZpZy5hcnRpY2xlcy5wYXRoQmFzZTtcbiAgICAgICAgICAgIGlmICghYXJ0ZGlyLm1hdGNoKC9cXC8kLykpIGFydGRpciArPSAnLyc7XG4gICAgICAgICAgICB2YXIgZmlsZXMgICA9IGFyZ3MuY29uZmlnLmFydGljbGVzLmZpbGVzO1xuICAgICAgICAgICAgdmFyIGNvbCAgICAgPSBuZXcgQXJ0aWNsZUNvbGxlY3Rpb24oKTtcbiAgICAgICAgICAgIHRoYXQuY29uZmlnID0gYXJncy5jb25maWc7XG4gICAgICAgICAgICB0aGF0LnNldCgnY29sbGVjdGlvbicsIGNvbCk7XG4gICAgICAgICAgICAvLyBmaXggbGVuZ3RoIG9mIGFydGljbGVzIGFycmF5XG4gICAgICAgICAgICB2YXIgYXJ0aWNsZXMgPSBfLm1hcChfLnJhbmdlKGZpbGVzLmxlbmd0aCksIGZ1bmN0aW9uKCl7cmV0dXJuIHVuZGVmaW5lZDt9KTtcbiAgICAgICAgICAgIC8vIGFydGljbGVzIGNvbnN0cnVjdGVkIHN5bmMsIHNvIGFydGljbGUgb2JqZWN0cyBhZGRlZCB0byBsaXN0IGJ5IGluZGV4XG4gICAgICAgICAgICBfLmVhY2goZmlsZXMsIGZ1bmN0aW9uKGZpbGUsaSkge1xuICAgICAgICAgICAgICAgIGFydGljbGVzW2ldID0gbmV3IEFydGljbGVNb2RlbCh7XG4gICAgICAgICAgICAgICAgICAgIGFydGljbGVpZDogIGksXG4gICAgICAgICAgICAgICAgICAgIGFydGljbGVkaXI6IGFydGRpcixcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogICAgICAgYXJ0ZGlyICsgZmlsZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB2YXIgaW5pdHMgPSBfLm1hcChhcnRpY2xlcywgZnVuY3Rpb24oYXJ0aWNsZSl7cmV0dXJuIGFydGljbGUuaW5pdCgpO30pO1xuICAgICAgICAgICAgJC53aGVuLmFwcGx5KG51bGwsaW5pdHMpLmRvbmUoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgY29sLmFkZChhcnRpY2xlcyk7XG4gICAgICAgICAgICAgICAgdGhhdC5zZXRJY29ucygpO1xuICAgICAgICAgICAgICAgIHRoYXQuJGRlZi5yZXNvbHZlKHRoYXQpO1xuICAgICAgICAgICAgfSkuYWx3YXlzKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIF8uZm9yRWFjaChpbml0cywgZnVuY3Rpb24oJHByb21pc2Upe1xuICAgICAgICAgICAgICAgICAgICBpZiAoJHByb21pc2Uuc3RhdGUoKSA9PT0gJ3JlamVjdGVkJylcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuJGRlZi5yZWplY3QoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGF0LiRkZWYucmVqZWN0KCk7IC8vIG5vdCByZS1zZXQgb24gZmFpbHVyZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gbWFwIG1hcmtlciBpY29ucyBmaWxlbmFtZSB2YWx1ZXMgYXJlIHNldCBoZXJlOyBpY29uIGNvbG9ycyBhcmUgYXNzaWduZWRcbiAgICAgICAgLy8gcmFuZG9tbHksIHNvIHRvIHN1cHBvcnQgYSBjb25zaXN0ZW5jeSBiZXR3ZWVuIHRoZSBjb2xvciBhbmQgdGhlIHBsYWNlLXR5cGVcbiAgICAgICAgLy8gbGF5ZXIsIHRoZXkgbXVzdCBiZSBhc3NpZ25lZCBhcyBhIGdyb3VwXG4gICAgICAgICwgc2V0SWNvbnM6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIGljY29uZmlnICA9IHRoYXQuY29uZmlnLm1hcmtlcnMuaWNvbnM7XG4gICAgICAgICAgICB2YXIgaWNvbkZpbGVzID0gXy5zaHVmZmxlKF8uZmxhdHRlbihcbiAgICAgICAgICAgICAgICBfLm1hcChpY2NvbmZpZywgZnVuY3Rpb24oZW50cnkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF8ubWFwKGVudHJ5LmZpbGVzLCBmdW5jdGlvbihmaWxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZW50cnkuZGlyLmNvbmNhdChmaWxlKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICkpO1xuICAgICAgICAgICAgdmFyIGRlZmF1bHRJY29uRmlsZSA9IGljb25GaWxlcy5wb3AoKTtcbiAgICAgICAgICAgIHZhciBpY29ucyA9IFtdO1xuICAgICAgICAgICAgLy8gZG8gbWFwIG1hcmtlciBpY29uIGluaXRpYWxpemF0aW9uOyB0aGlzIHNlZW1zIGxpa2UgaXQgc2hvdWxkXG4gICAgICAgICAgICAvLyBiZSBpc29sYXRlZCB0byB0aGUgTWFwVmlldyBvciBNYXJrZXJWaWV3LCBidXQgaXMgZGF0YSB1c2VkXG4gICAgICAgICAgICAvLyBlbHNld2hlcmUgaW4gdGhlIGFwcGxpY2F0aW9uLCBzbyB0aGV5IGFyZSBhc3NpZ25lZCBoZXJlXG4gICAgICAgICAgICB0aGF0LmdldCgnY29sbGVjdGlvbicpLmZvckVhY2goZnVuY3Rpb24oYXJ0aWNsZSxpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGdlb2pzb24gPSAoYXJ0aWNsZS5nZXRHZW9qc29uKCkgfHwge1wicHJvcGVydGllc1wiOnt9fSk7XG4gICAgICAgICAgICAgICAgdmFyIGxheWVyID0gZ2VvanNvbi5wcm9wZXJ0aWVzLmxheWVyO1xuICAgICAgICAgICAgICAgIGljb25zW2xheWVyXSA9IGljb25zW2xheWVyXSB8fCBpY29uRmlsZXMucG9wKCkgfHwgZGVmYXVsdEljb25GaWxlO1xuICAgICAgICAgICAgICAgIGFydGljbGUuc2V0KCdpY29uVXJsJywgaWNvbnNbbGF5ZXJdKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIC8vIHJldHVybiBhcnRpY2xlIG9iamVjdCBjb3JyZXNwb25kaW5nIHRvIGFyZ3VtZW50O1xuICAgICAgICAvLyBhcmd1bWVudCBtYXkgYmUgZWl0aGVyIGFuIGluZGV4IGludG8gdGhlIGNvbGxlY3Rpb25cbiAgICAgICAgLy8gKGUuZy4sIHdoZW4gcHJvdmlkZWQgYnkgYSB1cmwpIG9yIGFuIEFydGljbGVNb2RlbFxuICAgICAgICAvLyAoZS5nLiwgd2hlbiBzZWxlY3RlZCBieSBhIG1hcCBtYXJrZXIpIFxuICAgICAgICAsIGdldEFydGljbGU6IGZ1bmN0aW9uKGFydGljbGUpIHtcbiAgICAgICAgICAgIHZhciBhcnQ7XG4gICAgICAgICAgICB2YXIgY29sID0gdGhpcy5nZXQoJ2NvbGxlY3Rpb24nKTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgYXJ0aWNsZSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgICAgICBhcnQgPSBhcnRpY2xlO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgYXJ0aWNsZSA9PT0gJ251bWJlcicgfHwgdHlwZW9mIGFydGljbGUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgYXJ0ID0gY29sLmF0KGFydGljbGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGFydDtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIF8uZXh0ZW5kKElzc3VlTW9kZWwucHJvdG90eXBlLEFzeW5jSW5pdCk7XG4gICAgcmV0dXJuIElzc3VlTW9kZWw7XG59KTtcbiIsIi8qZ2xvYmFsIGRlZmluZSAqL1xuZGVmaW5lKCdtb2RlbHMvbWFwJywgW1xuICAgICAgJ2pxdWVyeSdcbiAgICAsICd1bmRlcnNjb3JlJ1xuICAgICwgJ2JhY2tib25lJ1xuICAgICwgJ21peGlucy9hc3luY0luaXQnXG5dLCBmdW5jdGlvbigkLF8sQmFja2JvbmUsQXN5bmNJbml0KSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBNYXBNb2RlbCA9IEJhY2tib25lLk1vZGVsLmV4dGVuZCh7XG4gICAgICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uKGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ICA9IHRoaXM7XG4gICAgICAgICAgICB0aGF0LiRkZWYgPSAkLkRlZmVycmVkKCk7XG4gICAgICAgICAgICAkLmdldEpTT04oYXJncy5jb25maWcubWFwLmNvbmZpZywgZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgIHRoYXQuc2V0KCdtYXBjb25maWcnLCBkYXRhKTtcbiAgICAgICAgICAgICAgICB0aGF0LiRkZWYucmVzb2x2ZSh0aGF0KTtcbiAgICAgICAgICAgIH0pLmZhaWwoZnVuY3Rpb24oanF4aHIsIHRleHRTdGF0dXMsIGVycm9yKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0ZhaWxlZCB0byBsb2FkIG1hcCBjb25maWcgZmlsZTogJyArIGVycm9yKTtcbiAgICAgICAgICAgICAgICB0aGF0LiRkZWYucmVqZWN0KCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgZGVmYXVsdHM6IHtcbiAgICAgICAgICAgIFwibWFwY29uZmlnXCIgOiB7fVxuICAgICAgICB9LFxuICAgIH0pO1xuICAgIF8uZXh0ZW5kKE1hcE1vZGVsLnByb3RvdHlwZSxBc3luY0luaXQpO1xuICAgIHJldHVybiBNYXBNb2RlbDtcbn0pO1xuIiwiLypnbG9iYWwgZGVmaW5lICovXG5kZWZpbmUoJ3JvdXRlcy9yb3V0ZXInLCBbXG4gICAgICAnanF1ZXJ5J1xuICAgICwgJ3VuZGVyc2NvcmUnXG4gICAgLCAnYmFja2JvbmUnXG4gICAgLCAnbW9kZWxzL2Vycm9yL3VzZXInXG4gICAgLCAndmlld3MvZXJyb3IvdXNlcidcbiAgICAsICd2aWV3cy9jbGVhcidcbiAgICAsICdjb250cm9sbGVycy9pc3N1ZSdcbiAgICAsICdjb250cm9sbGVycy9tYXAnXG4gICAgLCAndmlld3MvbWVudSdcbl0sIGZ1bmN0aW9uKCQsXyxCYWNrYm9uZSxVc2VyRXJyb3JNb2RlbCxVc2VyRXJyb3JWaWV3LENsZWFyVmlldyxJc3N1ZUNvbnRyb2xsZXIsTWFwQ29udHJvbGxlcixNZW51Vmlldykge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgUm91dGVyID0gQmFja2JvbmUuUm91dGVyLmV4dGVuZCh7XG4gICAgICAgICAgcGFnZXMgICA6IHt9ICAgLy8gY29uZmlnIGZvciBzdXBwb3J0ZWQgcGFnZXNcbiAgICAgICAgLCBjb25maWcgIDoge30gICAvLyBnbG9iYWwgc2l0ZSBjb25maWd1cmF0aW9uLCBpLmUuLCBzaXRlLmpzb25cbiAgICAgICAgLCBpc3N1ZUNvbnRyb2xsZXIgOiBudWxsIC8vIElzc3VlTW9kZWwgZm9yIHRoaXMgYXBwXG4gICAgICAgICwgbWFwQ29udHJvbGxlciAgIDogbnVsbFxuICAgICAgICAsIGluaXRpYWxpemU6IGZ1bmN0aW9uKG9wdHMpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ICAgID0gdGhpcztcbiAgICAgICAgICAgIHRoaXMuY29uZmlnID0gb3B0cy5jb25maWc7XG4gICAgICAgICAgICB0aGlzLnBhZ2VzICA9IG9wdHMuY29uZmlnLnBhZ2VzO1xuICAgICAgICAgICAgdGhpcy5pc3N1ZUNvbnRyb2xsZXIgPSBuZXcgSXNzdWVDb250cm9sbGVyKHtcbiAgICAgICAgICAgICAgICAgIHJvdXRlcjogdGhpc1xuICAgICAgICAgICAgICAgICwgY29uZmlnOiB0aGlzLmNvbmZpZyBcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5pc3N1ZUNvbnRyb2xsZXIuaW5pdCgpLmRvbmUoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgLy8gcGFnZXMucm91dGVyLmhpc3RvcnkgPSB0cnVlIGJ5IGRlZmF1bHQsIGlmIG1pc3NpbmdcbiAgICAgICAgICAgICAgICBpZiAoXy5oYXModGhhdC5wYWdlcy5yb3V0ZXIsJ2hpc3RvcnknKSAmJiAhIXRoYXQucGFnZXMucm91dGVyLmhpc3RvcnkpIHtcbiAgICAgICAgICAgICAgICAgICAgQmFja2JvbmUuaGlzdG9yeS5zdGFydCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgICwgbmF2aWdhdGU6IGZ1bmN0aW9uKGZyYWdtZW50LG9wdGlvbnMpIHtcbiAgICAgICAgICAgIGlmIChCYWNrYm9uZS5oaXN0b3J5LmZyYWdtZW50ID09PSBmcmFnbWVudCkgcmV0dXJuO1xuICAgICAgICAgICAgQmFja2JvbmUuaGlzdG9yeS5uYXZpZ2F0ZShmcmFnbWVudCxvcHRpb25zKTtcbiAgICAgICAgfVxuICAgICAgICAsIHBhZ2U6IGZ1bmN0aW9uKHBhZ2UpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIHZhciBwYWdlQ29uZmlnO1xuICAgICAgICAgICAgdmFyIG1hcFBhZ2UgPSBmYWxzZTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgaWYgKCFwYWdlKSBwYWdlID0gdGhpcy5wYWdlcy5ob21lO1xuICAgICAgICAgICAgICAgIHBhZ2VDb25maWcgPSB0aGlzLnBhZ2VzLnBhZ2VzW3BhZ2VdO1xuICAgICAgICAgICAgICAgIGlmIChwYWdlQ29uZmlnID09PSB1bmRlZmluZWQpIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBjb25maWcgaW4gcm91dGVyL3BhZ2UnKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wYWdlKCc0MDQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG5ldyBDbGVhclZpZXcoKS5yZW5kZXIoKTtcbiAgICAgICAgICAgIF8uZWFjaChwYWdlQ29uZmlnLCBmdW5jdGlvbihwYykge1xuICAgICAgICAgICAgICAgIHZhciB2aWV3TmFtZTtcbiAgICAgICAgICAgICAgICB2YXIgYXJncyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICBjb25maWc6IHRoYXQuY29uZmlnXG4gICAgICAgICAgICAgICAgICAgICwgaXNzdWU6ICB0aGF0Lmlzc3VlQ29udHJvbGxlci5tb2RlbFxuICAgICAgICAgICAgICAgICAgICAsIHJvdXRlcjogdGhhdFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgLy8gY2xvbmUgY29uZmlnIHRvIGF2b2lkIGdsb2JhbCBjaGFuZ2VzXG4gICAgICAgICAgICAgICAgdmFyIGNvbmZpZyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkocGMpKTtcbiAgICAgICAgICAgICAgICBpZiAoXy5oYXMoY29uZmlnLCAndmlldycpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZpZXdOYW1lID0gY29uZmlnLnZpZXc7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChfLmhhcyhjb25maWcsICdwYXJ0aWFsJykpIHtcbiAgICAgICAgICAgICAgICAgICAgdmlld05hbWUgPSAndmlld3MvcGFydGlhbCc7XG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZy5wYXJ0aWFsLnBhZ2UgPSB0aGF0LnBhZ2VzLnBhdGhCYXNlICsgY29uZmlnLnBhcnRpYWwucGFnZTtcbiAgICAgICAgICAgICAgICAgICAgYXJncyA9IF8uZXh0ZW5kKGFyZ3MsY29uZmlnLnBhcnRpYWwpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoXy5oYXMoY29uZmcsICdmdWxsJykpIHtcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBjb25maWcuZnVsbC5wYWdlO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbnN1cHBvcnRlZCBwYWdlIHR5cGUgaW4gcm91dGVyOiAnICsgcGFnZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh2aWV3TmFtZSA9PT0gJ3ZpZXdzL21hcCcpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5tYXBDb250cm9sbGVyID0gbmV3IE1hcENvbnRyb2xsZXIoYXJncyk7XG4gICAgICAgICAgICAgICAgICAgIG1hcFBhZ2UgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJlcXVpcmUoW3ZpZXdOYW1lXSwgZnVuY3Rpb24oVmlldykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHYgPSBuZXcgVmlldyhhcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHYucmVuZGVyKCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKCFtYXBQYWdlKSB0aGF0Lm1hcENvbnRyb2xsZXIgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgICwgYXJ0aWNsZSA6IGZ1bmN0aW9uKGlkKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgYXJncyA9IHtcbiAgICAgICAgICAgICAgICAgIGNvbmZpZzogdGhhdC5jb25maWdcbiAgICAgICAgICAgICAgICAsIGlzc3VlOiAgdGhhdC5pc3N1ZUNvbnRyb2xsZXIubW9kZWxcbiAgICAgICAgICAgICAgICAsIHJvdXRlcjogdGhhdFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmICgkKCcjdGl0bGVwYWdlJykubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICQoJyN0aXRsZXBhZ2UnKS5yZW1vdmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICgkKCcjcGFnZScpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAkKCcjcGFnZScpLnJlbW92ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoYXQubWFwQ29udHJvbGxlciA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRoYXQubWFwQ29udHJvbGxlciA9IG5ldyBNYXBDb250cm9sbGVyKGFyZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCQoJyNtZW51JykuY2hpbGRyZW4oKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICBuZXcgTWVudVZpZXcoYXJncykucmVuZGVyKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBzZWxlY3QgdGhlIGFydGljbGUgaW5kaWNhdGVkIGJ5IHRoZSB1cmwncyByb3V0ZSBvbmx5IGFmdGVyXG4gICAgICAgICAgICAvLyB0aGUgbWFwIGhhcyBpbml0aWFsaXplZFxuICAgICAgICAgICAgdGhhdC5tYXBDb250cm9sbGVyLmluaXQoKS5kb25lKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHZhciBhcnRpY2xlID0gdGhhdC5pc3N1ZUNvbnRyb2xsZXIubW9kZWwuZ2V0QXJ0aWNsZShpZCk7IFxuICAgICAgICAgICAgICAgIGFydGljbGUudHJpZ2dlcignYWN0aXZlJywgYXJ0aWNsZSk7XG4gICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIFJvdXRlcjtcbn0pO1xuIiwiLypnbG9iYWwgZGVmaW5lKi9cbmRlZmluZSgnY29udHJvbGxlcnMvbWFwL2xheWVyJywgW1xuICAgICAgJ2pxdWVyeSdcbiAgICAsICd1bmRlcnNjb3JlJ1xuICAgICwgJ2JhY2tib25lJ1xuICAgICwgJ2NvbnRyb2xsZXJzL3Byb3RvdHlwZSdcbiAgICAsICdjb250cm9sbGVycy9tYXAvbGF5ZXIvcGxhY2V0eXBlJ1xuICAgICwgJ2NvbnRyb2xsZXJzL21hcC9sYXllci90aW1lbGluZSdcbl0sIGZ1bmN0aW9uKCQsXyxCYWNrYm9uZSxDb250cm9sbGVyLFBsYWNlVHlwZUNvbnRyb2xsZXIsVGltZWxpbmVDb250cm9sbGVyKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBNYXBMYXllckNvbnRyb2xsZXIgPSBDb250cm9sbGVyLmV4dGVuZCh7XG4gICAgICAgICAgdmlldyAgIDogbnVsbFxuICAgICAgICAsIHJvdXRlciA6IG51bGxcbiAgICAgICAgLCBtYXAgICAgOiBudWxsXG4gICAgICAgICwgY29udHJvbHNjb25maWcgOiBudWxsXG4gICAgICAgICwgaW5pdGlhbGl6ZTogZnVuY3Rpb24oYXJncykge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgdGhhdC5tYXAgPSBhcmdzLm1hcDtcbiAgICAgICAgICAgIHRoYXQudmlldyA9IGFyZ3MudmlldztcbiAgICAgICAgICAgIHRoYXQubW9kZWwgPSBhcmdzLm1vZGVsO1xuICAgICAgICAgICAgdGhhdC5jb250cm9sc2NvbmZpZyA9IGFyZ3MuY29udHJvbHNjb25maWc7XG4gICAgICAgICAgICB0aGF0LnN1YkNvbnRyb2xsZXJzID0gW107XG4gICAgICAgICAgICBpZiAoXy5oYXModGhhdC5jb250cm9sc2NvbmZpZywgJ3BsYWNldHlwZScpICYmIHRoYXQuY29udHJvbHNjb25maWcucGxhY2V0eXBlLmVuYWJsZSkge1xuICAgICAgICAgICAgICAgIHRoYXQuc3ViQ29udHJvbGxlcnMucHVzaChuZXcgUGxhY2VUeXBlQ29udHJvbGxlcih7XG4gICAgICAgICAgICAgICAgICAgICAgdmlld3MgOiB0aGF0LnZpZXcubWFya2VyVmlld3NcbiAgICAgICAgICAgICAgICAgICAgLCBtYXAgICA6IHRoYXQudmlldy5tYXBcbiAgICAgICAgICAgICAgICAgICAgLCBtYXBjb25maWc6IHRoYXQubW9kZWwuYXR0cmlidXRlcy5tYXBjb25maWdcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoXy5oYXModGhhdC5jb250cm9sc2NvbmZpZywgJ3RpbWVsaW5lJykgJiYgdGhhdC5jb250cm9sc2NvbmZpZy50aW1lbGluZS5lbmFibGUpIHtcbiAgICAgICAgICAgICAgICB0aGF0LnN1YkNvbnRyb2xsZXJzLnB1c2gobmV3IFRpbWVsaW5lQ29udHJvbGxlcih7XG4gICAgICAgICAgICAgICAgICAgICAgbWFya2VyVmlld3MgOiB0aGF0LnZpZXcubWFya2VyVmlld3NcbiAgICAgICAgICAgICAgICAgICAgLCBtYXAgICAgICAgICA6IHRoYXQudmlldy5tYXBcbiAgICAgICAgICAgICAgICAgICAgLCBzaXRlY29uZmlnICA6IHRoYXQubW9kZWwuYXR0cmlidXRlcy5jb25maWdcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBfLmZvckVhY2godGhhdC5zdWJDb250cm9sbGVycywgZnVuY3Rpb24oc3ViQ29udHJvbGxlcikge1xuICAgICAgICAgICAgICAgIHRoYXQubGlzdGVuVG8oc3ViQ29udHJvbGxlciwgJ2ZpbHRlcicsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICB0aGF0Ll91cGRhdGVNYXJrZXJzKClcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIC8vIGZpbHRlciB0aGUgdmlzaWJsZSBtYXAgbWFya2VycyBiYXNlZCBvbiB0aGUgcGxhY2V0eXBlIGFuZCB0aGVcbiAgICAgICAgLy8gdGltZWxpbmUgbGF5ZXIgY29udHJvbHM7IHRoZSBcImhpZGVcIiBzdGF0ZSB0YWtlcyBwcmVjZWRlbmNlIGlmXG4gICAgICAgIC8vIHRoZSBjb250cm9scyBkaXNhZ3JlZSAoaS5lLiwgYSBtYXJrZXIgdGhhdCBpcyBoaWRkZW4gb24gYW55XG4gICAgICAgIC8vIGNvbnRyb2wgaXMgaGlkZGVuIG9uIHRoZSBtYXApXG4gICAgICAgICwgX3VwZGF0ZU1hcmtlcnM6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIHNob3cgPSBbXSwgaGlkZSA9IFtdO1xuICAgICAgICAgICAgXy5mb3JFYWNoKHRoYXQuc3ViQ29udHJvbGxlcnMsIGZ1bmN0aW9uKHN1YkNvbnRyb2xsZXIpe1xuICAgICAgICAgICAgICAgIHZhciByZXMgPSBzdWJDb250cm9sbGVyLmdldEZpbHRlclN0YXRlKCk7XG4gICAgICAgICAgICAgICAgaGlkZS5wdXNoKHJlcy5oaWRlKVxuICAgICAgICAgICAgICAgIGhpZGUgPSBfLmZsYXR0ZW4oaGlkZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIF8uZm9yRWFjaCh0aGF0LnZpZXcubWFya2VyVmlld3MsIGZ1bmN0aW9uKG1hcmtlclZpZXcpIHtcbiAgICAgICAgICAgICAgICB2YXIgZm91bmQgPSBfLmZpbmQoaGlkZSwgZnVuY3Rpb24oaGlkZGVuTGF5ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgaGlkZGVuTGF5ZXIgPT09IG1hcmtlclZpZXcubWFya2VyTGF5ZXJcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAoIWZvdW5kKVxuICAgICAgICAgICAgICAgICAgICBzaG93LnB1c2gobWFya2VyVmlldy5tYXJrZXJMYXllcik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIF8uZm9yRWFjaChzaG93LCBmdW5jdGlvbihtYXJrZXJMYXllcikge1xuICAgICAgICAgICAgICAgIHRoYXQudmlldy5tYXAuYWRkTGF5ZXIobWFya2VyTGF5ZXIpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBfLmZvckVhY2goaGlkZSwgZnVuY3Rpb24obWFya2VyTGF5ZXIpIHtcbiAgICAgICAgICAgICAgICB0aGF0LnZpZXcubWFwLnJlbW92ZUxheWVyKG1hcmtlckxheWVyKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIE1hcExheWVyQ29udHJvbGxlcjtcbn0pO1xuIiwiLypnbG9iYWwgZGVmaW5lKi9cbmRlZmluZSgnY29udHJvbGxlcnMvbWFwL3BhbicsIFtcbiAgICAgICdqcXVlcnknXG4gICAgLCAndW5kZXJzY29yZSdcbiAgICAsICdiYWNrYm9uZSdcbiAgICAsICdjb250cm9sbGVycy9wcm90b3R5cGUnXG4gICAgLCAnbWl4aW5zL2RvbXdhdGNoZXInXG5dLCBmdW5jdGlvbigkLF8sQmFja2JvbmUsQ29udHJvbGxlcixET01XYXRjaGVyKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBNYXBQYW5Db250cm9sbGVyID0gQ29udHJvbGxlci5leHRlbmQoe1xuICAgICAgICAgIG1hcDogbnVsbFxuICAgICAgICAsIGluaXRpYWxpemU6IGZ1bmN0aW9uKGFyZ3MpIHtcbiAgICAgICAgICAgIHRoaXMubWFwID0gYXJncy5tYXA7XG4gICAgICAgICAgICBpZiAoIXRoaXMubWFwKVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVuaW5pdGlhbGl6ZWQgbWFwXCIpO1xuICAgICAgICB9XG4gICAgICAgICwgX2ZpdE1hcmtlckJvdW5kcyA6IGZ1bmN0aW9uKG1hcmtlclZpZXdzKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgZWx0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FydGljbGUnKTtcbiAgICAgICAgICAgIGlmICghZWx0KSByZXR1cm47XG4gICAgICAgICAgICB2YXIgZWRnZVB0WCA9IEwuRG9tVXRpbC5nZXRWaWV3cG9ydE9mZnNldChlbHQpLng7XG4gICAgICAgICAgICB2YXIgYm91bmRzID0gTC5sYXRMbmdCb3VuZHMoXy5tYXAobWFya2VyVmlld3MsZnVuY3Rpb24obWFya2VyVmlldykge1xuICAgICAgICAgICAgICAgIHZhciBsbmdMYXQgPSBtYXJrZXJWaWV3Lm1vZGVsLmdldEdlb2pzb24oKS5nZW9tZXRyeS5jb29yZGluYXRlcy5zbGljZSgwKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gTC5sYXRMbmcobG5nTGF0LnJldmVyc2UoKSk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICBpZiAoZWRnZVB0WCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHRoYXQubWFwLmZpdEJvdW5kcyhib3VuZHMpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChlZGdlUHRYICE9IHRoYXQubWFwLmdldFNpemUoKS54KSB7XG4gICAgICAgICAgICAgICAgLy8gbWFwIHVuZGVybmVhdGggYXJ0aWNsZVxuICAgICAgICAgICAgICAgIHRoYXQubWFwLmZpdEJvdW5kcyhib3VuZHMsIHtcbiAgICAgICAgICAgICAgICAgICAgJ3BhZGRpbmdCb3R0b21SaWdodCcgOiBbZG9jdW1lbnQuYm9keS5jbGllbnRXaWR0aCAtIGVkZ2VQdFgsMF1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gbWFwIGJlc2lkZSBhcnRpY2xlXG4gICAgICAgICAgICAgICAgdGhhdC5tYXAuZml0Qm91bmRzKGJvdW5kcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGF0Lm1hcC5pbnZhbGlkYXRlU2l6ZSgpO1xuICAgICAgICB9XG4gICAgICAgIC8vIGFkanVzdCBtYXAgcGFuL3pvb20gdG8gbWFrZSBhbGwgbWFwIG1hcmtlcnMgb2NjdXIgdG8gdGhlIFxuICAgICAgICAvLyBsZWZ0IG9mIGRpdiNhcnRpY2xlIGluIHdpZGUgbW9kZVxuICAgICAgICAsIGZpdE1hcmtlckJvdW5kcyA6IGZ1bmN0aW9uKG1hcmtlclZpZXdzKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgJGRlZiA9ICQuRGVmZXJyZWQoKTtcbiAgICAgICAgICAgICRkZWYudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB0aGF0Ll9maXRNYXJrZXJCb3VuZHMobWFya2VyVmlld3MpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLndhdGNoRE9NKDEwMDAsJyNhcnRpY2xlJywkZGVmKTtcbiAgICAgICAgfVxuICAgICAgICAsIGhhbmRsZVBvcHVwUG9zaXRpb24gOiBmdW5jdGlvbihwb3B1cCkge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIG1hcCA9IHRoYXQubWFwO1xuICAgICAgICAgICAgdmFyIGlkID0gJChwb3B1cC5nZXRDb250ZW50KCkpLmF0dHIoJ2lkJyk7XG4gICAgICAgICAgICB2YXIgZWRnZVB0WCwgJHBvcHVwV3JhcCwgcG9wdXBMYXRMbmcsIHBvcHVwUmlnaHRYLCBwYWQ7XG4gICAgICAgICAgICBwb3B1cExhdExuZyA9IHBvcHVwLmdldExhdExuZygpO1xuICAgICAgICAgICAgaWYgKHBvcHVwTGF0TG5nID09PSB1bmRlZmluZWQpIHJldHVybjtcbiAgICAgICAgICAgIGVkZ2VQdFggPSBMLkRvbVV0aWwuZ2V0Vmlld3BvcnRPZmZzZXQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FydGljbGUnKSkueDtcbiAgICAgICAgICAgIC8vIG1hcCBzaG91bGQgcGFuIHJpZ2h0L2Vhc3QgaWYgdGhlIHBvcHVwIGJhbGxvb24gaXMgY292ZXJlZCBieSB0aGUgYXJ0aWNsZTtcbiAgICAgICAgICAgIC8vIHBhZCBpcyBhIHNsaWdodCByZWxpZWYgYmV0d2VlbiB0aGUgcG9wdXAgYW5kIHRoZSBhcnRpY2xlXG4gICAgICAgICAgICAkcG9wdXBXcmFwID0gJCgnIycgKyBpZCkuY2xvc2VzdCgnLmxlYWZsZXQtcG9wdXAtY29udGVudC13cmFwcGVyJykuZmlyc3QoKTtcbiAgICAgICAgICAgIHBhZCA9IEwucG9pbnQocG9wdXAub3B0aW9ucy5hdXRvUGFuUGFkZGluZ0JvdHRvbVJpZ2h0IHx8IHBvcHVwLm9wdGlvbnMuYXV0b1BhblBhZGRpbmcpO1xuICAgICAgICAgICAgcGFkID0gcGFkID8gcGFkLnggOiAwO1xuICAgICAgICAgICAgcG9wdXBSaWdodFggPSAoJHBvcHVwV3JhcC5sZW5ndGggPiAwKSBcbiAgICAgICAgICAgICAgICA/ICRwb3B1cFdyYXAub2Zmc2V0KCkubGVmdCArICRwb3B1cFdyYXAud2lkdGgoKSArIHBhZFxuICAgICAgICAgICAgICAgIDogMDtcbiAgICAgICAgICAgIGlmIChlZGdlUHRYICE9IDAgJiYgcG9wdXBSaWdodFggPiBlZGdlUHRYICYmIGVkZ2VQdFggIT0gbWFwLmdldFNpemUoKS54KSB7XG4gICAgICAgICAgICAgICAgbWFwLnBhbkJ5KFtwb3B1cFJpZ2h0WCAtIGVkZ2VQdFgsMF0pO1xuICAgICAgICAgICAgfSBlbHNlIGlmICghbWFwLmdldEJvdW5kcygpLmNvbnRhaW5zKHBvcHVwLmdldExhdExuZygpKSkge1xuICAgICAgICAgICAgICAgIG1hcC5jbG9zZVBvcHVwKHBvcHVwKTtcbiAgICAgICAgICAgICAgICBtYXAub3BlblBvcHVwKHBvcHVwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuICAgIF8uZXh0ZW5kKE1hcFBhbkNvbnRyb2xsZXIucHJvdG90eXBlLERPTVdhdGNoZXIpO1xuICAgIHJldHVybiBNYXBQYW5Db250cm9sbGVyO1xufSk7XG4iLCIvKmdsb2JhbCBkZWZpbmUqL1xuZGVmaW5lKCd2aWV3cy9hcnRpY2xlL2dhbGxlcnknLCBbXG4gICAgICAnanF1ZXJ5J1xuICAgICwgJ3VuZGVyc2NvcmUnXG4gICAgLCAnYmFja2JvbmUnXG4gICAgLCAndmlld3MvYXJ0aWNsZS9nYWxsZXJ5L3BvcG92ZXInXG4gICAgLCAndmlld3MvYXJ0aWNsZS9nYWxsZXJ5L2xpZ2h0Ym94J1xuICAgICwgJ3ZpZXdzL2FydGljbGUvZ2FsbGVyeS9zbGlkZXMnXG5dLCBmdW5jdGlvbigkLF8sQmFja2JvbmUsQXJ0aWNsZUdhbGxlcnlQb3BvdmVyVmlldyxBcnRpY2xlR2FsbGVyeUxpZ2h0Ym94VmlldyxBcnRpY2xlR2FsbGVyeVNsaWRlc1ZpZXcpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIEFydGljbGVHYWxsZXJ5VmlldyA9IEJhY2tib25lLlZpZXcuZXh0ZW5kKHtcbiAgICAgICAgICBpZDogJ2FydGljbGUnXG4gICAgICAgICwgaW5pdGlhbGl6ZTogZnVuY3Rpb24oKSB7fVxuICAgICAgICAsIHJlbW92ZTogZnVuY3Rpb24oKSB7IC8qIHJldGFpbiAqL31cbiAgICAgICAgLCByZW5kZXI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIC8vIGFkanVzdCBoZWlnaHQgb2YgYXJ0aWNsZSBib2R5XG4gICAgICAgICAgICAvLyBUT0RPOiBoYW5kbGUgaW4gY3NzXG4gICAgICAgICAgICB2YXIgaGVpZ2h0ID0gJCgnI2FydGljbGUgYXJ0aWNsZScpLmhlaWdodCgpIC0gJCgnI2hlYWRlcicpLm91dGVySGVpZ2h0KHRydWUpO1xuICAgICAgICAgICAgJCgnI2JvZHknKS5jc3Moe2hlaWdodDpoZWlnaHR9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gcmVtb3ZlIGltYWdlcyB0aGF0IGZhaWwgdG8gbG9hZCwgc2luY2Ugd2UgY2Fubm90IGRvXG4gICAgICAgICAgICAvLyBhIGZpbGUgdGVzdCB3aGVuIHJ1bm5pbmcgdGhlIHhzbFxuICAgICAgICAgICAgdmFyIGRlZnMgPSBbXTtcbiAgICAgICAgICAgICQoJ2ltZy5zbGlkZXNqcy1zbGlkZScpLmVhY2goZnVuY3Rpb24oaSxpbWcpe1xuICAgICAgICAgICAgICAgIHZhciAkZGVmID0gJC5EZWZlcnJlZCgpO1xuICAgICAgICAgICAgICAgICQoaW1nKS5sb2FkKGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICQoaW1nKS5yZW1vdmVDbGFzcygncmVtb3ZlJyk7XG4gICAgICAgICAgICAgICAgICAgICRkZWYucmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICQoaW1nKS5lcnJvcihmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICAvLyBhbGxvdyBzb21lIHRpbWUgYmVmb3JlIGZhaWx1cmVcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICRkZWYucmVqZWN0KCk7XG4gICAgICAgICAgICAgICAgICAgIH0sNTAwKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBkZWZzLnB1c2goJGRlZik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICQud2hlbi5hcHBseSh7fSxkZWZzKS5hbHdheXMoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAkKCdpbWcuc2xpZGVzanMtc2xpZGUucmVtb3ZlJykucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgJCgnLmltYWdlLWxvYWRpbmcnKS5yZW1vdmVDbGFzcygnaW1hZ2UtbG9hZGluZycpO1xuICAgICAgICAgICAgICAgIG5ldyBBcnRpY2xlR2FsbGVyeVBvcG92ZXJWaWV3KCkucmVuZGVyKCk7XG4gICAgICAgICAgICAgICAgbmV3IEFydGljbGVHYWxsZXJ5TGlnaHRib3hWaWV3KCkucmVuZGVyKCk7XG4gICAgICAgICAgICAgICAgbmV3IEFydGljbGVHYWxsZXJ5U2xpZGVzVmlldygpLnJlbmRlcigpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gQXJ0aWNsZUdhbGxlcnlWaWV3O1xufSk7XG4iLCIvKmdsb2JhbCBkZWZpbmUqL1xuLypcbiAqIFRoaXMgaXMgbWVhbnQgdG8gYmUgZXh0ZW5kZWQgYXMgYW4gYWJzdHJhY3QgYmFzZSBjbGFzcyBmb3IgdGhlXG4gKiBzZWN0aW9ucyBvZiBhbiBhcnRpY2xlLlxuICovXG5kZWZpbmUoJ3ZpZXdzL2FydGljbGUvbWVudScsIFtcbiAgICAnanF1ZXJ5JywgXG4gICAgJ3VuZGVyc2NvcmUnLCBcbiAgICAnYmFja2JvbmUnLFxuICAgICdtaXhpbnMveG1sMmh0bWwnLFxuICAgICd0ZXh0IXhzbC9hcnRpY2xlLW1lbnUueHNsJ1xuXSwgZnVuY3Rpb24oJCxfLEJhY2tib25lLFhNTDJIVE1MLGFtWHNsKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBBcnRpY2xlTWVudVZpZXcgPSBCYWNrYm9uZS5WaWV3LmV4dGVuZCh7XG4gICAgICAgIHJlbmRlcjogZnVuY3Rpb24ocGFyYW1zKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICAvLyB0aGlzIHZpZXcgaXMgbWVhbnQgdG8gYmUgY2FsbGVkIG9ubHkgYWZ0ZXIgdGhlIGNvcnJlc3BvbmRpbmdcbiAgICAgICAgICAgIC8vIGFydGljbGUgbW9kZWwgaGFzIGJlZW4gaW5pdGlhbGl6ZWRcbiAgICAgICAgICAgIGlmICh0aGlzLm1vZGVsLmluaXQoKS5zdGF0ZSgpICE9PSAncmVzb2x2ZWQnKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgXCJVbmluaXRpYWxpemVkIGFydGljbGUgaW4gQXJ0aWNsZU1lbnVWaWV3XCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgbWVudWl0ZW0gPSB0aGF0LnhtbDJodG1sKHRoYXQubW9kZWwuZ2V0KCd4bWwnKSwgYW1Yc2wsIHBhcmFtcyk7XG4gICAgICAgICAgICByZXR1cm4gbWVudWl0ZW07XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBfLmV4dGVuZChBcnRpY2xlTWVudVZpZXcucHJvdG90eXBlLFhNTDJIVE1MKTtcbiAgICByZXR1cm4gQXJ0aWNsZU1lbnVWaWV3O1xufSk7XG4iLCIvKmdsb2JhbCBkZWZpbmUqL1xuZGVmaW5lKCd2aWV3cy9lcnJvci91c2VyJywgW1xuICAgICdqcXVlcnknLCBcbiAgICAnYmFja2JvbmUnLCBcbiAgICAndGV4dCFwYXJ0aWFscy9lcnJvci91c2VyLmh0bWwnXG5dLCBmdW5jdGlvbigkLEJhY2tib25lLHRtcGwpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIFVzZXJFcnJvclZpZXcgPSBCYWNrYm9uZS5WaWV3LmV4dGVuZCh7XG4gICAgICAgIHRlbXBsYXRlOiBfLnRlbXBsYXRlKHRtcGwpLFxuICAgICAgICBlbDogJCgnI2Vycm9yRGlhbG9nJyksXG4gICAgICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgICAgIH0sXG4gICAgICAgIHJlbmRlcjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy4kZWwuaHRtbCh0aGlzLnRlbXBsYXRlKHRoaXMubW9kZWwuYXR0cmlidXRlcykpO1xuICAgICAgICAgICAgdGhpcy4kZWwubW9kYWwoe2tleWJvYXJkOiB0cnVlLCBzaG93OiB0cnVlfSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBVc2VyRXJyb3JWaWV3O1xufSk7XG4iLCIvKmdsb2JhbCBkZWZpbmUgKi9cbmRlZmluZSgnbW9kZWxzL2Vycm9yL3VzZXInLCBbXG4gICAgJ2JhY2tib25lJ1xuXSwgZnVuY3Rpb24oQmFja2JvbmUpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIFVzZXJFcnJvck1vZGVsID0gQmFja2JvbmUuTW9kZWwuZXh0ZW5kKHtcbiAgICAgICAgZGVmYXVsdHM6IHtcbiAgICAgICAgICAgIFwibXNnXCIgOiBcIlwiXG4gICAgICAgIH0sXG4gICAgICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uKGFyZ3MpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0KCdtc2cnLCBhcmdzLm1lc3NhZ2UpO1xuICAgICAgICB9XG4gICAgfSk7ICAgIFxuICAgIHJldHVybiBVc2VyRXJyb3JNb2RlbDtcbn0pO1xuIiwiLypnbG9iYWwgZGVmaW5lKi9cbmRlZmluZSgnY29udHJvbGxlcnMvbWFwL2xheWVyL3BsYWNldHlwZScsIFtcbiAgICAgICdqcXVlcnknXG4gICAgLCAndW5kZXJzY29yZSdcbiAgICAsICdiYWNrYm9uZSdcbiAgICAsICdjb250cm9sbGVycy9wcm90b3R5cGUnXG4gICAgLCAndGV4dCFwYXJ0aWFscy9tYXJrZXItbGVnZW5kLmh0bWwnXG5dLCBmdW5jdGlvbigkLF8sQmFja2JvbmUsQ29udHJvbGxlcixsZWdlbmRQYXJ0aWFsKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBQbGFjZXR5cGVDb250cm9sbGVyID0gQ29udHJvbGxlci5leHRlbmQoe1xuICAgICAgICAgIHZpZXdzICA6IG51bGxcbiAgICAgICAgLCByb3V0ZXIgOiBudWxsXG4gICAgICAgICwgbWFwICAgIDogbnVsbFxuICAgICAgICAsIGNvbnRyb2wgOiBudWxsXG4gICAgICAgICwgaW5pdGlhbGl6ZTogZnVuY3Rpb24oYXJncykge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgdGhhdC52aWV3cyA9IGFyZ3Mudmlld3M7XG4gICAgICAgICAgICB0aGF0Lm1hcCA9IGFyZ3MubWFwO1xuICAgICAgICAgICAgdGhhdC5tYXBjb25maWcgPSBhcmdzLm1hcGNvbmZpZztcbiAgICAgICAgICAgIHZhciBsZWdlbmRUZW1wbCA9IF8udGVtcGxhdGUobGVnZW5kUGFydGlhbCk7XG4gICAgICAgICAgICB2YXIgbGF5ZXJNYXJrZXJzID0gXy5ncm91cEJ5KHRoYXQudmlld3MsIGZ1bmN0aW9uKG1hcmtlclZpZXcpe1xuICAgICAgICAgICAgICAgIHJldHVybiBtYXJrZXJWaWV3Lm1vZGVsLmdldEdlb2pzb24oKS5wcm9wZXJ0aWVzLmxheWVyO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB2YXIgY29udHJvbCA9IHRoYXQuY29udHJvbCA9IEwuY29udHJvbC5sYXllcnMobnVsbCwgbnVsbCwgdGhhdC5tYXBjb25maWcuY29udHJvbC5sYXllcnMub3B0aW9ucykuYWRkVG8odGhhdC5tYXApO1xuICAgICAgICAgICAgLy8gZGlzYWJsZSBtb3VzZW92ZXIvbW91c2VvdXQgZXZlbnRzIGZvciB0aGlzIGNvbnRyb2wsIHdoaWNoIGFyZSBzZXQgYnkgZGVmYXVsdCBpblxuICAgICAgICAgICAgLy8gTGVhZmxldDsgZW5hYmxlcyAnY2xpY2snIGNvbnRyb2xcbiAgICAgICAgICAgIHZhciBjb250YWluZXIgPSBjb250cm9sLmdldENvbnRhaW5lcigpO1xuICAgICAgICAgICAgXy5mb3JFYWNoKE9iamVjdC5rZXlzKGNvbnRhaW5lciksIGZ1bmN0aW9uKGtleSl7XG4gICAgICAgICAgICAgICAgaWYgKGtleS5tYXRjaCgnbW91c2VvdmVyJykpXG4gICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lci5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW92ZXInLCBjb250YWluZXJba2V5XSk7XG4gICAgICAgICAgICAgICAgaWYgKGtleS5tYXRjaCgnbW91c2VvdXQnKSlcbiAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlb3V0JywgY29udGFpbmVyW2tleV0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLyBpbiBTYWZhcmksIGxheWVyIGNvbnRyb2wgYnV0dG9uIGRvZXMgbm90IHJlY2VpdmUgJ2ZvY3VzJyBldmVudCBvbiBjbGlja1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBMLkRvbUV2ZW50Lm9uKCQoJy5sZWFmbGV0LWNvbnRyb2wtbGF5ZXJzLXRvZ2dsZScpWzBdLCAnY2xpY2snLCBjb250cm9sLl9leHBhbmQsIGNvbnRyb2wpO1xuICAgICAgICAgICAgXy5lYWNoKF8ua2V5cyhsYXllck1hcmtlcnMpLCBmdW5jdGlvbihsYXllck5hbWUpIHtcbiAgICAgICAgICAgICAgICB2YXIga2xhc3MgPSBsYXllck5hbWUucmVwbGFjZSgvXFxzKy9nLCAnLScpO1xuICAgICAgICAgICAgICAgIHZhciBsYXllckxlZ2VuZCA9IGxlZ2VuZFRlbXBsKHtcbiAgICAgICAgICAgICAgICAgICAgICBpY29uVXJsOiBsYXllck1hcmtlcnNbbGF5ZXJOYW1lXVswXS5tb2RlbC5nZXQoJ2ljb25VcmwnKVxuICAgICAgICAgICAgICAgICAgICAsIHRpdGxlICA6IGxheWVyTmFtZVxuICAgICAgICAgICAgICAgICAgICAsIGtsYXNzICA6IGtsYXNzXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdmFyIG1hcmtlckxheWVycyA9IF8ubWFwKGxheWVyTWFya2Vyc1tsYXllck5hbWVdLCBmdW5jdGlvbih2aWV3KXsgcmV0dXJuIHZpZXcubWFya2VyTGF5ZXI7IH0pO1xuICAgICAgICAgICAgICAgIHZhciBsYXllciA9IEwubGF5ZXJHcm91cChtYXJrZXJMYXllcnMpO1xuICAgICAgICAgICAgICAgIGNvbnRyb2wuYWRkT3ZlcmxheShsYXllcixsYXllckxlZ2VuZCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICQoJ2lucHV0LmxlYWZsZXQtY29udHJvbC1sYXllcnMtc2VsZWN0b3InKS5lYWNoKGZ1bmN0aW9uKGksZWx0KSB7XG4gICAgICAgICAgICAgICAkKGVsdCkuY2xpY2soKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29udHJvbC5tYXBMYXllckNvbnRyb2xsZXIgPSB0aGF0O1xuICAgICAgICAgICAgY29udHJvbC5fb25JbnB1dENsaWNrID0gdGhhdC5fb25JbnB1dENsaWNrO1xuICAgICAgICB9XG4gICAgICAgICwgZ2V0RmlsdGVyU3RhdGUgOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICBzaG93OiAodGhpcy5zaG93IHx8IFtdKVxuICAgICAgICAgICAgICAgICwgaGlkZTogKHRoaXMuaGlkZSB8fCBbXSlcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgLy8gVE9ETzogZG8gbm90IG92ZXJyaWRlIHRoaXMgcHJpdmF0ZSBtZXRob2Q7IHNhZmVyIHRvIHJlcGxhY2VcbiAgICAgICAgLy8gIEwuY29udHJvbC5sYXllcnMoKSB3aXRoIGEgY3VzdG9tIGNvbnRyb2xcbiAgICAgICAgLCBfb25JbnB1dENsaWNrOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBjb250cm9sID0gdGhpcztcbiAgICAgICAgICAgIHZhciBzaG93ID0gW10sIGhpZGUgPSBbXTtcbiAgICBcdFx0dmFyIGksIGlucHV0LCBvYmosXG4gICAgXHRcdCAgICBpbnB1dHMgPSBjb250cm9sLl9mb3JtLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdpbnB1dCcpLFxuICAgIFx0XHQgICAgaW5wdXRzTGVuID0gaW5wdXRzLmxlbmd0aDtcbiAgICBcdFx0Y29udHJvbC5faGFuZGxpbmdDbGljayA9IHRydWU7XG4gICAgXHRcdGZvciAoaSA9IDA7IGkgPCBpbnB1dHNMZW47IGkrKykge1xuICAgIFx0XHRcdGlucHV0ID0gaW5wdXRzW2ldO1xuICAgIFx0XHRcdG9iaiA9IGNvbnRyb2wuX2xheWVyc1tpbnB1dC5sYXllcklkXTtcbiAgICBcdFx0XHRpZiAoaW5wdXQuY2hlY2tlZCkge1xuICAgIFx0XHRcdFx0b2JqLmxheWVyLmdldExheWVycygpLmZvckVhY2goZnVuY3Rpb24obGF5ZXIpIHtcbiAgICBcdFx0XHRcdCAgICBzaG93LnB1c2gobGF5ZXIpO1xuICAgIFx0XHRcdCAgICB9KTtcbiAgICBcdFx0XHR9IGVsc2Uge1xuICAgIFx0XHRcdFx0b2JqLmxheWVyLmdldExheWVycygpLmZvckVhY2goZnVuY3Rpb24obGF5ZXIpIHtcbiAgICBcdFx0XHRcdCAgICBoaWRlLnB1c2gobGF5ZXIpO1xuICAgIFx0XHRcdCAgICB9KTtcbiAgICBcdFx0XHR9XG4gICAgXHRcdH1cbiAgICBcdFx0Y29udHJvbC5faGFuZGxpbmdDbGljayA9IGZhbHNlO1xuICAgIFx0XHRjb250cm9sLl9yZWZvY3VzT25NYXAoKTtcbiAgICBcdFx0Y29udHJvbC5tYXBMYXllckNvbnRyb2xsZXIuc2hvdyA9IHNob3c7XG4gICAgXHRcdGNvbnRyb2wubWFwTGF5ZXJDb250cm9sbGVyLmhpZGUgPSBoaWRlO1xuICAgIFx0XHRjb250cm9sLm1hcExheWVyQ29udHJvbGxlci50cmlnZ2VyKCdmaWx0ZXInKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBQbGFjZXR5cGVDb250cm9sbGVyO1xufSk7XG4iLCIvKmdsb2JhbCBkZWZpbmUqL1xuZGVmaW5lKCdjb250cm9sbGVycy9tYXAvbGF5ZXIvdGltZWxpbmUnLCBbXG4gICAgICAnanF1ZXJ5J1xuICAgICwgJ3VuZGVyc2NvcmUnXG4gICAgLCAnYmFja2JvbmUnXG4gICAgLCAnY29udHJvbGxlcnMvcHJvdG90eXBlJ1xuICAgICwgJ3ZpZXdzL21hcC9sYXllci90aW1lbGluZSdcbiAgICAsICdtb2RlbHMvbWFwL2xheWVyL3RpbWVsaW5lJ1xuXSwgZnVuY3Rpb24oJCxfLEJhY2tib25lLENvbnRyb2xsZXIsVGltZWxpbmVWaWV3LFRpbWVsaW5lTW9kZWwpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIE1hcFRpbWVsaW5lQ29udHJvbGxlciA9IENvbnRyb2xsZXIuZXh0ZW5kKHtcbiAgICAgICAgICBtYXAgICAgOiBudWxsXG4gICAgICAgICwgbW9kZWwgIDogbnVsbFxuICAgICAgICAsIHZpZXcgICA6IG51bGxcbiAgICAgICAgLCBzaXRlY29uZmlnOiBudWxsXG4gICAgICAgICwgbWFya2VyVmlld3M6IG51bGxcbiAgICAgICAgLCBpbml0aWFsaXplOiBmdW5jdGlvbihhcmdzKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICB0aGF0LnZpZXdzID0gYXJncy52aWV3cztcbiAgICAgICAgICAgIHRoYXQubWFwID0gYXJncy5tYXA7XG4gICAgICAgICAgICB0aGF0Lm1hcmtlclZpZXdzID0gYXJncy5tYXJrZXJWaWV3cztcbiAgICAgICAgICAgIHRoYXQubW9kZWwgPSBuZXcgVGltZWxpbmVNb2RlbCh7XG4gICAgICAgICAgICAgICAgICBzaXRlY29uZmlnICA6IGFyZ3Muc2l0ZWNvbmZpZ1xuICAgICAgICAgICAgICAgICwgbWFya2VyVmlld3MgOiBhcmdzLm1hcmtlclZpZXdzXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoYXQudmlldyA9IG5ldyBUaW1lbGluZVZpZXcoe1xuICAgICAgICAgICAgICAgICAgbW9kZWwgOiB0aGF0Lm1vZGVsXG4gICAgICAgICAgICAgICAgLCBtYXAgICA6IHRoYXQubWFwXG4gICAgICAgICAgICAgICAgLCBtYXJrZXJWaWV3cyA6IGFyZ3MubWFya2VyVmlld3NcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gcmVzdWx0cy5jbGVhciBpcyBhIGZsYWcgdGhhdCB0aGUgYnJ1c2ggaXMgZW1wdHlcbiAgICAgICAgICAgIC8vIHJlc3VsdHMuaW5jbCBpcyBhbiBhcnJheSBvZiBNYXBUaW1lbGluZUl0ZW0nc1xuICAgICAgICAgICAgLy8gdHJpZ2dlciBzaG93L2hpZGUgb24gbGlzdHMgb2YgQXJ0aWNsZU1vZGVsJ3NcbiAgICAgICAgICAgIHRoYXQubGlzdGVuVG8odGhhdC52aWV3LCAnZmlsdGVyJywgdGhhdC5faGFuZGxlRmlsdGVyRXZlbnQpO1xuICAgICAgICAgICAgdGhhdC52aWV3LnJlbmRlcigpO1xuICAgICAgICB9XG4gICAgICAgICwgX2hhbmRsZUZpbHRlckV2ZW50IDogZnVuY3Rpb24ocmVzdWx0cykge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIHNob3dMYXllcnMgPSBbXSwgaGlkZUxheWVycyA9IFtdLCBzaG93SWRzID0ge307XG4gICAgICAgICAgICBpZiAocmVzdWx0cy5jbGVhcikge1xuICAgICAgICAgICAgICAgIHNob3dMYXllcnMgPSBfLm1hcCh0aGF0Lm1hcmtlclZpZXdzLCBmdW5jdGlvbihtYXJrZXJWaWV3KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBtYXJrZXJWaWV3Lm1hcmtlckxheWVyO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzaG93TGF5ZXJzID0gXy5tYXAocmVzdWx0cy5zZWxlY3RlZCwgZnVuY3Rpb24oaXRlbSkge1xuICAgICAgICAgICAgICAgICAgICBzaG93SWRzW2l0ZW0ubWFya2VyVmlldy5tb2RlbC5jaWRdID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbS5tYXJrZXJWaWV3Lm1hcmtlckxheWVyO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGhpZGVMYXllcnMgPSBfLm1hcChfLmZpbHRlcih0aGF0Lm1hcmtlclZpZXdzLCBmdW5jdGlvbihtYXJrZXJWaWV3KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAhKG1hcmtlclZpZXcubW9kZWwuY2lkIGluIHNob3dJZHMpO1xuICAgICAgICAgICAgICAgIH0pLCBmdW5jdGlvbihtYXJrZXJWaWV3KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBtYXJrZXJWaWV3Lm1hcmtlckxheWVyO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhhdC5zaG93ID0gc2hvd0xheWVycztcbiAgICAgICAgICAgIHRoYXQuaGlkZSA9IGhpZGVMYXllcnM7XG4gICAgICAgICAgICB0aGF0LnRyaWdnZXIoJ2ZpbHRlcicpO1xuICAgICAgICB9XG4gICAgICAgICwgZ2V0RmlsdGVyU3RhdGUgOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICBzaG93OiAodGhpcy5zaG93IHx8IFtdKVxuICAgICAgICAgICAgICAgICwgaGlkZTogKHRoaXMuaGlkZSB8fCBbXSlcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gTWFwVGltZWxpbmVDb250cm9sbGVyO1xufSk7XG4iLCIvKmdsb2JhbCBkZWZpbmUqL1xuZGVmaW5lKCd2aWV3cy9hcnRpY2xlL2dhbGxlcnkvbGlnaHRib3gnLCBbXG4gICAgICAnanF1ZXJ5J1xuICAgICwgJ3VuZGVyc2NvcmUnXG4gICAgLCAnYmFja2JvbmUnXG4gICAgLCAndGV4dCFwYXJ0aWFscy9saWdodGJveC10aXRsZS5odG1sJ1xuICAgICwgJ2xpZ2h0Ym94J1xuXSwgZnVuY3Rpb24oJCxfLEJhY2tib25lLGxpZ2h0Ym94VGl0bGVUZW1wbCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgQXJ0aWNsZUdhbGxlcnlMaWdodGJveFZpZXcgPSBCYWNrYm9uZS5WaWV3LmV4dGVuZCh7XG4gICAgICAgICAgaWQ6ICdhcnRpY2xlJ1xuICAgICAgICAsIGluaXRpYWxpemU6IGZ1bmN0aW9uKCkge31cbiAgICAgICAgLCByZW1vdmU6IGZ1bmN0aW9uKCkgeyAvKiByZXRhaW4gKi99XG4gICAgICAgICwgcmVuZGVyOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICAkKCcuZ2FsbGVyeS1pdGVtJykubWFnbmlmaWNQb3B1cCh7XG4gICAgICAgICAgICAgICAgdHlwZTogJ2ltYWdlJyxcbiAgICAgICAgICAgICAgICBnYWxsZXJ5OntcbiAgICAgICAgICAgICAgICAgICAgZW5hYmxlZDogdHJ1ZVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgaW1hZ2U6IHtcbiAgICAgICAgICAgICAgICAgICAgdGl0bGVTcmM6IGZ1bmN0aW9uKCRpdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaWQgPSAkaXRlbS5lbC5hdHRyKCdpZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyICRwbyA9ICQoJy5wb3BvdmVyLicgKyBpZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGN0ID0gXy50ZW1wbGF0ZShsaWdodGJveFRpdGxlVGVtcGwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvbnRlbnQgPSBwY3Qoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAkcG8uZmluZCgnLmhlYWQnKS50ZXh0KCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cjogJHBvLmZpbmQoJy5hdHRyJykudGV4dCgpXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjb250ZW50O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAkKCcuZ2x5cGhpY29uLmdseXBoaWNvbi1leHBhbmQnKS5vbignY2xpY2snLCBmdW5jdGlvbihldnQpe1xuICAgICAgICAgICAgICAgICQoJy5nYWxsZXJ5LWl0ZW0nKS5tYWduaWZpY1BvcHVwKCdvcGVuJyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiB0aGF0O1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIEFydGljbGVHYWxsZXJ5TGlnaHRib3hWaWV3O1xufSk7XG4iLCIvKmdsb2JhbCBkZWZpbmUqL1xuZGVmaW5lKCd2aWV3cy9hcnRpY2xlL2dhbGxlcnkvcG9wb3ZlcicsIFtcbiAgICAgICdqcXVlcnknXG4gICAgLCAndW5kZXJzY29yZSdcbiAgICAsICdiYWNrYm9uZSdcbiAgICAsICd0ZXh0IXBhcnRpYWxzL2ltYWdlLXBvcG92ZXIuaHRtbCdcbiAgICAsICd0ZXh0IXBhcnRpYWxzL2ltYWdlLXBvcG92ZXItY29udGVudC5odG1sJ1xuXSwgZnVuY3Rpb24oJCxfLEJhY2tib25lLHBvcG92ZXJUZW1wbCxwb3BvdmVyQ29udGVudFRlbXBsKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBBcnRpY2xlR2FsbGVyeVBvcG92ZXJWaWV3ID0gQmFja2JvbmUuVmlldy5leHRlbmQoe1xuICAgICAgICAgIGlkOiAnYXJ0aWNsZSdcbiAgICAgICAgLCBpbml0aWFsaXplOiBmdW5jdGlvbigpIHt9XG4gICAgICAgICwgcmVtb3ZlOiBmdW5jdGlvbigpIHsgLyogcmV0YWluICovfVxuICAgICAgICAsIHJlbmRlcjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgLy8gYWRkIHBvcG92ZXJzIHRvIGltYWdlc1xuICAgICAgICAgICAgdmFyIHBjdCA9IF8udGVtcGxhdGUocG9wb3ZlckNvbnRlbnRUZW1wbCk7XG4gICAgICAgICAgICAkKCdpbWcuc2xpZGVzanMtc2xpZGUnKS5lYWNoKGZ1bmN0aW9uKGksZWx0KSB7XG4gICAgICAgICAgICAgICAgdmFyIGlkID0gZWx0LmdldEF0dHJpYnV0ZSgnaWQnKTtcbiAgICAgICAgICAgICAgICB2YXIgJHBvID0gJCgnLnBvcG92ZXIuJyArIGlkKTtcbiAgICAgICAgICAgICAgICB2YXIgdGl0bGUgPSAkcG8uZmluZCgnLmhlYWQnKS50ZXh0KCk7XG4gICAgICAgICAgICAgICAgJChlbHQpLmF0dHIoJ2FsdCcsICRwby5maW5kKCcuZGVzYycpLnRleHQoKSk7XG4gICAgICAgICAgICAgICAgdmFyIGNvbnRlbnQgPSBwY3Qoe1xuICAgICAgICAgICAgICAgICAgICBhdHRyOiAkcG8uZmluZCgnLmF0dHInKS50ZXh0KClcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAkKGVsdCkucG9wb3Zlcih7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lcjogXCJib2R5XCIsXG4gICAgICAgICAgICAgICAgICAgIGh0bWwgOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBjb250ZW50OiBjb250ZW50LFxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogdGl0bGUsXG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlOiBwb3BvdmVyVGVtcGwsXG4gICAgICAgICAgICAgICAgICAgIHRyaWdnZXI6IFwiaG92ZXJcIixcbiAgICAgICAgICAgICAgICAgICAgcGxhY2VtZW50OiBcImxlZnRcIlxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICQoZWx0KS5jbGljayhmdW5jdGlvbihldnQpIHtcbiAgICAgICAgICAgICAgICAgICAgJChlbHQpLnBvcG92ZXIoJ2hpZGUnKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHRoYXQ7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gQXJ0aWNsZUdhbGxlcnlQb3BvdmVyVmlldztcbn0pO1xuIiwiLypnbG9iYWwgZGVmaW5lKi9cbmRlZmluZSgndmlld3MvYXJ0aWNsZS9nYWxsZXJ5L3NsaWRlcycsIFtcbiAgICAgICdqcXVlcnknXG4gICAgLCAndW5kZXJzY29yZSdcbiAgICAsICdiYWNrYm9uZSdcbiAgICAsICd0ZXh0IXBhcnRpYWxzL2ltYWdlLXBvcG92ZXIuaHRtbCdcbiAgICAsICd0ZXh0IXBhcnRpYWxzL2ltYWdlLXBvcG92ZXItY29udGVudC5odG1sJ1xuICAgICwgJ3RleHQhcGFydGlhbHMvbGlnaHRib3gtdGl0bGUuaHRtbCdcbiAgICAsICdzbGlkZXNqcydcbiAgICAsICdsaWdodGJveCdcbl0sIGZ1bmN0aW9uKCQsXyxCYWNrYm9uZSxwb3BvdmVyVGVtcGwscG9wb3ZlckNvbnRlbnRUZW1wbCxsaWdodGJveFRpdGxlVGVtcGwpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIEFydGljbGVHYWxsZXJ5U2xpZGVzVmlldyA9IEJhY2tib25lLlZpZXcuZXh0ZW5kKHtcbiAgICAgICAgICBpZDogJ2FydGljbGUnXG4gICAgICAgICwgaW5pdGlhbGl6ZTogZnVuY3Rpb24oKSB7fVxuICAgICAgICAsIHJlbW92ZTogZnVuY3Rpb24oKSB7IC8qIHJldGFpbiAqL31cbiAgICAgICAgLCByZW5kZXI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIC8vIGNvbmZpZ3VyZSBzbGlkZXNqczsgdXAgdG8gbm93LCAnZGlzcGxheTpub25lJ1xuICAgICAgICAgICAgLy8gaGFzIGFwcGxpZWRcbiAgICAgICAgICAgICQoXCIjc2xpZGVzXCIpLnNsaWRlc2pzKHtcbiAgICAgICAgICAgICAgICBuYXZpZ2F0aW9uOiB7XG4gICAgICAgICAgICAgICAgICAgIGFjdGl2ZTogKCQoJ2ltZy5zbGlkZXNqcy1zbGlkZScpLmxlbmd0aCA+IDEpLFxuICAgICAgICAgICAgICAgICAgICBlZmZlY3Q6IFwiZmFkZVwiXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBwYWdpbmF0aW9uOiB7XG4gICAgICAgICAgICAgICAgICAgIGFjdGl2ZTogKCQoJ2ltZy5zbGlkZXNqcy1zbGlkZScpLmxlbmd0aCA+IDEpLFxuICAgICAgICAgICAgICAgICAgICBlZmZlY3Q6IFwiZmFkZVwiXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBlZmZlY3Q6IHtcbiAgICAgICAgICAgICAgICAgICAgZmFkZToge1xuICAgICAgICAgICAgICAgICAgICAgIHNwZWVkOiAxMDAsXG4gICAgICAgICAgICAgICAgICAgICAgY3Jvc3NmYWRlOiB0cnVlXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGNhbGxiYWNrOiB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGNhbGxlZCBvbiBsb2FkIG9mIGZpcnN0IHBpY1xuICAgICAgICAgICAgICAgICAgICBsb2FkZWQ6IGZ1bmN0aW9uKG51bWJlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyICRpbWcgPSAkKFwiLnNsaWRlc2pzLWNvbnRyb2xcIikuY2hpbGRyZW4oJzplcSgnKyAobnVtYmVyIC0gMSkgKyAnKScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJGltZy5jc3Moe3Zpc2liaWxpdHk6IFwiaGlkZGVuXCJ9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICRpbWcuY3NzKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogJ2F1dG8nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLCB3aWR0aDogICdhdXRvJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgbWF4SGVpZ2h0OiAkKFwiLnNsaWRlc2pzLWNvbnRhaW5lclwiKS5oZWlnaHQoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgbWF4V2lkdGg6ICAkKFwiLnNsaWRlc2pzLWNvbnRhaW5lclwiKS53aWR0aCgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLCBwb3NpdGlvbjogIFwicmVsYXRpdmVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGVmdCA9ICgkKFwiLnNsaWRlc2pzLWNvbnRhaW5lclwiKS53aWR0aCgpIC0gJGltZy53aWR0aCgpKS8yO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGVmdCAtPSBwYXJzZUludCgkaW1nLmNzcygncGFkZGluZy1sZWZ0JyksIDEwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICRpbWcuY3NzKHsgbGVmdDogbGVmdCB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICRpbWcuY3NzKHsgdmlzaWJpbGl0eTogXCJ2aXNpYmxlXCIgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIC8vIGNhbGxlZCBzdGFydCBvZiBjaGFuZ2Ugb2YgcGljIChhZnRlciBmaXJzdClcbiAgICAgICAgICAgICAgICAgICAgc3RhcnQ6IGZ1bmN0aW9uKG51bWJlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgJChcIi5zbGlkZXNqcy1jb250cm9sXCIpLmNoaWxkcmVuKCkuY3NzKHt2aXNpYmlsaXR5OiBcImhpZGRlblwifSk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIC8vIGNhbGxlZCBlbmQgb2YgY2hhbmdlIG9mIHBpYyAoYWZ0ZXIgZmlyc3QpXG4gICAgICAgICAgICAgICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbihudW1iZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuZXdJbWcgPSBudW1iZXIgLSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyICRpbWcgPSAkKFwiLnNsaWRlc2pzLWNvbnRyb2xcIikuY2hpbGRyZW4oJzplcSgnKyBuZXdJbWcgKyAnKScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJGltZy5jc3Moe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAnYXV0bydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIHdpZHRoOiAgJ2F1dG8nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLCBtYXhIZWlnaHQ6ICQoXCIuc2xpZGVzanMtY29udGFpbmVyXCIpLmhlaWdodCgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLCBtYXhXaWR0aDogICQoXCIuc2xpZGVzanMtY29udGFpbmVyXCIpLndpZHRoKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIHBvc2l0aW9uOiAgXCJyZWxhdGl2ZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICRpbWcuY3NzKHsgdmlzaWJpbGl0eTogXCJ2aXNpYmxlXCIgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiB0aGF0O1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIEFydGljbGVHYWxsZXJ5U2xpZGVzVmlldztcbn0pO1xuIiwiLypnbG9iYWwgZGVmaW5lKi9cbmRlZmluZSgndmlld3MvbWFwL2xheWVyL3RpbWVsaW5lJywgW1xuICAgICAgJ2pxdWVyeSdcbiAgICAsICd1bmRlcnNjb3JlJ1xuICAgICwgJ2JhY2tib25lJ1xuICAgICwgJ2xlYWZsZXQnXG4gICAgLCAndGV4dCFwYXJ0aWFscy90aW1lbGluZS5odG1sJ1xuICAgICwgJ2NvbnRyb2xzL0wuQ29udHJvbC5UaW1lbGluZSdcbl0sIGZ1bmN0aW9uKCQsXyxCYWNrYm9uZSxMLHRpbWVsaW5lQ29udHJvbFBhcnRpYWwpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIFRpbWVsaW5lVmlldyA9IEJhY2tib25lLlZpZXcuZXh0ZW5kKHtcbiAgICAgICAgICBpZDogJ3RpbWVsaW5lJ1xuICAgICAgICAsIG1hcDogbnVsbFxuICAgICAgICAsIGluaXRpYWxpemU6IGZ1bmN0aW9uKGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIHRoYXQubWFwID0gYXJncy5tYXA7XG4gICAgICAgIH1cbiAgICAgICAgLCBfdGltZWxpbmVDb2xsYXBzZSA6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgdGhhdC5faGFuZGxlRmlsdGVyKHtjbGVhcjp0cnVlfSk7XG4gICAgICAgIH1cbiAgICAgICAgLCBfaGFuZGxlRmlsdGVyIDogZnVuY3Rpb24oc2VsZWN0ZWQpIHtcbiAgICAgICAgICAgIHRoaXMudHJpZ2dlcignZmlsdGVyJywgc2VsZWN0ZWQpO1xuICAgICAgICB9XG4gICAgICAgICwgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIHZhciBwb3NpdGlvbiwgY29udHJvbGhlaWdodCwgbWFwaGVpZ2h0LCBkb2N1bWVudGhlaWdodDtcbiAgICAgICAgICAgIG1hcGhlaWdodCA9ICQoJyNtYXAnKS5oZWlnaHQoKTtcbiAgICAgICAgICAgIGRvY3VtZW50aGVpZ2h0ID0gZG9jdW1lbnQuYm9keS5jbGllbnRIZWlnaHQ7XG4gICAgICAgICAgICBpZiAoTWF0aC5hYnMoZG9jdW1lbnRoZWlnaHQvMiAtIG1hcGhlaWdodCkgPCAyKSB7XG4gICAgICAgICAgICAgICAgcG9zaXRpb24gPSAnYm90dG9tcmlnaHQnO1xuICAgICAgICAgICAgICAgIGNvbnRyb2xoZWlnaHQgPSAkKCcjbWFwJykuaGVpZ2h0KCkgLSAxMDA7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHBvc2l0aW9uID0gJ3RvcGxlZnQnO1xuICAgICAgICAgICAgICAgIGNvbnRyb2xoZWlnaHQgPSA1MDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGF0Lm1vZGVsLmluaXQoKS5kb25lKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHRoYXQudGltZWxpbmUgPSBMLmNvbnRyb2wudGltZWxpbmUodGhhdC5tYXAsdGhhdC5tb2RlbCxcbiAgICAgICAgICAgICAgICAgICAgeyAgICAgaGVpZ2h0ICAgOiBjb250cm9saGVpZ2h0XG4gICAgICAgICAgICAgICAgICAgICAgICAsIHBvc2l0aW9uIDogcG9zaXRpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICwgb246IHsgYnJ1c2hlbmQ6IGZ1bmN0aW9uKGEpIHsgdGhhdC5faGFuZGxlRmlsdGVyKGEpOyB9fX1cbiAgICAgICAgICAgICAgICApLmFkZFRvKHRoYXQubWFwKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIFRpbWVsaW5lVmlldztcbn0pO1xuXG4iLCIvKmdsb2JhbCBkZWZpbmUgKi9cbmRlZmluZSgnbW9kZWxzL21hcC9sYXllci90aW1lbGluZScsIFtcbiAgICAgICdqcXVlcnknXG4gICAgLCAndW5kZXJzY29yZSdcbiAgICAsICdiYWNrYm9uZSdcbiAgICAsICdjb2xsZWN0aW9ucy90aW1lbGluZSdcbiAgICAsICdtb2RlbHMvbWFwL2xheWVyL3RpbWVsaW5lL2l0ZW0nXG4gICAgLCAnbWl4aW5zL2FzeW5jSW5pdCdcbl0sIGZ1bmN0aW9uKCQsXyxCYWNrYm9uZSxUaW1lbGluZUNvbGxlY3Rpb24sVGltZWxpbmVJdGVtLEFzeW5jSW5pdCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgVGltZWxpbmVNb2RlbCA9IEJhY2tib25lLk1vZGVsLmV4dGVuZCh7XG4gICAgICAgICAgbWFya2VyVmlld3M6IG51bGxcbiAgICAgICAgLCBzdGFydDogbnVsbFxuICAgICAgICAsIGVuZDogbnVsbFxuICAgICAgICAsIHNpdGVjb25maWcgOiBudWxsXG4gICAgICAgICwgYm9va2NvbmZpZyA6IG51bGxcbiAgICAgICAgLCBpbml0aWFsaXplOiBmdW5jdGlvbihhcmdzKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICB0aGF0Lm1hcmtlclZpZXdzID0gYXJncy5tYXJrZXJWaWV3cztcbiAgICAgICAgICAgIHRoYXQuc2l0ZWNvbmZpZyA9IGFyZ3Muc2l0ZWNvbmZpZztcbiAgICAgICAgICAgIHRoYXQuJGRlZiA9ICQuRGVmZXJyZWQoKTtcbiAgICAgICAgICAgICQuZ2V0SlNPTih0aGF0LnNpdGVjb25maWcuYm9vay5maWxlLCBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgdGhhdC5ib29rY29uZmlnID0gZGF0YS5ib29rO1xuICAgICAgICAgICAgICAgIHRoYXQuX2luaXRpYWxpemUoKTtcbiAgICAgICAgICAgICAgICB0aGF0LiRkZWYucmVzb2x2ZSh0aGF0KTtcbiAgICAgICAgICAgIH0pLmZhaWwoZnVuY3Rpb24oanF4aHIsIHRleHRTdGF0dXMsIGVycm9yKSB7XG4gICAgICAgICAgICAgICAgdGhhdC4kZGVmLnJlamVjdCgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgLCBfaW5pdGlhbGl6ZSA6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIGNvbCA9IG5ldyBUaW1lbGluZUNvbGxlY3Rpb24oKTtcbiAgICAgICAgICAgIHRoYXQuc2V0KCdjb2xsZWN0aW9uJywgY29sKTtcbiAgICAgICAgICAgIF8uZm9yRWFjaCh0aGF0Lm1hcmtlclZpZXdzLCBmdW5jdGlvbihtYXJrZXJWaWV3KSB7XG4gICAgICAgICAgICAgICAgdmFyIG1vZGVsID0gbWFya2VyVmlldy5tb2RlbDtcbiAgICAgICAgICAgICAgICB2YXIgYm9va0NoYXB0ZXIgPSBfLmZpbmRXaGVyZSh0aGF0LmJvb2tjb25maWcuY2hhcHRlcnMsIHtcbiAgICAgICAgICAgICAgICAgICAgICBwYXJ0ICAgIDogbW9kZWwuYXR0cmlidXRlcy5jaXRlZFJhbmdlLnBhcnRcbiAgICAgICAgICAgICAgICAgICAgLCBjaGFwdGVyIDogbW9kZWwuYXR0cmlidXRlcy5jaXRlZFJhbmdlLmNoYXB0ZXJcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAoIWJvb2tDaGFwdGVyKSByZXR1cm47XG4gICAgICAgICAgICAgICAgdmFyIHN0YXJ0ID0gYm9va0NoYXB0ZXIucGFyYWdyYXBocy5zdGFydFxuICAgICAgICAgICAgICAgICAgICAgICAgICArIG1vZGVsLmF0dHJpYnV0ZXMuY2l0ZWRSYW5nZS5wYXJhZ3JhcGg7XG4gICAgICAgICAgICAgICAgdmFyIGVuZCA9IHN0YXJ0ICsgMTtcbiAgICAgICAgICAgICAgICBjb2wuYWRkKG5ldyBUaW1lbGluZUl0ZW0oe1xuICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0OiBzdGFydFxuICAgICAgICAgICAgICAgICAgICAsIGVuZDogZW5kXG4gICAgICAgICAgICAgICAgICAgICwgbWFya2VyVmlldzogbWFya2VyVmlld1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhhdC5zdGFydCA9IF8ubWluKHRoYXQuYm9va2NvbmZpZy5jaGFwdGVycywgZnVuY3Rpb24oY2hhcHRlcikge1xuICAgICAgICAgICAgICAgIHJldHVybiBjaGFwdGVyLnBhcmFncmFwaHMuc3RhcnQ7XG4gICAgICAgICAgICB9KS5wYXJhZ3JhcGhzLnN0YXJ0O1xuICAgICAgICAgICAgdGhhdC5lbmQgPSBfLm1heCh0aGF0LmJvb2tjb25maWcuY2hhcHRlcnMsIGZ1bmN0aW9uKGNoYXB0ZXIpe1xuICAgICAgICAgICAgICAgIHJldHVybiBjaGFwdGVyLnBhcmFncmFwaHMuZW5kO1xuICAgICAgICAgICAgfSkucGFyYWdyYXBocy5lbmQ7XG4gICAgICAgIH1cbiAgICAgICAgLCBnZXRJdGVtcyA6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0KCdjb2xsZWN0aW9uJykubW9kZWxzO1xuICAgICAgICB9XG4gICAgICAgICwgdGlja1ZhbHVlcyA6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIHZhbHVlcyA9IF8ubWFwKHRoaXMuYm9va2NvbmZpZy5jaGFwdGVycywgZnVuY3Rpb24oY2hhcHRlcil7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNoYXB0ZXIucGFyYWdyYXBocy5zdGFydDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdmFsdWVzLnNvcnQoZnVuY3Rpb24oYSxiKSB7IHJldHVybiBhLWI7IH0pO1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlcztcbiAgICAgICAgfVxuICAgICAgICAsIHRpY2tGb3JtYXQgOiBmdW5jdGlvbihwKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICAgICAgdmFyIGksY2hhcHRlcjtcbiAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgdGhhdC5ib29rY29uZmlnLmNoYXB0ZXJzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNoYXB0ZXIgPSB0aGF0LmJvb2tjb25maWcuY2hhcHRlcnNbaV07XG4gICAgICAgICAgICAgICAgICAgIGlmIChwIDw9IGNoYXB0ZXIucGFyYWdyYXBocy5lbmQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHAgPSBjaGFwdGVyLmNoYXB0ZXI7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBibGFuayB0aWNrIGZvciBlbmQgb2YgYm9va1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHAgPT09IHRoYXQuYm9va2NvbmZpZy5jaGFwdGVycy5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHA7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiXCI7XG5cbiAgICAgICAgICAgIF8uZmluZEluZGV4KHRoaXMuZ2V0KCdjb2xsZWN0aW9uJykubW9kZWxzLCBmdW5jdGlvbihpdGVtKXtcbiAgICAgICAgICAgICAgICByZXR1cm4gKGl0ZW0uY2lkID09PSB0aW1lbGluZUl0ZW0uY2lkKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKCFpKSByZXR1cm47XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXQoJ2NvbGxlY3Rpb24nKS5nZXQoaSk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBfLmV4dGVuZChUaW1lbGluZU1vZGVsLnByb3RvdHlwZSxBc3luY0luaXQpO1xuICAgIHJldHVybiBUaW1lbGluZU1vZGVsO1xufSk7XG4iLCIvKmdsb2JhbCBkZWZpbmUgKi9cbmRlZmluZSgnbW9kZWxzL21hcC9sYXllci90aW1lbGluZS9pdGVtJywgW1xuICAgICAgJ2pxdWVyeSdcbiAgICAsICd1bmRlcnNjb3JlJ1xuICAgICwgJ2JhY2tib25lJ1xuXSwgZnVuY3Rpb24oJCxfLEJhY2tib25lKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBUaW1lbGluZUl0ZW1Nb2RlbCA9IEJhY2tib25lLk1vZGVsLmV4dGVuZCh7XG4gICAgICAgICAgbWFya2VyVmlldzogbnVsbFxuICAgICAgICAsIHN0YXJ0OiBudWxsICAgICAgIC8vIFwiYWJzb2x1dGVcIiBzdGFydCAoaWUsIHBhcmFncmFwaCBpbmRleCB3L28gY2hhcHRlcilcbiAgICAgICAgLCBlbmQ6IG51bGwgICAgICAgICAvLyBcImFic29sdXRlXCIgZW5kXG4gICAgICAgICwgaW5pdGlhbGl6ZTogZnVuY3Rpb24oYXJncykge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgdGhhdC5tYXJrZXJWaWV3ID0gYXJncy5tYXJrZXJWaWV3O1xuICAgICAgICAgICAgdGhhdC5zdGFydCA9IGFyZ3Muc3RhcnQ7XG4gICAgICAgICAgICB0aGF0LmVuZCA9IGFyZ3MuZW5kO1xuICAgICAgICB9XG4gICAgICAgICwgZHVyYXRpb246IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZW5kLXRoaXMuc3RhcnQ7XG4gICAgICAgIH1cbiAgICAgICAgLCBjb21wYXJlVG86IGZ1bmN0aW9uKGIpIHtcbiAgICAgICAgICAgIHJldHVybiBcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBUaW1lbGluZUl0ZW1Nb2RlbDtcbn0pO1xuIiwicmVxdWlyZS5jb25maWcoe1xuICBwYXRoczoge1xuICAgICAgYmFja2JvbmUgIDogJy8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL2JhY2tib25lLmpzLzEuMS4yL2JhY2tib25lLW1pbidcbiAgICAsIGJvb3RzdHJhcCA6ICcvL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy90d2l0dGVyLWJvb3RzdHJhcC8zLjMuNS9qcy9ib290c3RyYXAubWluJ1xuICAgICwgZDMgICAgICAgIDogJy8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL2QzLzMuNS42L2QzLm1pbidcbiAgICAsIGpxdWVyeSAgICA6ICcvL2NvZGUuanF1ZXJ5LmNvbS9qcXVlcnktMi4xLjQubWluJ1xuICAgICwgbGVhZmxldCAgIDogJy8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL2xlYWZsZXQvMC43LjMvbGVhZmxldCdcbiAgICAsIGxpZ2h0Ym94ICA6ICcvL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9tYWduaWZpYy1wb3B1cC5qcy8xLjAuMC9qcXVlcnkubWFnbmlmaWMtcG9wdXAubWluJ1xuICAgICwgc2xpZGVzanMgIDogJy8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL3NsaWRlc2pzLzMuMC9qcXVlcnkuc2xpZGVzLm1pbidcbiAgICAsIHRleHQgICAgICA6ICcvL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9yZXF1aXJlLXRleHQvMi4wLjEyL3RleHQubWluJ1xuICAgICwgdW5kZXJzY29yZTogJy8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL3VuZGVyc2NvcmUuanMvMS44LjMvdW5kZXJzY29yZS1taW4nXG4gICAgLCBwYXJ0aWFscyAgOiAnLi4vcGFydGlhbHMnXG4gICAgLCB4c2wgICAgICAgOiAnLi4vc2NyaXB0L3hzbCdcbiAgICAsIHBhZ2VzICAgICA6ICcuLi9wYWdlcydcbiAgfSxcbiAgc2hpbToge1xuICAgIGJvb3RzdHJhcDoge1xuICAgICAgZGVwczogWydqcXVlcnknXVxuICAgIH0sXG4gICAgYmFja2JvbmU6IHtcbiAgICAgICAgJ2RlcHMnOiBbJ2pxdWVyeScsICd1bmRlcnNjb3JlJ10sXG4gICAgICAgICdleHBvcnRzJzogJ0JhY2tib25lJ1xuICAgIH0sXG4gICAgdW5kZXJzY29yZToge1xuICAgICAgICAnZXhwb3J0cyc6ICdfJ1xuICAgIH0sXG4gICAgdGV4dDoge1xuICAgICAgICAnZGVwcyc6IFtdXG4gICAgfSxcbiAgICBzbGlkZXNqczoge1xuICAgICAgICBkZXBzOiBbJ2pxdWVyeSddXG4gICAgfSxcbiAgICBsaWdodGJveDoge1xuICAgICAgZGVwczogWydqcXVlcnknXVxuICAgIH1cbiAgfVxufSk7XG5yZXF1aXJlKFtcbiAgICAnanF1ZXJ5JyxcbiAgICAnbW9kZWxzL2Vycm9yL3VzZXInLFxuICAgICd2aWV3cy9lcnJvci91c2VyJyxcbiAgICAncm91dGVzL3JvdXRlcicsXG4gICAgJ3ZpZXdzL2FwcCcsXG4gICAgJ2Jvb3RzdHJhcCdcbl0sIGZ1bmN0aW9uKCQsVXNlckVycm9yTW9kZWwsVXNlckVycm9yVmlldyxSb3V0ZXIsQXBwVmlldykge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgY29uZmlnZmlsZSA9ICQoJyNtYWluJykuYXR0cignZGF0YS1jb25maWcnKTtcbiAgICBpZiAoY29uZmlnZmlsZSkge1xuICAgICAgICAkLmdldEpTT04oY29uZmlnZmlsZSwgZnVuY3Rpb24oc2l0ZWNvbmZpZykge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBuZXcgQXBwVmlldygpO1xuICAgICAgICAgICAgICAgIG5ldyBSb3V0ZXIoe1xuICAgICAgICAgICAgICAgICAgICAgIHJvdXRlczogc2l0ZWNvbmZpZy5wYWdlcy5yb3V0ZXNcbiAgICAgICAgICAgICAgICAgICAgLCBjb25maWc6IHNpdGVjb25maWdcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXNpdGVjb25maWcuZGVidWcpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3IFVzZXJFcnJvclZpZXcoe1xuICAgICAgICAgICAgICAgICAgICAgICAgbW9kZWw6IG5ldyBVc2VyRXJyb3JNb2RlbCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbXNnOiBlLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkuZmFpbChmdW5jdGlvbihqcXhociwgdGV4dFN0YXR1cywgZXJyb3IpIHtcbiAgICAgICAgICAgIG5ldyBVc2VyRXJyb3JWaWV3KHtcbiAgICAgICAgICAgICAgICBtb2RlbDogbmV3IFVzZXJFcnJvck1vZGVsKHtcbiAgICAgICAgICAgICAgICAgICAgbXNnOiBcIkZhaWxlZCB0byBsb2FkIHNpdGUgY29uZmlnIGZpbGUgJ1wiICsgY29uZmlnZmlsZSArIFwiJyBcIiArIGVycm9yXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBuZXcgVXNlckVycm9yVmlldyh7XG4gICAgICAgICAgICBtb2RlbDogbmV3IFVzZXJFcnJvck1vZGVsKHtcbiAgICAgICAgICAgICAgICBtc2c6IFwiTm8gY29uZmlndXJhdGlvbiBmaWxlbmFtZSBzcGVjaWZpZWQgaW4gaG9tZSBwYWdlLlwiXG4gICAgICAgICAgICB9KVxuICAgICAgICB9KTtcbiAgICB9XG59KTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==